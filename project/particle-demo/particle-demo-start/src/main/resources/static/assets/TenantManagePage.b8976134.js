import{d as F,r as b,a as B,b as a,o as A,c as x,e as o,w as l,f,F as P,au as C,av as O}from"./index.853052ed.js";import{p as E}from"./tenantManage.7fbd2106.js";const R=F({name:"TenantManagePage"}),N=F({...R,setup(k){const d=b(null),s=B({form:{},formComps:E,tableColumns:[{prop:"name",label:"\u79DF\u6237\u540D\u79F0",showOverflowTooltip:!0},{prop:"code",label:"\u79DF\u6237\u7F16\u7801",showOverflowTooltip:!0},{prop:"tenantLogoJson",label:"\u79DF\u6237logo",columnView:"image"},{prop:"tenantLogoTextJson",label:"\u79DF\u6237logo\u6587\u672C",showOverflowTooltip:!0},{prop:"tenantfaviconJson",label:"favicon\u56FE\u6807",showOverflowTooltip:!0},{prop:"tenantWebTitleJson",label:"\u7F51\u9875\u6807\u9898",showOverflowTooltip:!0},{prop:"isFormal",label:"\u662F\u5426\u6B63\u5F0F",formatter:(e,r,t,u)=>t?"\u6B63\u5F0F":"\u8BD5\u7528"},{prop:"userLimitCount",label:"\u7528\u6237\u6570\u9650\u5236"},{prop:"effectiveAt",label:"\u751F\u6548\u65E5\u671F",showOverflowTooltip:!0},{prop:"expireAt",label:"\u8FC7\u671F\u65F6\u95F4",showOverflowTooltip:!0},{prop:"masterUserNickname",label:"\u4E3B\u7528\u6237\u6635\u79F0",showOverflowTooltip:!0},{prop:"isDisabled",label:"\u662F\u5426\u7981\u7528",formatter:(e,r,t,u)=>{let n=t?"\u7981\u7528":"\u542F\u7528";return t&&e.disabledReason&&(n=n+`(${e.disabledReason})`),n}},{prop:"userName",label:"\u59D3\u540D",showOverflowTooltip:!0},{prop:"email",label:"\u90AE\u7BB1",showOverflowTooltip:!0},{prop:"mobile",label:"\u624B\u673A\u53F7"},{prop:"tenantDomain",label:"\u79DF\u6237\u57DF\u540D",showOverflowTooltip:!0},{prop:"tenantThemeJson",label:"\u79DF\u6237\u4E3B\u9898"},{prop:"tenantDefaultRouteJson",label:"\u9ED8\u8BA4\u8DEF\u7531",showOverflowTooltip:!0},{prop:"configJson",label:"\u914D\u7F6Ejson",showOverflowTooltip:!0},{prop:"remark",label:"\u63CF\u8FF0",showOverflowTooltip:!0}]}),i=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:tenant:pageQuery"}),c=()=>{d.value.refreshData()},w=({pageQuery:e})=>C({...s.form,...e}),v={permission:i.value.permission},T=({row:e,column:r,$index:t})=>{if(t<0)return[];e.id;let u={tenantId:e.id,masterUserId:e.masterUserId,masterUserNickname:e.masterUserNickname};return[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:tenant:update",route:{path:"/admin/TenantManageUpdate",query:u}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:tenant:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return O({id:e.id}).then(p=>(c(),Promise.resolve(p)))}},{txt:"\u79DF\u6237\u5206\u914D\u5E94\u7528",text:!0,position:"more",permission:"admin:web:tenantFuncApplication:tenantAssignFuncApplication",route:{path:"/admin/tenant/tenantAssignFuncApplication",query:u}}]};return(e,r)=>{const t=a("PtButton"),u=a("PtForm"),n=a("PtButtonGroup"),p=a("el-table-column"),h=a("PtTable"),D=a("PtRouteViewPopover");return A(),x(P,null,[o(u,{form:s.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",labelWidth:"80",comps:s.formComps},{buttons:l(()=>[o(t,{permission:"admin:web:tenant:create",route:"/admin/TenantManageAdd"},{default:l(()=>[f("\u6DFB\u52A0")]),_:1}),o(t,{permission:"admin:web:tenant:oneClickCreate",route:"/admin/tenantManageOneClickAdd"},{default:l(()=>[f("\u4E00\u952E\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(h,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:r[0]||(r[0]=m=>i.value.loading=m),paginationProps:v,columns:s.tableColumns},{defaultAppend:l(()=>[o(p,{label:"\u64CD\u4F5C",width:"220"},{default:l(({row:m,column:_,$index:g})=>[o(n,{options:T({row:m,column:_,$index:g}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(D,{level:3})],64)}}});export{N as default};
