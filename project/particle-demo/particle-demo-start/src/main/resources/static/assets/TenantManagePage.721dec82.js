import{d as f,r as b,a as P,b as a,o as h,c as v,e as o,w as s,f as F,F as C,as as T,at as E}from"./index.4ca05ef1.js";import{p as R}from"./tenantManage.f722f7e8.js";const k=f({name:"TenantManagePage"}),I=f({...k,setup(M){const d=b(null),l=P({form:{},formComps:R,tableColumns:[{prop:"name",label:"\u79DF\u6237\u540D\u79F0",showOverflowTooltip:!0},{prop:"code",label:"\u79DF\u6237\u7F16\u7801",showOverflowTooltip:!0},{prop:"tenantLogoJson",label:"\u79DF\u6237logo",columnView:"image"},{prop:"isFormal",label:"\u662F\u5426\u6B63\u5F0F",formatter:(e,r,t,n)=>t?"\u6B63\u5F0F":"\u8BD5\u7528"},{prop:"userLimitCount",label:"\u7528\u6237\u6570\u9650\u5236"},{prop:"effectiveAt",label:"\u751F\u6548\u65E5\u671F"},{prop:"expireAt",label:"\u8FC7\u671F\u65F6\u95F4"},{prop:"masterUserNickname",label:"\u4E3B\u7528\u6237\u6635\u79F0"},{prop:"isDisabled",label:"\u662F\u5426\u7981\u7528",formatter:(e,r,t,n)=>{let u=t?"\u7981\u7528":"\u542F\u7528";return t&&e.disabledReason&&(u=u+`(${e.disabledReason})`),u}},{prop:"userName",label:"\u59D3\u540D"},{prop:"email",label:"\u90AE\u7BB1"},{prop:"mobile",label:"\u624B\u673A\u53F7"},{prop:"tenantDomain",label:"\u79DF\u6237\u57DF\u540D"},{prop:"tenantThemeJson",label:"\u79DF\u6237\u4E3B\u9898"},{prop:"tenantDefaultRouteJson",label:"\u9ED8\u8BA4\u8DEF\u7531"},{prop:"configJson",label:"\u989D\u5916\u914D\u7F6Ejson",showOverflowTooltip:!0},{prop:"remark",label:"\u63CF\u8FF0"}]}),i=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:tenant:pageQuery"}),c=()=>{d.value.refreshData()},D=({pageQuery:e})=>T({...l.form,...e}),_={permission:i.value.permission},g=({row:e,column:r,$index:t})=>{if(t<0)return[];e.id;let n={tenantId:e.id,masterUserId:e.masterUserId,masterUserNickname:e.masterUserNickname};return[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:tenant:update",route:{path:"/admin/TenantManageUpdate",query:n}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:tenant:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return E({id:e.id}).then(p=>(c(),Promise.resolve(p)))}},{txt:"\u79DF\u6237\u5206\u914D\u5E94\u7528",text:!0,position:"more",permission:"admin:web:tenantFuncApplication:tenantAssignFuncApplication",route:{path:"/admin/tenant/tenantAssignFuncApplication",query:n}}]};return(e,r)=>{const t=a("PtButton"),n=a("PtForm"),u=a("PtButtonGroup"),p=a("el-table-column"),B=a("PtTable"),A=a("PtRouteViewPopover");return h(),v(C,null,[o(n,{form:l.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:l.formComps},{buttons:s(()=>[o(t,{permission:"admin:web:tenant:create",route:"/admin/TenantManageAdd"},{default:s(()=>[F("\u6DFB\u52A0")]),_:1}),o(t,{permission:"admin:web:tenant:oneClickCreate",route:"/admin/tenantManageOneClickAdd"},{default:s(()=>[F("\u4E00\u952E\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(B,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:D,onDataMethodDataLoading:r[0]||(r[0]=m=>i.value.loading=m),paginationProps:_,columns:l.tableColumns},{defaultAppend:s(()=>[o(p,{label:"\u64CD\u4F5C",width:"220"},{default:s(({row:m,column:w,$index:x})=>[o(u,{options:g({row:m,column:w,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(A,{level:3})],64)}}});export{I as default};
