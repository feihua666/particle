import{p as h,r as G,a as v}from"./lowcodeSegmentGenAdminApi.8f63fc46.js";import{d as w,r as g,a as C,b as n,o as x,c as S,e as r,w as d,f as P,F as T,Z as F}from"./index.39bfef88.js";import{p as M}from"./lowcodeSegmentGenManage.7c429f04.js";import"./lowcodeSegmentTemplateAdminApi.e967efac.js";import"./lowcodeModelAdminApi.c9cedee5.js";const y=w({name:"LowcodeSegmentGenManagePage"}),J=w({...y,setup(k){const f=g(null),a=C({form:{},formComps:M,tableColumns:[{label:"\u751F\u6210\u540D\u79F0",prop:"name"},{label:"\u7247\u6BB5\u6A21\u677F\u540D\u79F0",prop:"lowcodeSegmentTemplateName"},{label:"\u6A21\u578B\u540D\u79F0",prop:"lowcodeModelName"},{label:"\u6A21\u578B\u6570\u636E",prop:"lowcodeModelJson",showOverflowTooltip:!0},{label:"\u5168\u5C40\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"globalJson",showOverflowTooltip:!0},{label:"\u6269\u5C55\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"extJson",showOverflowTooltip:!0},{label:"\u8F93\u51FA\u7EDD\u5BF9\u4F4D\u7F6E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"outputFileParentAbsoluteDir",showOverflowTooltip:!0},{label:"java\u5305key(\u6E32\u67D3\u540E\u6709\u503C)",prop:"javaPackageKeys",showOverflowTooltip:!0},{label:"\u662F\u5426\u751F\u6210",prop:"isGenerated"},{label:"\u751F\u6210\u7C7B\u578B",prop:"generateTypeDictName"},{label:"\u5F15\u7528\u751F\u6210\u540D\u79F0",prop:"refrenceSegmentGenName"},{label:"\u63CF\u8FF0",prop:"remark",showOverflowTooltip:!0}]}),i=g({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:lowcodeSegmentGen:pageQuery"}),p=()=>{f.value.refreshData()},B=({pageQuery:e})=>h({...a.form,...e}),_={permission:i.value.permission},D=({row:e,column:c,$index:b})=>{if(b<0)return[];let o={id:e.id},l={id:e.id,refrenceSegmentGenId:e.refrenceSegmentGenId},u=[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:lowcodeSegmentGen:update",route:{path:"/admin/lowcodeSegmentGenManageUpdate",query:o}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:lowcodeSegmentGen:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return G(o).then(t=>(p(),Promise.resolve(t)))}},{txt:"\u91CD\u65B0\u52A0\u8F7D\u6A21\u578Bjson\u6570\u636E",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:reloadLowcodeModelJson",methodConfirmText:`\u8FD9\u5C06\u4F1A\u8986\u76D6\u5F53\u524D\u7684\u6A21\u578Bjson\u6570\u636E\uFF0C\u786E\u5B9A\u8981\u91CD\u65B0\u52A0\u8F7D ${e.name} \u5417\uFF1F`,method(){return v(o).then(t=>(p(),Promise.resolve(t)))}}];const s=F(e.generateTypeDictValue,["backend_module","frontend_module","backend_and_frontend_module"]);s&&u.push({txt:"\u6A21\u5757\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModuleDesignAndGenerate",query:o}});const m=F(e.generateTypeDictValue,["backend_model_service","frontend_model_service","backend_and_frontend_model_service"]);return m&&u.push({txt:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",beforeMethod:()=>e.lowcodeModelId>0?!0:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u4E0E\u6E32\u67D3\u9700\u8981\u8BBE\u7F6E\u6A21\u578B",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModelServiceDesignAndGenerate",query:l}}),!s&&!m&&u.push({txt:"\u901A\u7528\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenGenericDesignAndGenerate",query:l}}),u};return(e,c)=>{const b=n("PtButton"),o=n("PtForm"),l=n("PtButtonGroup"),u=n("el-table-column"),s=n("PtTable"),m=n("PtRouteViewPopover");return x(),S(T,null,[r(o,{form:a.form,method:p,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:a.formComps},{buttons:d(()=>[r(b,{permission:"admin:web:lowcodeSegmentGen:create",route:"/admin/lowcodeSegmentGenManageAdd"},{default:d(()=>[P("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(s,{ref_key:"tableRef",ref:f,"default-expand-all":"",dataMethod:B,onDataMethodDataLoading:c[0]||(c[0]=t=>i.value.loading=t),dataMethodResultHandleConvertToTree:!0,paginationProps:_,columns:a.tableColumns},{defaultAppend:d(()=>[r(u,{label:"\u64CD\u4F5C",width:"220"},{default:d(({row:t,column:A,$index:E})=>[r(l,{options:D({row:t,column:A,$index:E}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(m,{level:3})],64)}}});export{J as default};
