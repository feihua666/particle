import{u as B,p as h}from"./lowcodeModelItemAdminApi.b64d5380.js";import{l as _}from"./lowcodeModelAdminApi.0a114cb0.js";import{d as C,r as w,a as T,b as m,o as I,c as R,e as p,F as y}from"./index.90b05f11.js";const v=C({name:"LowcodeModelItemDesignManagePage"}),N=C({...v,props:{lowcodeModelId:{type:String}},setup(A){const f=A,F=w(null),E=(u,o,l)=>({is:"PtSwitch",modelValue:u.row[o],method:r=>(u.row[o]=r,B(u.row).then(t=>(u.row.version++,Promise.resolve(t)))),methodSuccess:"\u4FEE\u6539\u6210\u529F"}),e=(u,o,l,r,t=[])=>{u.row.designJsonObj||(u.row.designJsonObj=JSON.parse(u.row.designJson));let s=u.row.designJsonObj,c=s.jsonItemMap,d=c[o];return{is:"PtSwitch",modelValue:d[l],method:b=>(d[l]=b,t&&t.forEach(i=>{c[i][l]=b}),u.row.designJson=JSON.stringify(s),B(u.row).then(i=>(u.row.version++,Promise.resolve(i)))),methodSuccess:"\u4FEE\u6539\u6210\u529F"}},n=T({form:{},formComps:[{field:{name:"columnName"},element:{comp:"el-input",formItemProps:{label:"\u5B57\u6BB5\u540D\u79F0"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D"}}},{field:{name:"propertyName"},element:{comp:"el-input",formItemProps:{label:"\u5B9E\u4F53\u5C5E\u6027\u540D\u79F0"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D"}}},{field:{name:"lowcodeModelId",value:f.lowcodeModelId},element:{comp:"PtSelect",formItemProps:{label:"\u6A21\u578B"},compProps:{dataMethod:_}}}],tableColumns:[{label:"\u5B57\u6BB5\u540D\u79F0",prop:"columnName",fixed:!0},{label:"\u5B9E\u4F53\u5C5E\u6027\u540D\u79F0",prop:"propertyName"},{label:"\u5B57\u6BB5\u7C7B\u578B",prop:"jdbcType"},{label:"\u5B9E\u4F53\u5C5E\u6027\u7C7B\u578B",prop:"propertyType"},{label:"\u5B9E\u4F53\u5C5E\u6027\u7C7B\u578B\u5168\u8DEF\u5F84",prop:"propertyFullType",showOverflowTooltip:!0},{label:"\u5168\u6CE8\u91CA",prop:"commentFull",showOverflowTooltip:!0},{label:"\u7B80\u6D01\u6CE8\u91CA",prop:"commentSimple",showOverflowTooltip:!0},{label:"\u54CD\u5E94\u5B9E\u4F53",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"VO","isUse","\u662F\u5426\u4F7F\u7528",["UPDATE"])},{label:"\u662F\u5426\u7FFB\u8BD1\u5B57\u5178",columnView:u=>e(u,"VO","isTransDictId")}]},{label:"\u6DFB\u52A0",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"CREATE","isUse","\u662F\u5426\u4F7F\u7528",["UPDATE"])},{label:"\u662F\u5426\u5FC5\u586B",columnView:u=>e(u,"CREATE","isRequired","\u662F\u5426\u5FC5\u586B",["UPDATE"])}]},{label:"\u4FEE\u6539(\u8054\u52A8\u6DFB\u52A0)",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"UPDATE","isUse")},{label:"\u662F\u5426\u5FC5\u586B",columnView:u=>e(u,"UPDATE","isRequired")}]},{label:"\u5217\u8868\u67E5\u8BE2",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"QUERY_LIST","isUse","\u662F\u5426\u4F7F\u7528",["QUERY_PAGE"])},{label:"\u662F\u5426\u5FC5\u586B",columnView:u=>e(u,"QUERY_LIST","isRequired","\u662F\u5426\u5FC5\u586B",["QUERY_PAGE"])},{label:"\u5DE6\u6A21\u7CCA\u67E5\u8BE2",columnView:u=>e(u,"QUERY_LIST","isUseLike","\u5DE6\u6A21\u7CCA\u67E5\u8BE2",["QUERY_PAGE"])}]},{label:"\u5206\u9875\u5217\u8868\u67E5\u8BE2(\u8054\u52A8\u5217\u8868\u67E5\u8BE2)",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"QUERY_PAGE","isUse")},{label:"\u662F\u5426\u5FC5\u586B",columnView:u=>e(u,"QUERY_PAGE","isRequired")},{label:"\u5DE6\u6A21\u7CCA\u67E5\u8BE2",columnView:u=>e(u,"QUERY_PAGE","isUseLike")}]},{label:"\u6570\u636E\u5B9E\u4F53",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"DO","isUse","\u662F\u5426\u4F7F\u7528",["DOMAIN"])}]},{label:"\u9886\u57DF\u6A21\u578B(\u8054\u52A8\u6570\u636E\u5B9E\u4F53)",nestColumns:[{label:"\u662F\u5426\u4F7F\u7528",columnView:u=>e(u,"DOMAIN","isUse")}]},{label:"\u9ED8\u8BA4\u503C",prop:"defaultValue"},{label:"\u662F\u5426\u552F\u4E00",prop:"isUnique",columnView:u=>E(u,"isUnique")},{label:"\u662F\u5426\u5FC5\u586B",prop:"isRequired"},{label:"\u662F\u5426\u4E3B\u952E",prop:"isKey"},{label:"\u662F\u5426\u4E3B\u952E\u81EA\u589E",prop:"isKeyIdentity"},{label:"\u662F\u5426\u5173\u952E\u5B57",prop:"isKeyWord"},{label:"\u957F\u5EA6",prop:"columnLength"},{label:"\u5C0F\u6570\u4F4D\u957F\u5EA6",prop:"fractionLength"},{label:"\u662F\u5426\u5916\u952E",prop:"isForeignKey",columnView:u=>E(u,"isForeignKey")},{label:"\u6A21\u578B",prop:"lowcodeModelName"},{label:"\u8BBE\u8BA1\u6570\u636E",prop:"designJson",showOverflowTooltip:!0},{label:"\u63CF\u8FF0",prop:"remark"}]}),a=w({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:lowcodeModelItem:pageQuery"}),D=()=>{F.value.refreshData()},P=({pageQuery:u})=>h({...n.form,...u}),g={permission:a.value.permission},V=[7,8,11,12,16,17,18,20],U=({row:u,column:o,rowIndex:l,columnIndex:r})=>V.indexOf(r)>=0?{background:"#F2F3F5"}:{};return(u,o)=>{const l=m("PtForm"),r=m("PtTable"),t=m("PtRouteViewPopover");return I(),R(y,null,[p(l,{form:n.form,method:D,defaultButtonsShow:"submit,reset",submitAttrs:a.value,inline:"",comps:n.formComps},null,8,["form","submitAttrs","comps"]),p(r,{ref_key:"tableRef",ref:F,"default-expand-all":"",cellStyle:U,dataMethod:P,onDataMethodDataLoading:o[0]||(o[0]=s=>a.value.loading=s),paginationProps:g,columns:n.tableColumns},null,8,["columns"]),p(t,{level:3})],64)}}});export{N as default};
