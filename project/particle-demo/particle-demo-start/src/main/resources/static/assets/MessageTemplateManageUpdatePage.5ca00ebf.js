import{b as h,d as y,e as C}from"./messageTemplateManage.e46bb89d.js";import{d as p,r as a,a as P,b as l,o as T,c as S,e as u,w as r,i as A,f as N,F as V,aX as c}from"./index.9f9cf4f4.js";import{_ as w}from"./MessageTemplateContentDetailJson.vue_vue_type_style_index_0_lang.183d1545.js";import"./treeQueryComps.5854cd36.js";const O=p({name:"AreaManageUpdatePage"}),U=p({...O,props:{messageTemplateId:{type:String}},setup(d){const i=d,e=a(!1),m=a(null),n=P({form:{id:i.messageTemplateId,version:1},formData:{}}),f=a(h({contentDetailJsonDialogVisible:e})),D=a({buttonText:"\u786E\u8BA4\u4FEE\u6539",permission:"admin:web:messageTemplate:update"}),_=()=>y,b=()=>C({id:i.messageTemplateId}).then(t=>{let o=t.data.data.contentDetailJson;return o&&(s.value=JSON.parse(o)),Promise.resolve(t)}),J=()=>"\u4FEE\u6539\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u6570\u636E\u67E5\u770B",s=a({}),v=()=>{let t=m.value.getContentDetailJsonData();if(c(t)||c(t.contentDetails)){n.form.contentDetailJson="",s.value={},e.value=!1;return}n.form.contentDetailJson=JSON.stringify(t),s.value=JSON.parse(JSON.stringify(t)),e.value=!1};return(t,o)=>{const g=l("PtForm"),B=l("PtButton"),E=l("el-dialog");return T(),S(V,null,[u(g,{form:n.form,formData:n.formData,labelWidth:"80",dataMethod:b,method:_(),methodSuccess:J,defaultButtonsShow:"submit,reset",submitAttrs:D.value,buttonsTeleportProps:t.$route.meta.formButtonsTeleportProps,inline:"",layout:[3,1,1,1,1,2,2,2,2,1],comps:f.value},null,8,["form","formData","method","submitAttrs","buttonsTeleportProps","comps"]),u(E,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=F=>e.value=F),width:"70%",title:"\u4E2A\u6027\u5316\u5185\u5BB9\u8BE6\u60C5\u914D\u7F6E","append-to-body":"","destroy-on-close":""},{footer:r(()=>[A("span",null,[u(B,{type:"primary",onClick:v},{default:r(()=>[N("\u786E\u8BA4")]),_:1})])]),default:r(()=>[u(w,{ref_key:"contentDetailJsonRef",ref:m,initContentDetailJsonData:s.value},null,8,["initContentDetailJsonData"])]),_:1},8,["modelValue"])],64)}}});export{U as default};
