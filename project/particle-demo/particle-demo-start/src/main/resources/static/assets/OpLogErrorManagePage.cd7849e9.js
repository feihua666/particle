import{g as F,d as w,r as f,a as g,b as o,o as I,c as _,e as u,w as b,F as T}from"./index.00897985.js";let P="/admin/web/op_log_error";const O=t=>F.delete(P+"/delete",{data:t}),A=t=>F.get(P+"/page",{params:t}),x=[{field:{name:"traceId"},element:{comp:"el-input",formItemProps:{label:"traceId"},compProps:{}}},{field:{name:"userId"},element:{comp:"el-input",formItemProps:{label:"\u64CD\u4F5C\u7528\u6237id"},compProps:{}}},{field:{name:"userName"},element:{comp:"el-input",formItemProps:{label:"\u64CD\u4F5C\u7528\u6237\u59D3\u540D"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D"}}},{field:{name:"userNickname"},element:{comp:"el-input",formItemProps:{label:"\u64CD\u4F5C\u7528\u6237\u6635\u79F0"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D"}}},{field:{name:"requestUrl"},element:{comp:"el-input",formItemProps:{label:"\u8BF7\u6C42\u5730\u5740"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D"}}},{field:{name:"requestMethod"},element:{comp:"el-input",formItemProps:{label:"\u8BF7\u6C42\u65B9\u6CD5"},compProps:{clearable:!0}}},{field:{name:"requestIp"},element:{comp:"el-input",formItemProps:{label:"\u8BF7\u6C42ip"},compProps:{clearable:!0}}},{field:{name:"responseStatus"},element:{comp:"el-input",formItemProps:{label:"\u54CD\u5E94\u7684\u72B6\u6001\u7801"},compProps:{clearable:!0}}},{field:{name:"localHostIp"},element:{comp:"el-input",formItemProps:{label:"\u672C\u5730\u4E3B\u673Aip"},compProps:{clearable:!0}}},{field:{name:"localHostName"},element:{comp:"el-input",formItemProps:{label:"\u672C\u5730\u4E3B\u673A\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"errorAtStart"},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F02\u5E38\u53D1\u751F\u65F6\u95F4\u5F00\u59CB"},compProps:{type:"datetime"}}},{field:{name:"errorAtEnd"},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F02\u5E38\u53D1\u751F\u65F6\u95F4\u7ED3\u675F"},compProps:{type:"datetime"}}}],q=w({name:"OpLogErrorManagePage"}),k=w({...q,setup(t){const m=f(null),r=g({form:{},formComps:x,tableColumns:[{prop:"traceId",label:"traceId",showOverflowTooltip:!0},{prop:"userId",label:"\u7528\u6237id",showOverflowTooltip:!0},{prop:"userName",label:"\u7528\u6237\u59D3\u540D",showOverflowTooltip:!0},{prop:"userNickname",label:"\u7528\u6237\u6635\u79F0",showOverflowTooltip:!0},{prop:"userAvatar",label:"\u7528\u6237\u5934\u50CF",showOverflowTooltip:!0},{prop:"requestUrl",label:"\u8BF7\u6C42\u5730\u5740",showOverflowTooltip:!0},{prop:"requestMethod",label:"\u8BF7\u6C42\u65B9\u6CD5",showOverflowTooltip:!0},{prop:"requestHeaders",label:"\u8BF7\u6C42\u5934\u4FE1\u606F",showOverflowTooltip:!0},{prop:"requestParams",label:"\u8BF7\u6C42\u53C2\u6570",showOverflowTooltip:!0},{prop:"requestBody",label:"\u8BF7\u6C42\u5185\u5BB9",showOverflowTooltip:!0},{prop:"requestIp",label:"\u8BF7\u6C42ip",showOverflowTooltip:!0},{prop:"responseStatus",label:"\u54CD\u5E94\u72B6\u6001\u7801",showOverflowTooltip:!0},{prop:"responseHeaders",label:"\u54CD\u5E94\u5934\u4FE1\u606F",showOverflowTooltip:!0},{prop:"responseBody",label:"\u54CD\u5E94\u5185\u5BB9",showOverflowTooltip:!0},{prop:"localHostIp",label:"\u672C\u5730\u4E3B\u673Aip",showOverflowTooltip:!0},{prop:"localHostName",label:"\u672C\u5730\u4E3B\u673A\u540D\u79F0",showOverflowTooltip:!0},{prop:"errorAt",label:"\u5F02\u5E38\u53D1\u751F\u65F6\u95F4",showOverflowTooltip:!0}]}),l=f({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:opLogError:pageQuery"}),i=()=>{m.value.refreshData()},C=({pageQuery:e})=>A({...r.form,...e}),B={permission:l.value.permission},D=({row:e,column:p,$index:a})=>a<0?[]:[{txt:"\u67E5\u770B\u5F02\u5E38\u5185\u5BB9",text:!0,permission:"admin:web:opLogError:viewContent",route:{path:"/admin/OpLogErrorContentViewPage",query:{id:e.id}}},{txt:"\u5220\u9664",text:!0,position:"more",permission:"admin:web:opLogError:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 traceId=${e.traceId} \u7684\u5F02\u5E38\u6570\u636E\u5417\uFF1F`,method(){return O({id:e.id}).then(s=>(i(),Promise.resolve(s)))}}];return(e,p)=>{const a=o("PtForm"),c=o("PtButtonGroup"),d=o("el-table-column"),s=o("PtTable"),h=o("PtRouteViewPopover");return I(),_(T,null,[u(a,{form:r.form,method:i,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:r.formComps},null,8,["form","submitAttrs","comps"]),u(s,{ref_key:"tableRef",ref:m,"default-expand-all":"",dataMethod:C,onDataMethodDataLoading:p[0]||(p[0]=n=>l.value.loading=n),paginationProps:B,columns:r.tableColumns},{defaultAppend:b(()=>[u(d,{label:"\u64CD\u4F5C",width:"200"},{default:b(({row:n,column:E,$index:v})=>[u(c,{options:D({row:n,column:E,$index:v}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),u(h,{level:3})],64)}}});export{k as default};
