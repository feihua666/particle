import{p as T,a as x,r as B}from"./areaManage-D-0FSXPd.js";import{d as A,r as c,a as C,b as t,o as M,c as O,e as o,w as l,f as R,F as D}from"./index-BGwvwH0Y.js";import"./treeQueryComps-CWIG2rsy.js";const V=A({__name:"AreaManagePage",setup(F){const u=c(null),r=C({form:{},formComps:T,tableColumns:[{prop:"name",label:"名称",width:150,showOverflowTooltip:!0},{prop:"code",label:"编码",showOverflowTooltip:!0},{prop:"nameSimple",label:"简称"},{prop:"spellFirst",label:"首字母",width:70},{prop:"spellSimple",label:"简拼",width:60,showOverflowTooltip:!0},{prop:"spell",label:"全拼",showOverflowTooltip:!0},{prop:"parentName",label:"父级"},{prop:"typeDictName",label:"类型",width:60},{prop:"longitude",label:"经度",showOverflowTooltip:!0},{prop:"latitude",label:"纬度",showOverflowTooltip:!0},{prop:"seq",label:"排序",width:60},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),s=c({buttonText:"查询",loading:!1,permission:"admin:web:area:pageQuery"}),d=()=>{u.value.refreshData()},f=({pageQuery:e})=>x({...r.form,...e}),w={permission:s.value.permission},h=({row:e,column:a,$index:p})=>{if(p<0)return[];let n={id:e.id};return[{txt:"添加子级",text:!0,permission:"admin:web:area:create",route:{path:"/admin/areaManageAdd",query:n}},{txt:"编辑",position:"more",text:!0,permission:"admin:web:area:update",route:{path:"/admin/areaManageUpdate",query:n}},{txt:"删除",position:"more",text:!0,permission:"admin:web:area:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return B({id:e.id}).then(i=>(d(),Promise.resolve(i)))}}]};return(e,a)=>{const p=t("PtButton"),n=t("PtForm"),b=t("PtButtonGroup"),i=t("el-table-column"),_=t("PtTable"),v=t("PtRouteViewPopover");return M(),O(D,null,[o(n,{form:r.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:r.formComps},{buttons:l(()=>[o(p,{permission:"admin:web:area:create",route:"/admin/areaManageAdd"},{default:l(()=>a[1]||(a[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(_,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:a[0]||(a[0]=m=>s.value.loading=m),dataMethodResultHandleConvertToTree:!0,paginationProps:w,columns:r.tableColumns},{defaultAppend:l(()=>[o(i,{label:"操作",width:"220"},{default:l(({row:m,column:g,$index:P})=>[o(b,{options:h({row:m,column:g,$index:P}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(v,{level:3})],64)}}});export{V as default};
