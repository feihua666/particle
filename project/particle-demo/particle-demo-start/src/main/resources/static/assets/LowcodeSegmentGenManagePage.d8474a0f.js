import{p as N,r as O,a as I}from"./lowcodeSegmentGenAdminApi.f77e7feb.js";import{d as M,r as S,a as V,b as n,o as q,c as $,e as a,w as s,f as L,F as j,a5 as y}from"./index.499071bc.js";import{p as U}from"./lowcodeSegmentGenManage.309934b5.js";import"./lowcodeSegmentTemplateAdminApi.96ddc7a9.js";import"./lowcodeModelAdminApi.dad628dc.js";const K=M({name:"LowcodeSegmentGenManagePage"}),Z=M({...K,setup(Q){const B=S(null),l=V({form:{},formComps:U,tableColumns:[{label:"\u751F\u6210\u540D\u79F0",prop:"name"},{label:"\u7247\u6BB5\u6A21\u677F\u540D\u79F0",prop:"lowcodeSegmentTemplateName"},{label:"\u6A21\u578B\u540D\u79F0",prop:"lowcodeModelName"},{label:"\u6A21\u578B\u6570\u636E",prop:"lowcodeModelJson",showOverflowTooltip:!0},{label:"\u5168\u5C40\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"globalJson",showOverflowTooltip:!0},{label:"\u6269\u5C55\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"extJson",showOverflowTooltip:!0},{label:"\u8F93\u51FA\u7EDD\u5BF9\u4F4D\u7F6E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"outputFileParentAbsoluteDir",showOverflowTooltip:!0},{label:"java\u5305key(\u6E32\u67D3\u540E\u6709\u503C)",prop:"javaPackageKeys",showOverflowTooltip:!0},{label:"\u662F\u5426\u751F\u6210",prop:"isGenerated"},{label:"\u751F\u6210\u7C7B\u578B",prop:"generateTypeDictName"},{label:"\u5F15\u7528\u751F\u6210\u540D\u79F0",prop:"refrenceSegmentGenName"},{label:"\u63CF\u8FF0",prop:"remark",showOverflowTooltip:!0}]}),p=S({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:lowcodeSegmentGen:pageQuery"}),c=()=>{B.value.refreshData()},T=({pageQuery:e})=>N({...l.form,...e}),J={permission:p.value.permission},R=({row:e,column:g,$index:F})=>{var A,w,G,x,C,h,P,v;if(F<0)return[];let r={id:e.id},d={id:e.id,refrenceSegmentGenId:e.refrenceSegmentGenId,isGenerated:e.isGenerated},t=[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:lowcodeSegmentGen:update",route:{path:"/admin/lowcodeSegmentGenManageUpdate",query:r}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:lowcodeSegmentGen:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return O(r).then(_=>(c(),Promise.resolve(_)))}},{txt:"\u91CD\u65B0\u52A0\u8F7D\u6A21\u578Bjson\u6570\u636E",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:reloadLowcodeModelJson",methodConfirmText:`\u8FD9\u5C06\u4F1A\u8986\u76D6\u5F53\u524D\u7684\u6A21\u578Bjson\u6570\u636E\uFF0C\u786E\u5B9A\u8981\u91CD\u65B0\u52A0\u8F7D ${e.name} \u5417\uFF1F`,method(){return I(r).then(_=>(c(),Promise.resolve(_)))}}];const i=y(e.generateTypeDictValue,["backend_module","frontend_module","backend_and_frontend_module"]);i&&t.push({txt:"\u6A21\u5757\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModuleDesignAndGenerate",query:d}});const m=y(e.generateTypeDictValue,["backend_model_service","frontend_model_service","backend_and_frontend_model_service"]);m&&t.push({txt:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",beforeMethod:()=>e.lowcodeModelId>0?!0:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u4E0E\u6E32\u67D3\u9700\u8981\u8BBE\u7F6E\u6A21\u578B",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModelServiceDesignAndGenerate",query:d}}),!i&&!m&&t.push({txt:"\u901A\u7528\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenGenericDesignAndGenerate",query:d}}),e.globalJson;let o=JSON.parse(e.globalJson)||{};e.lowcodeModelJson;let u=JSON.parse(e.lowcodeModelJson)||{},D=o.moduleNamePackage+"_manage",E=e.name.split("_")[0]+"\u7BA1\u7406",b="1",f=o.moduleName;t.push({txt:"\u6DFB\u52A0\u6839\u529F\u80FD\u83DC\u5355",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u6839\u529F\u80FD\u83DC\u5355",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageAdd",query:{code:D,name:E,funcGroupId:b,typeDictId:"21",componentOf:f}}});let k=((A=u.model)==null?void 0:A.nameEn)+"_manage_page";return t.push({txt:"\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageAdd",query:{code:k,name:E,funcGroupId:b,typeDictId:"22",url:`/admin/${(w=u.model)==null?void 0:w.nameEnEntityVar}ManagePage`,componentOf:f}}}),t.push({txt:"\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762CRUD",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762CRUD",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageCrudAdd",query:{codePrefix:((G=u.model)==null?void 0:G.nameEn)+"_manage_page_",namePrefix:E,permissionPrefix:`admin:web:${(x=u.model)==null?void 0:x.nameEnEntityVar}:`,funcGroupId:b,typeDictId:"1605497232817737729",componentOf:f,createExtPermission:`admin${(C=u.model)==null?void 0:C.nameEnEntity}ManageAdd`,updateExtPermission:`admin${(h=u.model)==null?void 0:h.nameEnEntity}ManageUpdate`,queryPageExtPermission:`admin${(P=u.model)==null?void 0:P.nameEnEntity}ManagePage`,isTree:((v=u.model)==null?void 0:v.tableTypeDictValue)=="TREE"}}}),t};return(e,g)=>{const F=n("PtButton"),r=n("PtForm"),d=n("PtButtonGroup"),t=n("el-table-column"),i=n("PtTable"),m=n("PtRouteViewPopover");return q(),$(j,null,[a(r,{form:l.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",comps:l.formComps},{buttons:s(()=>[a(F,{permission:"admin:web:lowcodeSegmentGen:create",route:"/admin/lowcodeSegmentGenManageAdd"},{default:s(()=>[L("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(i,{ref_key:"tableRef",ref:B,"default-expand-all":"",dataMethod:T,onDataMethodDataLoading:g[0]||(g[0]=o=>p.value.loading=o),paginationProps:J,columns:l.tableColumns},{defaultAppend:s(()=>[a(t,{label:"\u64CD\u4F5C",width:"220"},{default:s(({row:o,column:u,$index:D})=>[a(d,{options:R({row:o,column:u,$index:D}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(m,{level:3})],64)}}});export{Z as default};
