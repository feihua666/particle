import{p as D,t as R,a as C,r as v}from"./openplatformOpenapiBatchQueryRecordAdminApi.e71dcf79.js";import{d as _,r as B,a as y,b as a,o as w,c as O,e as n,w as h,F as E,b1 as Q,b2 as T}from"./index.853052ed.js";import{e as A,d as I}from"./FileTools.94b84ff7.js";import"./openplatformAppCompItem.92b3825d.js";import"./openplatformAppAdminApi.3351d284.js";import"./openplatformOpenapiCompItem.2376526c.js";import"./crmCompItem.3e42abed.js";import"./crmCustomerTagAdminApi.b8fd5960.js";const V=_({name:"OpenplatformOpenapiBatchQueryRecordManagePage"}),$=_({...V,setup(M){const c=B(null),r=y({form:{},formComps:D,tableColumns:R}),u=B({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:openplatformOpenapiBatchQueryRecord:pageQuery"}),f=()=>{c.value.refreshData()},x=({pageQuery:e})=>C({...r.form,...e}),g={permission:u.value.permission},F=({row:e,column:l,$index:s})=>{if(s<0)return[];e.id;let i={openplatformOpenapiBatchQueryRecordId:e.id};return[{txt:"\u4E0B\u8F7D",text:!0,disabled:e.executeStatusDictValue!="finished",disabledReason:e.executeStatusDictValue!="finished"?"\u6267\u884C\u5B8C\u6210\u540E\u624D\u53EF\u80FD\u4E0B\u8F7D":void 0,method(){let t=Q(e.exportFileUrl),p=t.substring(t.lastIndexOf("/")+1);return T(t).then(o=>{let m=o.data,d=A(o),P=decodeURIComponent(p);return I(m,d,P),Promise.resolve(o)})}},{txt:"\u67E5\u770B\u8BE6\u60C5",text:!0,position:"more",permission:"admin:web:openplatformOpenapiBatchQueryRecordDetail:pageQuery",route:{path:"/admin/openplatformOpenapiBatchQueryRecordDetail",query:i}},{txt:"\u5220\u9664",text:!0,position:"more",permission:"admin:web:openplatformOpenapiBatchQueryRecord:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return v({id:e.id}).then(t=>(f(),Promise.resolve(t)))}}]};return(e,l)=>{const s=a("PtForm"),i=a("PtButtonGroup"),b=a("el-table-column"),t=a("PtTable"),p=a("PtRouteViewPopover");return w(),O(E,null,[n(s,{form:r.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"",labelWidth:"80",comps:r.formComps},null,8,["form","submitAttrs","comps"]),n(t,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:x,onDataMethodDataLoading:l[0]||(l[0]=o=>u.value.loading=o),paginationProps:g,columns:r.tableColumns},{defaultAppend:h(()=>[n(b,{label:"\u64CD\u4F5C",width:"180"},{default:h(({row:o,column:m,$index:d})=>[n(i,{options:F({row:o,column:m,$index:d}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(p,{level:3})],64)}}});export{$ as default};
