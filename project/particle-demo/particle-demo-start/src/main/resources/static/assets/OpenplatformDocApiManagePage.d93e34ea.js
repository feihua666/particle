import{e as C,f as v,g as w}from"./openplatformDocCompItem.026d5ad7.js";import{p as x}from"./openplatformDocApiManage.f2654f0d.js";import{d as F,r as b,a as E,b as n,o as T,c as y,e as a,w as r,f as R,F as k}from"./index.7013aad1.js";import"./openplatformDocDirNameAdminApi.ed1fbee6.js";import"./openplatformDocApiDocTemplateAdminApi.d13ccf76.js";function M(s,u){const e=document.createElement("a");e.href=s,e.style.display="none",e.setAttribute("target","_blank"),u&&e.setAttribute("download",u),document.body.appendChild(e),e.click(),document.body.removeChild(e)}const O=F({name:"OpenplatformDocApiManagePage"}),S=F({...O,setup(s){const u=b(null),e=E({form:{},formComps:x,tableColumns:[{prop:"code",label:"\u7F16\u7801"},{prop:"name",label:"\u540D\u79F0"},{prop:"nameSimple",label:"\u7B80\u79F0"},{prop:"logoUrl",label:"\u56FE\u6807",columnView:"image"},{prop:"pricePerTime",label:"\u6BCF\u6B21\u4EF7\u683C(\u5143)"},{prop:"pricePerTimeDesc",label:"\u4EF7\u683C\u6587\u672C",showOverflowTooltip:!0},{prop:"description",label:"\u63CF\u8FF0",showOverflowTooltip:!0},{prop:"seq",label:"\u6392\u5E8F"}]}),l=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:openplatformDocApi:pageQuery"}),d=()=>{u.value.refreshData()},_=({pageQuery:t})=>C({...e.form,...t}),A={permission:l.value.permission},D=({row:t,column:p,$index:m})=>m<0?[]:[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:openplatformDocApi:update",route:{path:"/admin/OpenplatformDocApiManageUpdate",query:{id:t.id}}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:openplatformDocApi:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return v({id:t.id}).then(o=>(d(),Promise.resolve(o)))}},{txt:"\u4E0B\u8F7D\u63A5\u53E3\u6587\u6863",text:!0,permission:"openplatform:doc:download",methodConfirmText:`\u786E\u5B9A\u8981\u4E0B\u8F7D ${t.name} \u63A5\u53E3\u6587\u6863\u5417\uFF1F`,method(){return w({openplatformDocApiId:t.id,convertToPdf:!0}).then(o=>(M(o.data.data.url,t.name+".pdf"),Promise.resolve(o)))}}];return(t,p)=>{const m=n("PtButton"),c=n("PtForm"),f=n("PtButtonGroup"),o=n("el-table-column"),P=n("PtTable"),B=n("PtRouteViewPopover");return T(),y(k,null,[a(c,{form:e.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:e.formComps},{buttons:r(()=>[a(m,{permission:"admin:web:openplatformDocApi:create",route:"/admin/OpenplatformDocApiManageAdd"},{default:r(()=>[R("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(P,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:p[0]||(p[0]=i=>l.value.loading=i),paginationProps:A,columns:e.tableColumns},{defaultAppend:r(()=>[a(o,{label:"\u64CD\u4F5C",width:"180"},{default:r(({row:i,column:g,$index:h})=>[a(f,{options:D({row:i,column:g,$index:h})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(B,{level:3})],64)}}});export{S as default};
