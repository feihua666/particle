import{p as D,t as R,a as C,r as v}from"./openplatformOpenapiBatchQueryRecordAdminApi.58abf989.js";import{d as h,r as B,a as y,b as a,o as w,c as E,e as n,w as _,F as O,b1 as Q,b2 as T}from"./index.11decc6c.js";import{e as A,d as I}from"./FileTools.94b84ff7.js";import"./openplatformAppCompItem.be0de8d6.js";import"./openplatformAppAdminApi.026ff6b6.js";import"./openplatformOpenapiCompItem.0af8d292.js";import"./crmCompItem.f6820528.js";import"./crmCustomerTagAdminApi.837659c1.js";const V=h({name:"OpenplatformOpenapiBatchQueryRecordManagePage"}),j=h({...V,setup(M){const c=B(null),r=y({form:{},formComps:D,tableColumns:R}),u=B({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:openplatformOpenapiBatchQueryRecord:pageQuery"}),f=()=>{c.value.refreshData()},x=({pageQuery:e})=>C({...r.form,...e}),F={permission:u.value.permission},P=({row:e,column:l,$index:s})=>{if(s<0)return[];e.id;let p={openplatformOpenapiBatchQueryRecordId:e.id};return[{txt:"\u4E0B\u8F7D",text:!0,disabled:e.executeStatusDictValue!="finished",disabledReason:e.executeStatusDictValue!="finished"?"\u6267\u884C\u5B8C\u6210\u540E\u624D\u53EF\u80FD\u4E0B\u8F7D":void 0,method(){let t=Q(e.exportFileUrl),i=t.substring(t.lastIndexOf("/")+1);return T(t).then(o=>{let m=o.data,d=A(o),g=decodeURIComponent(i);return I(m,d,g),Promise.resolve(o)})}},{txt:"\u67E5\u770B\u8BE6\u60C5",text:!0,permission:"admin:web:openplatformOpenapiBatchQueryRecordDetail:pageQuery",route:{path:"/admin/openplatformOpenapiBatchQueryRecordDetail",query:p}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:openplatformOpenapiBatchQueryRecord:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return v({id:e.id}).then(t=>(f(),Promise.resolve(t)))}}]};return(e,l)=>{const s=a("PtForm"),p=a("PtButtonGroup"),b=a("el-table-column"),t=a("PtTable"),i=a("PtRouteViewPopover");return w(),E(O,null,[n(s,{form:r.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"",comps:r.formComps},null,8,["form","submitAttrs","comps"]),n(t,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:x,onDataMethodDataLoading:l[0]||(l[0]=o=>u.value.loading=o),paginationProps:F,columns:r.tableColumns},{defaultAppend:_(()=>[n(b,{label:"\u64CD\u4F5C",width:"230"},{default:_(({row:o,column:m,$index:d})=>[n(p,{options:P({row:o,column:m,$index:d})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(i,{level:3})],64)}}});export{j as default};
