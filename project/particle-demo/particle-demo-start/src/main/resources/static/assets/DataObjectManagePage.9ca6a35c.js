import{p as P,r as g}from"./dataObjectAdminApi.9db23c46.js";import{p as h}from"./dataObjectManage.df011f01.js";import{d as f,r as b,a as v,b as u,o as x,c as C,e as a,w as l,f as O,F as T}from"./index.bca9bc8b.js";const R=f({name:"DataObjectManagePage"}),N=f({...R,setup(j){const d=b(null),r=v({form:{},formComps:h,tableColumns:[{prop:"code",label:"\u7F16\u7801"},{prop:"name",label:"\u540D\u79F0"},{prop:"customDataUrl",label:"\u81EA\u5B9A\u4E49\u6570\u636Eurl",showOverflowTooltip:!0},{prop:"isCustomDataLazy",label:"\u81EA\u5B9A\u4E49\u6570\u636E\u662F\u5426\u61D2\u52A0\u8F7D",formatter:(t,n,e,s)=>e?"\u61D2\u52A0\u8F7D":"\u4E00\u6B21\u6027\u6570\u636E"},{prop:"customDataTypeDictName",label:"\u81EA\u5B9A\u4E49\u6570\u636E\u4EA4\u4E92\u65B9\u5F0F"},{prop:"customDataConfigJson",label:"\u6570\u636E\u4EA4\u4E92\u65B9\u5F0F\u5185\u5BB9",showOverflowTooltip:!0},{prop:"isDisabled",label:"\u662F\u5426\u7981\u7528",width:80,formatter:(t,n,e,s)=>{let o=e?"\u7981\u7528":"\u542F\u7528";return e&&t.disabledReason&&(o=o+`(${t.disabledReason})`),o}},{prop:"remark",label:"\u63CF\u8FF0",showOverflowTooltip:!0}]}),m=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:dataObject:pageQuery"}),c=()=>{d.value.refreshData()},_=({pageQuery:t})=>P({...r.form,...t}),F={permission:m.value.permission},D=({row:t,column:n,$index:e})=>e<0?[]:[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:dataObject:update",route:{path:"/admin/DataObjectManageUpdate",query:{id:t.id}}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:dataObject:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return g({id:t.id}).then(i=>(c(),Promise.resolve(i)))}}];return(t,n)=>{const e=u("PtButton"),s=u("PtForm"),o=u("PtButtonGroup"),i=u("el-table-column"),B=u("PtTable"),E=u("PtRouteViewPopover");return x(),C(T,null,[a(s,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:r.formComps},{buttons:l(()=>[a(e,{permission:"admin:web:dataObject:create",route:"/admin/DataObjectManageAdd"},{default:l(()=>[O("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(B,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:n[0]||(n[0]=p=>m.value.loading=p),paginationProps:F,columns:r.tableColumns},{defaultAppend:l(()=>[a(i,{label:"\u64CD\u4F5C",width:"180"},{default:l(({row:p,column:w,$index:A})=>[a(o,{options:D({row:p,column:w,$index:A})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(E,{level:3})],64)}}});export{N as default};
