import{u as C,p as A,r as D}from"./tenantUserManage.46f7196f.js";import{d as f,r as b,a as h,b as n,o as w,c as R,e as a,w as l,f as T,F as U}from"./index.661e0f85.js";const E=f({name:"TenantUserManagePage"}),N=f({...E,setup(M){const d=b(null),r=h({form:{},formComps:C({props:{}}),tableColumns:[{prop:"nickname",label:"\u6635\u79F0",showOverflowTooltip:!0},{prop:"name",label:"\u7528\u6237\u59D3\u540D"},{prop:"avatar",label:"\u5934\u50CF",columnView:"image"},{prop:"joinAt",label:"\u52A0\u5165\u65F6\u95F4"},{prop:"isExpired",label:"\u662F\u5426\u8FC7\u671F",formatter:(e,u,o,s)=>{let t=o?"\u5DF2\u8FC7\u671F":"\u6B63\u5E38";return o&&e.expiredReason&&(t=t+`(${e.expiredReason})`),t}},{prop:"expireAt",label:"\u5230\u671F\u65F6\u95F4"},{prop:"isLeave",label:"\u662F\u5426\u79BB\u804C/\u9000\u51FA",formatter:(e,u,o,s)=>{let t=o?"\u79BB\u804C/\u9000\u51FA":"\u6B63\u5E38";return o&&e.leaveReason&&(t=t+`(${e.leaveReason})`),t}},{prop:"leaveAt",label:"\u79BB\u804C/\u9000\u51FA\u65F6\u95F4"},{prop:"tenantName",label:"\u79DF\u6237\u540D\u79F0"}]}),m=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:tenantUser:pageQuery"}),c=()=>{d.value.refreshData()},F=({pageQuery:e})=>A({...r.form,...e}),_={permission:m.value.permission},B=({row:e,column:u,$index:o})=>o<0?[]:[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:tenantUser:update",route:{path:"/admin/TenantUserManageUpdate",query:{id:e.id}}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:tenantUser:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return D({id:e.id}).then(i=>(c(),Promise.resolve(i)))}}];return(e,u)=>{const o=n("PtButton"),s=n("PtForm"),t=n("PtButtonGroup"),i=n("el-table-column"),P=n("PtTable"),v=n("PtRouteViewPopover");return w(),R(U,null,[a(s,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:r.formComps},{buttons:l(()=>[a(o,{permission:"admin:web:tenantUser:create",route:"/admin/TenantUserManageAdd"},{default:l(()=>[T("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(P,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:F,onDataMethodDataLoading:u[0]||(u[0]=p=>m.value.loading=p),paginationProps:_,columns:r.tableColumns},{defaultAppend:l(()=>[a(i,{label:"\u64CD\u4F5C",width:"180"},{default:l(({row:p,column:x,$index:g})=>[a(t,{options:B({row:p,column:x,$index:g})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(v,{level:3})],64)}}});export{N as default};
