import{p as P,r as x}from"./tenantCreateApplyAdminApi-DEa995N2.js";import{p as T}from"./tenantCreateApplyManage-TghlLURD.js";import{d as h,r as w,a as g,b as n,o as D,c as B,e as p,w as m,f as N,F as k}from"./index-BGwvwH0Y.js";import"./userCompItem-BIkuEm_h.js";import"./userAdminApi-mLq-OWKq.js";const I=h({__name:"TenantCreateApplyManagePage",setup(U){const b=w(null),l=g({form:{},formComps:T,tableColumns:[{prop:"name",label:"租户名称",showOverflowTooltip:!0},{prop:"tenantTypeDictName",label:"租户类型"},{prop:"applyUserNickname",label:"申请人"},{prop:"applyUserAvatar",label:"申请人头像",columnView:"image"},{prop:"isFormal",label:"是否正式",formatter:(t,o,e,a)=>e?"正式":"试用"},{prop:"userLimitCount",label:"用户数限制",formatter:(t,o,e,a)=>e||"不限制"},{prop:"effectiveDays",label:"申请天数",formatter:(t,o,e,a)=>e||"不限制"},{prop:"effectiveAt",label:"生效日期",formatter:(t,o,e,a)=>e||"立即生效"},{prop:"expireAt",label:"过期时间",formatter:(t,o,e,a)=>e||"不限制"},{prop:"email",label:"邮箱",showOverflowTooltip:!0},{prop:"userName",label:"姓名",showOverflowTooltip:!0},{prop:"mobile",label:"手机号",showOverflowTooltip:!0},{prop:"auditStatusDictName",label:"审核状态"},{prop:"auditStatusComment",label:"审核意见",showOverflowTooltip:!0},{prop:"auditUserNickname",label:"审核人",showOverflowTooltip:!0},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),u=w({buttonText:"查询",loading:!1,permission:"admin:web:tenantCreateApply:pageQuery"}),c=()=>{b.value.refreshData()},_=({pageQuery:t})=>P({...l.form,...t}),v={permission:u.value.permission},y=({row:t,column:o,$index:e})=>{if(e<0)return[];t.id;let a={id:t.id,applyUserId:t.applyUserId,applyUserNickname:t.applyUserNickname},r=t.auditStatusDictValue=="audit_pass",i={};r&&(i={disabled:!0,disabledReason:"已审核通过不能编辑"});let s=[{txt:"编辑",text:!0,...i,permission:"admin:web:tenantCreateApply:update",route:{path:"/admin/TenantCreateApplyManageUpdate",query:a}},{txt:"删除",text:!0,permission:"admin:web:tenantCreateApply:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return x({id:t.id}).then(d=>(c(),Promise.resolve(d)))}}];return t.auditStatusDictValue=="un_audit"&&s.push({txt:"审核",text:!0,permission:"admin:web:tenantCreateApply:audit",route:{path:"/admin/TenantCreateApplyManageAudit",query:a}}),s};return(t,o)=>{const e=n("PtButton"),a=n("PtForm"),r=n("PtButtonGroup"),i=n("el-table-column"),s=n("PtTable"),d=n("PtRouteViewPopover");return D(),B(k,null,[p(a,{form:l.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"",comps:l.formComps},{buttons:m(()=>[p(e,{permission:"admin:web:tenantCreateApply:create",route:"/admin/TenantCreateApplyManageAdd"},{default:m(()=>o[1]||(o[1]=[N("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),p(s,{ref_key:"tableRef",ref:b,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:o[0]||(o[0]=f=>u.value.loading=f),paginationProps:v,columns:l.tableColumns},{defaultAppend:m(()=>[p(i,{label:"操作",width:"180"},{default:m(({row:f,column:A,$index:C})=>[p(r,{options:y({row:f,column:A,$index:C})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),p(d,{level:3})],64)}}});export{I as default};
