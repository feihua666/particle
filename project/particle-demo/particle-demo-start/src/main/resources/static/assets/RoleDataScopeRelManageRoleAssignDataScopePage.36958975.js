import{q as b,r as I}from"./roleDataScopeRelAdminApi.55b995d5.js";import{r as D,a as S}from"./roleCompItem.d1350387.js";import{l as P}from"./dataScopeAdminApi.4e706e9f.js";import{d as l,a as g,r as d,b as A,o as B,h as R}from"./index.6cdd7c8b.js";import"./roleAdminApi.b918b9e6.js";const _=l({name:"RoleDataScopeRelManageRoleAssignDataScopePage"}),F=l({..._,props:{...D},setup(m){const n=m,s=g({form:{checkedDataScopeIdAgainstDataObjectIds:{}},formData:{}}),c=d([S({props:n,required:!0}),{field:{name:"checkedDataScopeIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"\u6570\u636E\u8303\u56F4",required:!0},compProps:({form:u})=>({dataInitMethod:({param:a})=>{let o=a.roleId;return o?b({id:o}):{data:[]}},dataInitMethodParam:{roleId:u.roleId},dataMethod:({param:a})=>P(a).then(o=>{let t=o.data.data,r=[];for(let e=0;e<t.length;e++)s.form.checkedDataScopeIdAgainstDataObjectIds[t[e].id]=t[e].dataObjectId,t[e].parentId=t[e].dataObjectId,r.some(h=>h.id==t[e].dataObjectId)||r.push({id:t[e].dataObjectId,name:t[e].dataObjectName,isDisabled:!0});for(let e=0;e<r.length;e++)t.push(r[e]);return Promise.resolve(o)}),dataMethodResultHandleConvertToTree:!0,showCheckbox:!0,modelValueIncludeHalfCheckedKeys:!1,modelValueIncludeLeafOnly:!0})}}]),p=d({buttonText:"\u786E\u8BA4",permission:"admin:web:roleDataScopeRel:roleAssignDataScope"}),i=()=>I,f=()=>"\u5206\u914D\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u6570\u636E\u67E5\u770B";return(u,a)=>{const o=A("PtForm");return B(),R(o,{form:s.form,formData:s.formData,labelWidth:"80",method:i(),methodSuccess:f,defaultButtonsShow:"submit,reset",submitAttrs:p.value,buttonsTeleportProps:u.$route.meta.formButtonsTeleportProps,inline:"",layout:1,comps:c.value},null,8,["form","formData","method","submitAttrs","buttonsTeleportProps","comps"])}}});export{F as default};
