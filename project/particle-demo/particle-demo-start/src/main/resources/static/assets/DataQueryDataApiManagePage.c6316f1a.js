import{p as C,a as g,r as h}from"./dataQueryDataApiManage.e58cd4c6.js";import{d as b,r as D,a as v,b as e,o as x,c as T,e as a,w as n,f as w,F as Q}from"./index.147a787d.js";import"./dataQueryDatasourceApiAdminApi.85af4712.js";import"./dataQueryDatasourceApiManage.3f7e4f01.js";import"./dataQueryProviderAdminApi.e48435dc.js";const E=b({name:"DataQueryDataApiManagePage"}),G=b({...E,setup(M){const l=D(null),o=v({form:{},formComps:C,tableColumns:[{prop:"url",label:"\u63A5\u53E3\u5730\u5740"},{prop:"name",label:"\u63A5\u53E3\u540D\u79F0"},{prop:"dataQueryDatasourceApiName",label:"\u76F4\u8FDE\u6570\u636E\u6E90\u63A5\u53E3"},{prop:"adaptTypeDictName",label:"\u9002\u914D\u7C7B\u578B"},{prop:"inParamTypeDictName",label:"\u5165\u53C2\u7C7B\u578B"},{prop:"outParamTypeDictName",label:"\u51FA\u53C2\u7C7B\u578B"},{prop:"responseTypeDictName",label:"\u8F93\u51FA\u7C7B\u578B"},{prop:"remark",label:"\u63CF\u8FF0"}]}),r=D({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:dataQueryDataApi:pageQuery"}),d=()=>{l.value.refreshData()},f=({pageQuery:t})=>g({...o.form,...t}),_={permission:r.value.permission},A=({row:t,column:s,$index:p})=>{if(p<0)return[];let u={id:t.id};return[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:dataQueryDataApi:update",route:{path:"/admin/DataQueryDataApiManageUpdate",query:u}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:dataQueryDataApi:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return h({id:t.id}).then(m=>(d(),Promise.resolve(m)))}},{txt:"\u63A5\u53E3\u6D4B\u8BD5",text:!0,permission:"admin:web:dataQueryDataApi:test",route:{path:"/admin/DataQueryDataApiManageTest",query:u}}]};return(t,s)=>{const p=e("PtButton"),u=e("PtForm"),c=e("PtButtonGroup"),m=e("el-table-column"),B=e("PtTable"),F=e("PtRouteViewPopover");return x(),T(Q,null,[a(u,{form:o.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:r.value,inline:"",comps:o.formComps},{buttons:n(()=>[a(p,{permission:"admin:web:dataQueryDataApi:create",route:"/admin/DataQueryDataApiManageAdd"},{default:n(()=>[w("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(B,{ref_key:"tableRef",ref:l,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:s[0]||(s[0]=i=>r.value.loading=i),dataMethodResultHandleConvertToTree:!0,paginationProps:_,columns:o.tableColumns},{defaultAppend:n(()=>[a(m,{label:"\u64CD\u4F5C",width:"180"},{default:n(({row:i,column:P,$index:y})=>[a(c,{options:A({row:i,column:P,$index:y})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(F,{level:3})],64)}}});export{G as default};
