import{p as g,a as _}from"./roleDataScopeRelAdminApi.5fd91e31.js";import{p as I}from"./roleDataScopeRelManage.5d136b32.js";import{d as b,r as A,a as h,b as o,o as x,c as y,e as u,w as t,f as n,F as N}from"./index.4084dc74.js";import"./roleCompItem.2485a258.js";import"./roleAdminApi.db9b7444.js";import"./dataconstraintCompItem.722b7123.js";import"./dataObjectAdminApi.8cbd2233.js";import"./dataScopeAdminApi.9a517424.js";const P=b({name:"RoleDataScopeRelManagePage"}),j=b({...P,setup(v){const E=A(null),r=h({form:{},formComps:I,tableColumns:[{prop:"roleName",label:"\u89D2\u8272",showOverflowTooltip:!0,width:120},{prop:"dataObjectName",label:"\u6570\u636E\u5BF9\u8C61",showOverflowTooltip:!0,width:120},{prop:"dataScopeName",label:"\u6570\u636E\u8303\u56F4",showOverflowTooltip:!0,width:120}]}),p=A({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:roleDataScopeRel:pageQuery"}),S=()=>{E.value.refreshData()},f=({pageQuery:e})=>g({...r.form,...e}),B={permission:p.value.permission},C=({row:e,column:s,$index:a})=>{if(a<0)return[];let m={id:e.id},d={id:e.id,roleId:e.roleId,roleName:e.roleName},i={dataScopeId:e.dataScopeId,dataScopeName:e.dataScopeName,dataObjectId:e.dataObjectId},c={dataScopeId:e.dataScopeId,dataScopeName:e.dataScopeName},D={roleId:e.roleId,roleName:e.roleName},l={roleId:e.roleId,roleName:e.roleName};return[{txt:"\u4E3A\u8BE5\u6570\u636E\u8303\u56F4\u5206\u914D\u89D2\u8272",text:!0,permission:"admin:web:roleDataScopeRel:dataScopeAssignRole",route:{path:"/admin/roleDataScopeRelManageDataScopeAssignRole",query:i}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u5206\u914D\u6570\u636E\u8303\u56F4",text:!0,permission:"admin:web:roleDataScopeRel:roleAssignDataScope",route:{path:"/admin/roleDataScopeRelManageRoleAssignDataScope",query:D}},{txt:"\u4E3A\u8BE5\u6570\u636E\u8303\u56F4\u6E05\u7A7A\u89D2\u8272",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u6570\u636E\u8303\u56F4 ${e.dataScopeName} \u6240\u6709\u89D2\u8272,\u8BE5\u6570\u636E\u8303\u56F4\u5C06\u4E0D\u518D\u5206\u914D\u7ED9\u4EFB\u4F55\u89D2\u8272\uFF0C\u540C\u65F6\u62E5\u6709\u6D89\u53CA\u5BF9\u5E94\u89D2\u8272\u7684\u7528\u6237\u6570\u636E\u8303\u56F4\u5C06\u53D7\u5230\u5F71\u54CD\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleDataScopeRel:deleteByDataScopeId",route:{path:"/admin/roleDataScopeRelManageDeleteByDataScopeId",query:c}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u6E05\u7A7A\u6570\u636E\u8303\u56F4",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u89D2\u8272 ${e.roleName} \u6240\u6709\u6570\u636E\u8303\u56F4,\u8BE5\u89D2\u8272\u5C06\u4E0D\u518D\u62E5\u6709\u4EFB\u4F55\u6570\u636E\u8303\u56F4\uFF0C\u540C\u65F6\u62E5\u6709\u8BE5\u89D2\u8272\u7684\u7528\u6237\u6570\u636E\u8303\u56F4\u5C06\u53D7\u5230\u5F71\u54CD\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleDataScopeRel:deleteByRoleId",route:{path:"/admin/roleDataScopeRelManageDeleteByRoleId",query:l}},{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:roleDataScopeRel:update",route:{path:"/admin/roleDataScopeRelManageUpdate",query:d}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:roleDataScopeRel:delete",methodConfirmText:`\u5220\u9664\u540E\u89D2\u8272 ${e.roleName} \u5C06\u4E0D\u518D\u62E5\u6709\u6570\u636E\u8303\u56F4 ${e.dataScopeName}\uFF0C\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F`,method(){return _(m).then(F=>(S(),Promise.resolve(F)))}}]};return(e,s)=>{const a=o("PtButton"),m=o("PtForm"),d=o("PtButtonGroup"),i=o("el-table-column"),c=o("PtTable"),D=o("PtRouteViewPopover");return x(),y(N,null,[u(m,{form:r.form,method:S,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",comps:r.formComps},{buttons:t(()=>[u(a,{permission:"admin:web:roleDataScopeRel:create",route:"/admin/RoleDataScopeRelManageAdd"},{default:t(()=>[n("\u6DFB\u52A0")]),_:1}),u(a,{permission:"admin:web:roleDataScopeRel:dataScopeAssignRole",route:"/admin/roleDataScopeRelManageDataScopeAssignRole"},{default:t(()=>[n("\u6570\u636E\u8303\u56F4\u5206\u914D\u89D2\u8272")]),_:1}),u(a,{permission:"admin:web:roleDataScopeRel:roleAssignDataScope",route:"/admin/roleDataScopeRelManageRoleAssignDataScope"},{default:t(()=>[n("\u89D2\u8272\u5206\u914D\u6570\u636E\u8303\u56F4")]),_:1}),u(a,{permission:"admin:web:roleDataScopeRel:deleteByDataScopeId",route:"/admin/roleDataScopeRelManageDeleteByDataScopeId"},{default:t(()=>[n("\u6E05\u7A7A\u6570\u636E\u8303\u56F4\u89D2\u8272")]),_:1}),u(a,{permission:"admin:web:roleDataScopeRel:deleteByRoleId",route:"/admin/roleDataScopeRelManageDeleteByRoleId"},{default:t(()=>[n("\u6E05\u7A7A\u89D2\u8272\u6570\u636E\u8303\u56F4")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),u(c,{ref_key:"tableRef",ref:E,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:s[0]||(s[0]=l=>p.value.loading=l),paginationProps:B,columns:r.tableColumns},{defaultAppend:t(()=>[u(i,{label:"\u64CD\u4F5C"},{default:t(({row:l,column:R,$index:F})=>[u(d,{options:C({row:l,column:R,$index:F})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),u(D,{level:3})],64)}}});export{j as default};
