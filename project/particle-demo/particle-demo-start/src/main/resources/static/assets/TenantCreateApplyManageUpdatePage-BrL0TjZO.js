import{u as J,d as x}from"./tenantCreateApplyAdminApi-BhqWFsYU.js";import{b as D}from"./tenantCreateApplyManage-Cbet2vEo.js";import{d as O,r as a,a as P,b as p,o as N,c as F,e as n,w as i,h as M,f as V,F as w,G as B}from"./index-D8BtRcSm.js";import{_ as T}from"./TenantCreateApplyFuncApplication.vue_vue_type_style_index_0_lang-B0Rtv3o8.js";import"./userCompItem-BbD-YbDP.js";import"./userAdminApi-frgTu-Du.js";import"./funcApplicationAdminApi-BqjalQ2D.js";import"./funcApplicationCompItem-B_bPIWtE.js";const q=O({__name:"TenantCreateApplyManageUpdatePage",props:{applyUserId:{type:String},applyUserNickname:String,tenantCreateApplyId:{type:String}},setup(d){const o=a(!1),u=a(null),r=a({}),m=a(!1),s=d,l=P({form:{id:s.tenantCreateApplyId,version:1,extJsonObj:null},formData:{}}),c=a(D({props:s,funcApplicationDialogVisible:o})),f=a({buttonText:"确认修改",permission:"admin:web:tenantCreateApply:update",beforeMethod:()=>m.value==!0?"当前数据已审核通过不能修改":!0}),b=()=>J,y=()=>x({id:s.tenantCreateApplyId}).then(t=>(t.data.data.extJson&&(t.data.data.extJsonObj=JSON.parse(t.data.data.extJson),r.value=JSON.parse(JSON.stringify(t.data.data.extJsonObj)),m.value=t.data.data.auditStatusDictValue=="audit_pass"),Promise.resolve(t))),S=()=>"修改成功，请刷新数据查看";let g=t=>{B({showClose:!0,message:t,type:"error",showIcon:!0,grouping:!0})};const A=()=>{let t=u.value.getSelectedData();if(t.length==0){g("请至少选择一个应用及对应的功能");return}let e={funcApplications:t};l.form.extJsonObj=e,r.value=JSON.parse(JSON.stringify(e)),o.value=!1};return(t,e)=>{const h=p("PtForm"),v=p("PtButton"),_=p("el-dialog");return N(),F(w,null,[n(h,{form:l.form,formData:l.formData,labelWidth:"80",dataMethod:y,method:b(),methodSuccess:S,defaultButtonsShow:"submit,reset",submitAttrs:f.value,buttonsTeleportProps:t.$route.meta.formButtonsTeleportProps,inline:"",layout:[3,3,2,1],comps:c.value},null,8,["form","formData","method","submitAttrs","buttonsTeleportProps","comps"]),n(_,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=C=>o.value=C),width:"70%",title:"要分配的应用及功能","append-to-body":"","destroy-on-close":""},{footer:i(()=>[M("span",null,[n(v,{type:"primary",onClick:A},{default:i(()=>e[1]||(e[1]=[V("确认")])),_:1})])]),default:i(()=>[n(T,{ref_key:"tenantCreateApplyFuncApplicationRef",ref:u,initSelectedData:r.value.funcApplications},null,8,["initSelectedData"])]),_:1},8,["modelValue"])],64)}}});export{q as default};
