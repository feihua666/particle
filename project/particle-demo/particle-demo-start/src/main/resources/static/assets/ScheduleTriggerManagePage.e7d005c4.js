import{g as c,d as E,r as h,a as C,b as r,o as T,c as x,e as o,w as f,F as v}from"./index.bca9bc8b.js";const N=[{field:{name:"schedulerName"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"schedulerInstanceId"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8Bid"},compProps:{clearable:!0}}},{field:{name:"name"},element:{comp:"el-input",formItemProps:{label:"\u89E6\u53D1\u5668\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"group"},element:{comp:"el-input",formItemProps:{label:"\u89E6\u53D1\u5668\u7EC4"},compProps:{clearable:!0}}}];let d="/admin/web/schedule/trigger";const R=t=>c.post(d+"/pauseTrigger",t),S=t=>c.post(d+"/resumeTrigger",t),M=t=>c.get(d+"/getTriggerList",{params:t}),y=E({name:"ScheduleTriggerManagePage"}),w=E({...y,props:{schedulerName:{type:String},schedulerInstanceId:{type:String}},setup(t){const g=t,b=h(null),l=C({form:{schedulerName:g.schedulerName,schedulerInstanceId:g.schedulerInstanceId},formComps:N,tableColumns:[{prop:"name",label:"\u4EFB\u52A1\u540D\u79F0"},{prop:"group",label:"\u4EFB\u52A1\u7EC4"},{prop:"cronExpression",label:"cronExpression"},{prop:"triggerState",label:"\u72B6\u6001"},{prop:"triggerClassName",label:"\u7C7B\u540D\u79F0",showOverflowTooltip:!0},{prop:"calendarName",label:"\u65E5\u5386\u540D\u79F0"},{prop:"priority",label:"\u4F18\u5148\u7EA7"},{prop:"isMayFireAgain",label:"\u662F\u5426\u53EF\u4EE5\u518D\u6B21\u89E6\u53D1"},{prop:"startAt",label:"\u5F00\u59CB\u4E8E"},{prop:"endAt",label:"\u7ED3\u675F\u4E8E"},{prop:"nextFireAt",label:"\u4E0B\u4E00\u6B21\u89E6\u53D1\u65F6\u95F4"},{prop:"previousFireAt",label:"\u4E0A\u4E00\u6B21\u89E6\u53D1\u65F6\u95F4"},{prop:"finalFireAt",label:"\u6700\u540E\u89E6\u53D1\u65F6\u95F4"},{prop:"misfireInstruction",label:"\u5931\u706B\u8BF4\u660E"},{prop:"description",label:"\u63CF\u8FF0\u4FE1\u606F",showOverflowTooltip:!0}]}),n=h({buttonText:"\u67E5\u8BE2",loading:!1,permission:"schedule:getTriggerList"}),a=()=>{b.value.refreshData()},B=({pageQuery:e})=>M({...l.form,...e}),P={permission:n.value.permission},I=({row:e,column:p,$index:m})=>{if(m<0)return[];e.schedulerName,e.schedulerInstanceId;let s={schedulerName:e.schedulerName,schedulerInstanceId:e.schedulerInstanceId,name:e.name,group:e.group};return e.schedulerName,e.schedulerInstanceId,[{txt:"\u6682\u505C",text:!0,permission:"schedule:trigger:pause",disabled:e.triggerState!="NORMAL",methodConfirmText:`\u786E\u5B9A\u8981\u6682\u505C ${e.name} \u5417\uFF1F`,method(){return R(s).then(u=>(a(),Promise.resolve(u)))}},{txt:"\u6062\u590D",text:!0,permission:"schedule:trigger:resume",disabled:e.triggerState!="PAUSED",methodConfirmText:`\u786E\u5B9A\u8981\u590D\u5236 ${e.name} \u5417\uFF1F`,method(){return S(s).then(u=>(a(),Promise.resolve(u)))}}]};return(e,p)=>{const m=r("PtForm"),s=r("PtButtonGroup"),F=r("el-table-column"),u=r("PtTable"),A=r("PtRouteViewPopover");return T(),x(v,null,[o(m,{form:l.form,method:a,defaultButtonsShow:"submit,reset",submitAttrs:n.value,inline:"",comps:l.formComps},null,8,["form","submitAttrs","comps"]),o(u,{ref_key:"tableRef",ref:b,"default-expand-all":"",dataMethod:B,onDataMethodDataLoading:p[0]||(p[0]=i=>n.value.loading=i),paginationProps:P,columns:l.tableColumns},{defaultAppend:f(()=>[o(F,{label:"\u64CD\u4F5C",width:"180"},{default:f(({row:i,column:D,$index:_})=>[o(s,{options:I({row:i,column:D,$index:_}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(A,{level:3})],64)}}});export{w as default};
