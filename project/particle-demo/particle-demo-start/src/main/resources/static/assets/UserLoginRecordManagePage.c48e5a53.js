import{g as B,d as g,n as x,z as I,r as F,a as w,q as E,A as T,b as r,o as S,c as U,e as n,w as d,F as L}from"./index.147a787d.js";let C="/admin/web/user-login-record";const M=u=>B.delete(C+"/delete",{data:u}),k=u=>B.get(C+"/page",{params:u}),N=g({name:"UserLoginRecordManagePage"}),y=g({...N,props:{...x,...I},setup(u){const c=u,f=F(null),a=w({form:{},formComps:[E({props:c,required:!1}),T({props:c,required:!1,fieldName:"userIdentifierId"}),{field:{name:"deviceId"},element:{comp:"el-input",formItemProps:{label:"\u8BBE\u5907id"},compProps:{}}}],tableColumns:[{prop:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{prop:"userIdentifier",label:"\u767B\u5F55\u6807\u8BC6"},{prop:"loginAt",label:"\u767B\u5F55\u65F6\u95F4"},{prop:"loginIp",label:"\u767B\u5F55ip"},{prop:"deviceId",label:"\u8BBE\u5907id"},{prop:"deviceName",label:"\u8BBE\u5907\u540D\u79F0"},{prop:"operatingSystem",label:"\u64CD\u4F5C\u7CFB\u7EDF\u53CA\u7248\u672C"},{prop:"isSuccess",label:"\u767B\u5F55\u662F\u5426\u6210\u529F(\u5931\u8D25\u539F\u56E0)",width:70,formatter:(e,s,t,l)=>{let o=t?"\u6210\u529F":"\u5931\u8D25";return!t&&e.failedReason&&(o=o+`(${e.failedReason})`),o},showOverflowTooltip:!0},{prop:"traceId",label:"\u8FFD\u8E2Aid"},{prop:"apiCount",label:"api\u6570\u91CF"},{prop:"lastActiveAt",label:"\u6700\u540E\u6D3B\u8DC3\u65F6\u95F4"},{prop:"logoutAt",label:"\u9000\u51FA\u767B\u5F55\u65F6\u95F4"}]}),i=F({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:userLoginRecord:pageQuery"}),b=()=>{f.value.refreshData()},_=({pageQuery:e})=>k({...a.form,...e}),P={permission:i.value.permission},v=({row:e,column:s,$index:t})=>{if(t<0)return[];let l={id:e.id};return e.id,e.identifier,[{txt:"\u5220\u9664",text:!0,permission:"admin:web:userLoginRecord:delete",methodConfirmText:"\u786E\u5B9A\u8981\u5220\u9664 \u767B\u5F55\u8BB0\u5F55 \u5417\uFF1F",method(){return M(l).then(p=>(b(),Promise.resolve(p)))}}]},R={text:!0,buttonText:"\u66F4\u591A"};return(e,s)=>{const t=r("PtForm"),l=r("PtButtonGroup"),o=r("el-table-column"),p=r("PtTable"),A=r("PtRouteViewPopover");return S(),U(L,null,[n(t,{form:a.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",labelWidth:"80",comps:a.formComps},{buttons:d(()=>[]),_:1},8,["form","submitAttrs","comps"]),n(p,{ref_key:"tableRef",ref:f,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:s[0]||(s[0]=m=>i.value.loading=m),dataMethodResultHandleConvertToTree:!0,paginationProps:P,columns:a.tableColumns},{defaultAppend:d(()=>[n(o,{label:"\u64CD\u4F5C"},{default:d(({row:m,column:D,$index:h})=>[n(l,{options:v({row:m,column:D,$index:h}),dropdownTriggerButtonOptions:R},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(A,{level:3})],64)}}});export{y as default};
