import{u as E,H as v,i as R,a as B,b as M,c as _,d as y,e as Y}from"./index.esm.min.20331ea3.js";import{l as q}from"./ssqCodeOpenedAdminApi.e0eebdf0.js";import{d as F,r as d,a as S,af as w,b as N,o as m,c as f,e as k,F as x,T as I,h as O,u as $}from"./index.11decc6c.js";const L=F({name:"SsqCodeOpenedSeqNoTrendPage.vue"}),V=F({...L,setup(T){E([R,B,M,_,y,Y]);const p=d(),l=S({form:{},formComps:[{field:{name:"openedPhaseYearStart",value:new Date().getFullYear()+""},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u5E74\u4EFD\u5F00\u59CB",tips:"\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"openedPhaseYearEnd"},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u5E74\u4EFD\u7ED3\u675F",tips:"\u4E0D\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"computeRegionMin",value:2},element:{comp:"el-input-number",formItemProps:{label:"\u5206\u533A\u6700\u5C0F\u503C",tips:"\u5305\u62EC\u6570\u503C\u672C\u8EAB",required:!0},compProps:{}}},{field:{name:"computeRegionMax",value:200},element:{comp:"el-input-number",formItemProps:{label:"\u5206\u533A\u6700\u5927\u503C",tips:"\u4E0D\u5305\u62EC\u6570\u503C\u672C\u8EAB",required:!0},compProps:{}}},{field:{name:"computeStep",value:200},element:{comp:"el-input-number",formItemProps:{label:"\u5206\u533A\u8BA1\u7B97\u6B65\u957F",required:!0},compProps:{}}}]}),b=d({buttonText:"\u8BA1\u7B97",loading:!1,permission:"admin:web:ssqCodeOpened:queryList"}),g=()=>q(l.form).then(e=>{let t=e.data.data;return A(t),Promise.resolve(e)});w(()=>{});const A=e=>{let t=l.form.computeRegionMin,n=l.form.computeRegionMax,s=l.form.computeStep,i=[];for(let u=t;u<n;u+=s){let o=C(e,u),a=h(o.xAxisData,o.seriesData,u+"");i.push(a)}p.value=i},C=(e,t)=>{let s=17721008/t;s=s.toFixed(1);let i=[],u=[];for(let o=0;o<t;o++){let a=(o+1)*s,r=a-s;a=a.toFixed(1),r=r.toFixed(1),i.push(r+"-"+a),u.push(0)}for(let o=0;o<e.length;o++){let a=e[o].seqNo;for(let r=0;r<t;r++){let c=i[r].split("-"),D=c[0],P=c[1];a>=D&&a<P&&(u[r]=u[r]+1)}}return{xAxisData:i,seriesData:u}},h=(e,t,n)=>({title:{text:n},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},tooltip:{trigger:"axis",show:!0,formatter:"\u4E2A\u6570\uFF1A{c}<br/>\u5E8F\u53F7\u533A\u95F4\uFF1A{b}"},xAxis:{type:"category",data:e,axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{data:t,type:"bar",label:{show:!0,position:"top",formatter:"{c}"}}]});return(e,t)=>{const n=N("PtForm");return m(),f(x,null,[k(n,{form:l.form,method:g,defaultButtonsShow:"submit,reset",submitAttrs:b.value,inline:"",comps:l.formComps},null,8,["form","submitAttrs","comps"]),(m(!0),f(x,null,I(p.value,(s,i)=>(m(),O($(v),{style:{width:"100%",height:"300px"},option:s,autoresize:""},null,8,["option"]))),256))],64)}}});export{V as default};
