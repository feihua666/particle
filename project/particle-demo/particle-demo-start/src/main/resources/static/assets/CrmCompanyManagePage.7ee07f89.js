import{p as y,r as h}from"./crmCompItem.969477f5.js";import{p as v}from"./crmCompanyManage.b7497ecb.js";import{d as C,r as b,a as w,b as t,o as A,c as D,e as o,w as r,f as T,F as E}from"./index.6c1bd566.js";import"./crmCustomerTagAdminApi.fb451cce.js";import"./treeQueryComps.5854cd36.js";const M=C({name:"CrmCompanyManagePage"}),S=C({...M,setup(R){const i=b(null),n=w({form:{},formComps:v,tableColumns:[{prop:"name",label:"\u516C\u53F8\u540D\u79F0"},{prop:"code",label:"\u516C\u53F8\u7F16\u7801"},{prop:"nameSimple",label:"\u516C\u53F8\u7B80\u79F0\u540D\u79F0"},{prop:"parentName",label:"\u7236\u7EA7"},{prop:"seq",label:"\u6392\u5E8F"},{prop:"remark",label:"\u5907\u6CE8"}]}),u=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:crmCompany:pageQuery"}),d=()=>{i.value.refreshData()},f=({pageQuery:e})=>y({...n.form,...e}),_={permission:u.value.permission},F=({row:e,column:m,$index:s})=>{if(s<0)return[];let a={id:e.id};return[{txt:"\u6DFB\u52A0\u5B50\u7EA7",text:!0,permission:"admin:web:crmCompany:create",route:{path:"/admin/CrmCompanyManageAdd",query:a}},{txt:"\u7F16\u8F91",text:!0,position:"more",permission:"admin:web:crmCompany:update",route:{path:"/admin/CrmCompanyManageUpdate",query:a}},{txt:"\u5220\u9664",text:!0,position:"more",permission:"admin:web:crmCompany:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return h({id:e.id}).then(p=>(d(),Promise.resolve(p)))}}]};return(e,m)=>{const s=t("PtButton"),a=t("PtForm"),c=t("PtButtonGroup"),p=t("el-table-column"),g=t("PtTable"),P=t("PtRouteViewPopover");return A(),D(E,null,[o(a,{form:n.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"",comps:n.formComps},{buttons:r(()=>[o(s,{permission:"admin:web:crmCompany:create",route:"/admin/CrmCompanyManageAdd"},{default:r(()=>[T("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(g,{ref_key:"tableRef",ref:i,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:m[0]||(m[0]=l=>u.value.loading=l),dataMethodResultHandleConvertToTree:!0,paginationProps:_,columns:n.tableColumns},{defaultAppend:r(()=>[o(p,{label:"\u64CD\u4F5C",width:"180"},{default:r(({row:l,column:B,$index:x})=>[o(c,{options:F({row:l,column:B,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(P,{level:3})],64)}}});export{S as default};
