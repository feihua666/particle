import{p as y,r as I}from"./roleUserRelAdminApi.155296f9.js";import{d as B,q as P,r as U,a as h,t as x,b as r,o as N,c as v,e as u,w as t,f as s,F as w}from"./index.11decc6c.js";import{r as M,a as k}from"./roleCompItem.c6ae5481.js";import"./roleAdminApi.38ede989.js";const T=B({name:"RoleUserRelUserRelManagePage"}),$=B({...T,props:{...P,...M},setup(E){const D=E,A=U(null),l=h({form:{},formComps:[x({props:D,required:!1}),k({props:D,required:!1})],tableColumns:[{prop:"userNickname",label:"\u7528\u6237\u6635\u79F0",showOverflowTooltip:!0,width:120},{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0",showOverflowTooltip:!0,width:120}]}),n=U({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:roleUserRel:pageQuery"}),f=()=>{A.value.refreshData()},b=({pageQuery:e})=>y({...l.form,...e}),g={permission:n.value.permission},C=({row:e,column:m,$index:o})=>{if(o<0)return[];let i={id:e.id},d={userId:e.userId,userNickname:e.userNickname},p={userId:e.userId,userNickname:e.userNickname},R={roleId:e.roleId,roleName:e.roleName},c={roleId:e.roleId,roleName:e.roleName};return[{txt:"\u4E3A\u8BE5\u7528\u6237\u5206\u914D\u89D2\u8272",text:!0,permission:"admin:web:roleUserRel:userAssignRole",route:{path:"/admin/roleUserRelManageUserAssignRole",query:d}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u5206\u914D\u7528\u6237",text:!0,permission:"admin:web:roleUserRel:roleAssignUser",route:{path:"/admin/roleUserRelManageRoleAssignUser",query:R}},{txt:"\u4E3A\u8BE5\u7528\u6237\u6E05\u7A7A\u89D2\u8272",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u7528\u6237 ${e.userNickname} \u6240\u6709\u89D2\u8272,\u8BE5\u7528\u6237\u5C06\u4E0D\u518D\u62E5\u6709\u4EFB\u4F55\u89D2\u8272\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleUserRel:deleteByUserId",route:{path:"/admin/roleUserRelManageDeleteByUserId",query:p}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u6E05\u7A7A\u7528\u6237",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u89D2\u8272 ${e.roleName} \u6240\u6709\u89D2\u8272,\u8BE5\u89D2\u8272\u5C06\u4E0D\u518D\u5206\u914D\u7ED9\u4EFB\u4F55\u7528\u6237\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleUserRel:deleteByRoleId",route:{path:"/admin/roleUserRelManageDeleteByRoleId",query:c}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:roleUserRel:delete",methodConfirmText:`\u5220\u9664\u540E\u7528\u6237 ${e.userNickname} \u5C06\u4E0D\u518D\u62E5\u6709\u89D2\u8272 ${e.roleName} \u53CA\u89D2\u8272\u6240\u8D4B\u4E88\u7684\u529F\u80FD\uFF0C\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F`,method(){return I(i).then(F=>(f(),Promise.resolve(F)))}}]};return(e,m)=>{const o=r("PtButton"),i=r("PtForm"),d=r("PtButtonGroup"),p=r("el-table-column"),R=r("PtTable"),c=r("PtRouteViewPopover");return N(),v(w,null,[u(i,{form:l.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:n.value,inline:"",comps:l.formComps},{buttons:t(()=>[u(o,{permission:"admin:web:roleUserRel:create",route:"/admin/roleUserRelManageAdd"},{default:t(()=>[s("\u6DFB\u52A0")]),_:1}),u(o,{permission:"admin:web:roleUserRel:userAssignRole",route:"/admin/roleUserRelManageUserAssignRole"},{default:t(()=>[s("\u7528\u6237\u5206\u914D\u89D2\u8272")]),_:1}),u(o,{permission:"admin:web:roleUserRel:roleAssignUser",route:"/admin/roleUserRelManageRoleAssignUser"},{default:t(()=>[s("\u89D2\u8272\u5206\u914D\u7528\u6237")]),_:1}),u(o,{permission:"admin:web:roleUserRel:deleteByUserId",route:"/admin/roleUserRelManageDeleteByUserId"},{default:t(()=>[s("\u6E05\u7A7A\u7528\u6237\u89D2\u8272")]),_:1}),u(o,{permission:"admin:web:roleUserRel:deleteByRoleId",route:"/admin/roleUserRelManageDeleteByRoleId"},{default:t(()=>[s("\u6E05\u7A7A\u89D2\u8272\u7528\u6237")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),u(R,{ref_key:"tableRef",ref:A,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:m[0]||(m[0]=a=>n.value.loading=a),paginationProps:g,columns:l.tableColumns},{defaultAppend:t(()=>[u(p,{label:"\u64CD\u4F5C"},{default:t(({row:a,column:F,$index:_})=>[u(d,{options:C({row:a,column:F,$index:_})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),u(c,{level:3})],64)}}});export{$ as default};
