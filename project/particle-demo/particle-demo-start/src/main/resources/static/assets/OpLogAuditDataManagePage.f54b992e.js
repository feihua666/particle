import{g as D,d as F,r as g,a as E,b as n,o as I,c as T,e as m,w as B,F as v}from"./index.bd091b8a.js";import{p as A}from"./opLogAdminApi.81754a34.js";let C="/admin/web/op_log_audit_data";const L=e=>D.delete(C+"/delete",{data:e}),y=e=>D.get(C+"/page",{params:e}),x={opLogId:{type:String},opLogName:String},O=({props:e,required:l=!1,fieldName:r="opLogId",propOpLogIdFieldName:o="opLogId",propOpLogNicknameFieldName:u="opLogName",label:p="\u64CD\u4F5C\u65E5\u5FD7",valueChange:s=()=>{}})=>({field:{name:r,value:e[o],valueChange:s},element:{comp:"PtSelect",formItemProps:{label:p,required:l},compProps:()=>{let a=!!(e[o]&&e[u]);return{placeholder:"\u8F93\u5165\u64CD\u4F5C\u540D\u79F0",disabled:a,dataMethod:()=>a?{data:[{id:e[o],name:e[u]}]}:{data:[]},remote:!a,remoteMethod:t=>t?A({name:t}):{data:[]},props:{label:"name"}}}}}),R=({props:e})=>[{field:{name:"name"},element:{comp:"el-input",formItemProps:{label:"\u5B57\u6BB5\u540D\u79F0"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D\uFF0C\u5982\uFF1A\u6635\u79F0"}}},{field:{name:"propertyName"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u5B57\u6BB5"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D\uFF0C\u5982\uFF1Anickname"}}},{field:{name:"oldValue"},element:{comp:"el-input",formItemProps:{label:"\u65E7\u503C"},compProps:{clearable:!0}}},{field:{name:"newValue"},element:{comp:"el-input",formItemProps:{label:"\u65B0\u503C"},compProps:{clearable:!0}}},{field:{name:"changeTypeDictId"},element:{comp:"PtDictFrontSelect",formItemProps:{label:"\u503C\u6539\u53D8\u7C7B\u578B\u5B57\u5178"},compProps:{dictParam:{groupCode:"op_log_audit_data_change_type"}}}},{field:{name:"changeType"},element:{comp:"el-input",formItemProps:{label:"\u503C\u6539\u53D8\u7C7B\u578B"},compProps:{clearable:!0,placeholder:"\u5982\uFF1APROPERTY_VALUE_CHANGED"}}},{field:{name:"typeDictId"},element:{comp:"PtDictFrontSelect",formItemProps:{label:"\u7C7B\u578B\u5BF9\u5E94\u7684\u5B57\u5178"},compProps:{dictParam:{groupCode:"op_log_type"}}}},{field:{name:"type"},element:{comp:"el-input",formItemProps:{label:"\u7C7B\u578B"},compProps:{clearable:!0,placeholder:"\u5982\uFF1Acreate"}}},{field:{name:"dataId"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636Eid"},compProps:{}}},{field:{name:"dataTable"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u8868\u540D"},compProps:{clearable:!0}}},{field:{name:"dataEntity"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u8F7D\u4F53"},compProps:{clearable:!0}}},O({props:e})],S=F({name:"OpLogAuditDataManagePage"}),N=F({...S,props:{...x},setup(e){const l=e,r=g(null),o=E({form:{opLogId:l.opLogId},formComps:R({props:l}),tableColumns:[{prop:"name",label:"\u5B57\u6BB5\u540D\u79F0",showOverflowTooltip:!0},{prop:"propertyName",label:"\u6570\u636E\u5B57\u6BB5",showOverflowTooltip:!0},{prop:"oldValue",label:"\u65E7\u503C",showOverflowTooltip:!0},{prop:"newValue",label:"\u65B0\u503C",showOverflowTooltip:!0},{prop:"changeTypeDictName",label:"\u503C\u6539\u53D8\u7C7B\u578B\u5B57\u5178"},{prop:"dataId",label:"\u6570\u636Eid",showOverflowTooltip:!0},{prop:"dataTable",label:"\u6570\u636E\u8868\u540D",showOverflowTooltip:!0},{prop:"dataEntity",label:"\u6570\u636E\u8F7D\u4F53",showOverflowTooltip:!0},{prop:"opLogName",label:"\u64CD\u4F5C\u65E5\u5FD7",showOverflowTooltip:!0}]}),u=g({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:opLogAuditData:pageQuery"}),p=()=>{r.value.refreshData()},s=({pageQuery:t})=>y({...o.form,...t}),a={permission:u.value.permission},b=({row:t,column:i,$index:c})=>c<0?[]:(t.id,[{txt:"\u5220\u9664",text:!0,permission:"admin:web:opLogAuditData:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return L({id:t.id}).then(d=>(p(),Promise.resolve(d)))}}]);return(t,i)=>{const c=n("PtForm"),P=n("PtButtonGroup"),d=n("el-table-column"),_=n("PtTable");return I(),T(v,null,[m(c,{form:o.form,method:p,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"","label-width":"120",comps:o.formComps},null,8,["form","submitAttrs","comps"]),m(_,{ref_key:"tableRef",ref:r,"default-expand-all":"",dataMethod:s,onDataMethodDataLoading:i[0]||(i[0]=f=>u.value.loading=f),paginationProps:a,columns:o.tableColumns},{defaultAppend:B(()=>[m(d,{label:"\u64CD\u4F5C",width:"80"},{default:B(({row:f,column:h,$index:w})=>[m(P,{options:b({row:f,column:h,$index:w})},null,8,["options"])]),_:1})]),_:1},8,["columns"])],64)}}});export{N as default};
