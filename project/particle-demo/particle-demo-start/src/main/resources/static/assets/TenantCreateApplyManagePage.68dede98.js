import{p as P,r as x}from"./tenantCreateApplyAdminApi.a4d0b960.js";import{p as g}from"./tenantCreateApplyManage.8414e11d.js";import{d as A,r as F,a as v,b as r,o as w,c as h,e as n,w as i,f as T,F as E}from"./index.5a88179c.js";const N=A({name:"TenantCreateApplyManagePage"}),S=A({...N,setup(k){const b=F(null),p=v({form:{},formComps:g,tableColumns:[{prop:"name",label:"\u79DF\u6237\u540D\u79F0"},{prop:"tenantTypeDictName",label:"\u79DF\u6237\u7C7B\u578B"},{prop:"applyUserNickname",label:"\u7533\u8BF7\u4EBA"},{prop:"applyUserAvatar",label:"\u7533\u8BF7\u4EBA\u5934\u50CF",columnView:"image"},{prop:"isFormal",label:"\u662F\u5426\u6B63\u5F0F",formatter:(t,a,e,u)=>e?"\u6B63\u5F0F":"\u8BD5\u7528"},{prop:"userLimitCount",label:"\u7528\u6237\u6570\u9650\u5236",formatter:(t,a,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"effectiveDays",label:"\u7533\u8BF7\u5929\u6570",formatter:(t,a,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"effectiveAt",label:"\u751F\u6548\u65E5\u671F",formatter:(t,a,e,u)=>e||"\u7ACB\u5373\u751F\u6548"},{prop:"expireAt",label:"\u8FC7\u671F\u65F6\u95F4",formatter:(t,a,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"email",label:"\u90AE\u7BB1",showOverflowTooltip:!0},{prop:"userName",label:"\u59D3\u540D"},{prop:"mobile",label:"\u624B\u673A\u53F7"},{prop:"auditStatusDictName",label:"\u5BA1\u6838\u72B6\u6001"},{prop:"auditStatusComment",label:"\u5BA1\u6838\u610F\u89C1",showOverflowTooltip:!0},{prop:"auditUserNickname",label:"\u5BA1\u6838\u4EBA"},{prop:"remark",label:"\u63CF\u8FF0"}]}),m=F({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:tenantCreateApply:pageQuery"}),f=()=>{b.value.refreshData()},B=({pageQuery:t})=>P({...p.form,...t}),C={permission:m.value.permission},_=({row:t,column:a,$index:e})=>{if(e<0)return[];t.id;let u={id:t.id,applyUserId:t.applyUserId,applyUserNickname:t.applyUserNickname},o=t.auditStatusDictValue=="audit_pass",l={};o&&(l={disabled:!0,disabledReason:"\u5DF2\u5BA1\u6838\u901A\u8FC7\u4E0D\u80FD\u7F16\u8F91"});let s=[{txt:"\u7F16\u8F91",text:!0,...l,permission:"admin:web:tenantCreateApply:update",route:{path:"/admin/TenantCreateApplyManageUpdate",query:u}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:tenantCreateApply:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return x({id:t.id}).then(d=>(f(),Promise.resolve(d)))}}];return t.auditStatusDictValue=="un_audit"&&s.push({txt:"\u5BA1\u6838",text:!0,permission:"admin:web:tenantCreateApply:audit",route:{path:"/admin/TenantCreateApplyManageAudit",query:u}}),s};return(t,a)=>{const e=r("PtButton"),u=r("PtForm"),o=r("PtButtonGroup"),l=r("el-table-column"),s=r("PtTable"),d=r("PtRouteViewPopover");return w(),h(E,null,[n(u,{form:p.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:p.formComps},{buttons:i(()=>[n(e,{permission:"admin:web:tenantCreateApply:create",route:"/admin/TenantCreateApplyManageAdd"},{default:i(()=>[T("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(s,{ref_key:"tableRef",ref:b,"default-expand-all":"",dataMethod:B,onDataMethodDataLoading:a[0]||(a[0]=c=>m.value.loading=c),paginationProps:C,columns:p.tableColumns},{defaultAppend:i(()=>[n(l,{label:"\u64CD\u4F5C",width:"180"},{default:i(({row:c,column:D,$index:y})=>[n(o,{options:_({row:c,column:D,$index:y})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(d,{level:3})],64)}}});export{S as default};
