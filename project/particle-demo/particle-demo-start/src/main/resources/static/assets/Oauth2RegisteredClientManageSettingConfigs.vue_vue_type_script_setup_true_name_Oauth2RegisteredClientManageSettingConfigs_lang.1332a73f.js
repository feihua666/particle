import{g as y,d as F,a as A,r as m,ag as D,b as B,o as _,h as C,c as O,e as k,w as S,W as h,F as I,i as v,a6 as T}from"./index.9463e69a.js";let R="/front/web/oauth2_registered_client";const P=n=>y.get(R+"/algorithm_list",{params:n}),N=F({name:"clientSettings"}),J=F({...N,props:{initJsonStr:{type:String},onSubmit:{type:Function,default:()=>({})},authorizationGrantTypes:{type:Array,default:()=>[]}},setup(n,{expose:p}){const t=n,e=A({form:{},formData:{}}),f=({authorizationGrantTypes:o})=>o?o.some(i=>i=="authorization_code"):!1,u=m([{field:{name:"settings.client.require-proof-key",value:!0},element:{comp:"el-switch",formItemProps:{label:"REQUIRE_PROOF_KEY",required:()=>f(t.authorizationGrantTypes),tips:"\u662F\u5426\u8981\u6C42\u5BA2\u6237\u7AEF\u63D0\u4F9B\u9A8C\u8BC1\u5BC6\u94A5\uFF0C\u8FD9\u662F\u9488\u5BF9\u6388\u6743\u7801\u6A21\u5F0F(authorization_code)\uFF0C\u5BA2\u6237\u7AEF\u65E0\u80FD\u529B\u4FDD\u62A4\u81EA\u5DF1\u7684\u5BA2\u6237\u7AEF\u5BC6\u94A5\uFF08client_secret\uFF09\u65F6\uFF0C\u9632\u6B62 code \u88AB\u62E6\u622A\u7684\u9A8C\u8BC1"},compProps:{}}},{field:{name:"settings.client.require-authorization-consent",value:!0},element:{comp:"el-switch",formItemProps:{label:"REQUIRE_AUTHORIZATION_CONSENT",required:()=>f(t.authorizationGrantTypes),tips:"\u9488\u5BF9\u6388\u6743\u7C7B\u578B\u4E3A authorization_code \u6216 device_code \u65F6\uFF0C\u662F\u5426\u9700\u8981\u8D44\u6E90\u62E5\u6709\u8005\u786E\u8BA4\uFF0C\u5EFA\u8BAE\u9009\u62E9\u9700\u8981\u786E\u8BA4\uFF0C\u4E00\u822C\u662F\u8FD9\u4E2A\u6D41\u7A0B"},compProps:{}}},{field:{name:"settings.client.token-endpoint-authentication-signing-algorithm"},element:{comp:"PtSelect",formItemProps:{label:"TOKEN_ENDPOINT_AUTHENTICATION_SIGNING_ALGORITHM",required:!1,tips:"\u6388\u6743\u65B9\u6CD5\u4E3A private_key_jwt \u6216 client_secret_jwt \u65F6\u5FC5\u586B,\u4E3B\u8981\u6307\u5B9A\u7B7E\u540D\u65B9\u5F0F"},compProps:{dataMethod:P,props:{value:"value",label:"name"}}}},{field:{name:"settings.client.jwk-set-url"},element:{comp:"el-input",formItemProps:{label:"JWK_SET_URL",required:!1,tips:"http(s)\u5F00\u5934",displayBlock:!0},compProps:{}}}]);D(()=>{if(t.initJsonStr){let o=JSON.parse(t.initJsonStr);for(let i in o)e.form[i]=o[i]}});const c=m({buttonText:"\u786E\u8BA4"}),d=()=>{t.onSubmit()};return p({form:e.form}),(o,i)=>{const E=B("PtForm");return _(),C(E,{form:e.form,formData:e.formData,labelWidth:"120",method:d,defaultButtonsShow:"submit,reset",submitAttrs:c.value,inline:"",layout:[3,1],comps:u.value},null,8,["form","formData","submitAttrs","comps"])}}}),V=F({name:"clientSettings"}),M=F({...V,props:{initJsonStr:{type:String},onSubmit:{type:Function,default:()=>({})},authorizationGrantTypes:{type:Array,default:()=>[]}},setup(n,{expose:p}){const t=n,e=A({form:{},formData:{}});let f={value:"self-contained"},u=JSON.stringify(f),c={value:"reference"},d=JSON.stringify(c);const o=m([{field:{name:"settings.token.authorization-code-time-to-live",value:"PT5M"},element:{comp:"el-input",formItemProps:{label:"AUTHORIZATION_CODE_TIME_TO_LIVE",required:!0,tips:"authorization_code \u65F6\u957F\u8BBE\u7F6E\uFF0C\u5EFA\u8BAE\u8BBE\u7F6E\u4E3A\u5206\u949F\u4E3A\u5355\u4F4D\uFF0C\u4F8B\uFF1APT5M \u4EE3\u88685\u5206\u949F"},compProps:{}}},{field:{name:"settings.token.access-token-time-to-live",value:"PT5M"},element:{comp:"el-input",formItemProps:{label:"ACCESS_TOKEN_TIME_TO_LIVE",required:!0,tips:"access_token \u65F6\u957F\u8BBE\u7F6E\uFF0C\u5EFA\u8BAE\u8BBE\u7F6E\u4E3A\u5206\u949F\u4E3A\u5355\u4F4D\uFF0C\u4F8B\uFF1APT5M \u4EE3\u88685\u5206\u949F"},compProps:{}}},{field:{name:"settings.token.access-token-format",value:u},element:{comp:"PtSelect",formItemProps:{label:"ACCESS_TOKEN_FORMAT",required:!0,tips:"access_token \u683C\u5F0F\u8BBE\u7F6E"},compProps:{dataMethod:()=>({data:[{id:u,name:"SELF_CONTAINED"},{id:d,name:"REFERENCE"}]})}}},{field:{name:"settings.token.reuse-refresh-tokens",value:!0},element:{comp:"el-switch",formItemProps:{label:"REUSE_REFRESH_TOKENS",required:!0,tips:"refresh_token \u662F\u5426\u91CD\u590D\u4F7F\u7528\uFF0C\u8FD9\u662F\u4F7F\u7528 refresh_token \u5237\u65B0 token \u65F6\uFF0C\u5982\u679C\u8BBE\u7F6E\u4E3A true\uFF0C\u5C06\u8FD4\u56DE\u539F\u6765 refresh_token\uFF0C\u5426\u5219\u751F\u6210\u4E00\u4E2A\u65B0\u7684 refresh_token"},compProps:{}}},{field:{name:"settings.token.refresh-token-time-to-live",value:"PT60M"},element:{comp:"el-input",formItemProps:{label:"REFRESH_TOKEN_TIME_TO_LIVE",required:!0,tips:"refresh_token \u65F6\u957F\u8BBE\u7F6E\uFF0C\u5EFA\u8BAE\u8BBE\u7F6E\u4E3A\u5206\u949F\u4E3A\u5355\u4F4D\uFF0C\u4F8B\uFF1APT60M \u4EE3\u886860\u5206\u949F\u3001PT1H \u4EE3\u88681\u5C0F\u65F6"},compProps:{}}},{field:{name:"settings.token.id-token-signature-algorithm",value:"RS256"},element:{comp:"PtSelect",formItemProps:{label:"ID_TOKEN_SIGNATURE_ALGORITHM",required:!0,tips:"token \u7B7E\u540D\u8BBE\u7F6E"},compProps:{dataMethod:()=>P({type:"signature"}),props:{value:"value",label:"name"}}}}]);D(()=>{if(t.initJsonStr){let a=JSON.parse(t.initJsonStr);for(let r in a)if(r=="settings.token.access-token-format"){let s=a[r];s&&(typeof s=="string"?e.form[r]=JSON.stringify(JSON.parse(s)):e.form[r]=JSON.stringify(s))}else e.form[r]=a[r]}});const i=m({buttonText:"\u786E\u8BA4"}),E=()=>{t.onSubmit()};return p({form:e.form}),(a,r)=>{const s=B("PtForm");return _(),C(s,{form:e.form,formData:e.formData,labelWidth:"120",method:E,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",layout:[3,1],comps:o.value},null,8,["form","formData","submitAttrs","comps"])}}}),q=v("div",{id:"oauth2RegisteredClientClientSettingDialogFooter"},null,-1),w=v("div",{id:"oauth2RegisteredClientTokenSettingDialogFooter"},null,-1),z=F({name:"Oauth2RegisteredClientManageSettingConfigs"}),G=F({...z,props:{form:{type:Object,required:!0},formData:{type:Object,required:!0}},setup(n,{expose:p}){const t=n,e=m(null),f=m(null),u=A({clientSettingConfigJson:{dialogVisible:!1},tokenSettingConfigJson:{dialogVisible:!1}}),c=s=>JSON.stringify(s),d=()=>{t.form.clientSettings=c(e.value.form),u.clientSettingConfigJson.dialogVisible=!1},o=m(!1),i=()=>{T(()=>{o.value=!0})},E=()=>{t.form.tokenSettings=c(f.value.form),u.tokenSettingConfigJson.dialogVisible=!1},a=m(!1),r=()=>{T(()=>{a.value=!0})};return p({reactiveData:u}),(s,l)=>{const b=B("el-dialog");return _(),O(I,null,[k(b,{modelValue:u.clientSettingConfigJson.dialogVisible,"onUpdate:modelValue":l[0]||(l[0]=g=>u.clientSettingConfigJson.dialogVisible=g),width:"70%",title:"\u5BA2\u6237\u7AEF\u914D\u7F6EJson",onOpen:i,onClosed:l[1]||(l[1]=g=>o.value=!1),"append-to-body":"","destroy-on-close":""},{footer:S(()=>[q]),default:S(()=>[o.value?(_(),C(J,{key:0,ref_key:"clientSettingRef",ref:e,initJsonStr:n.form.clientSettings,onSubmit:d,authorizationGrantTypes:n.form.authorizationGrantTypes,buttonsTeleportProps:{disabled:!1,to:"#oauth2RegisteredClientClientSettingDialogFooter"}},null,8,["initJsonStr","authorizationGrantTypes"])):h("",!0)]),_:1},8,["modelValue"]),k(b,{modelValue:u.tokenSettingConfigJson.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=g=>u.tokenSettingConfigJson.dialogVisible=g),width:"70%",title:"token\u914D\u7F6EJson",onOpen:r,onClosed:l[3]||(l[3]=g=>a.value=!1),"append-to-body":"","destroy-on-close":""},{footer:S(()=>[w]),default:S(()=>[a.value?(_(),C(M,{key:0,ref_key:"tokenSettingRef",ref:f,initJsonStr:n.form.tokenSettings,onSubmit:E,buttonsTeleportProps:{disabled:!1,to:"#oauth2RegisteredClientTokenSettingDialogFooter"}},null,8,["initJsonStr"])):h("",!0)]),_:1},8,["modelValue"])],64)}}});export{G as _};
