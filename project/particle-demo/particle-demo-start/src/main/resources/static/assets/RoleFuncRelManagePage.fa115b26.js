import{p as I,a as P}from"./roleFuncRelAdminApi.dced267b.js";import{d as E,K as h,r as A,a as x,L as N,b as n,o as v,c as w,e,w as t,f as l,F as M}from"./index.d7ae4034.js";import{r as T,a as q}from"./roleCompItem.39f1862f.js";import"./roleAdminApi.736c7327.js";const Q=E({name:"RoleFuncRelManagePage"}),G=E({...Q,props:{...h,...T},setup(B){const f=B,C=A(null),a=x({form:{},formComps:[N({props:f,required:!1}),q({props:f,required:!1})],tableColumns:[{prop:"funcName",label:"\u529F\u80FD\u83DC\u5355\u540D\u79F0",showOverflowTooltip:!0,width:120},{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0",showOverflowTooltip:!0,width:120}]}),F=A({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:roleFuncRel:pageQuery"}),R=()=>{C.value.refreshData()},b=({pageQuery:u})=>I({...a.form,...u}),g={permission:F.value.permission},_=({row:u,column:s,$index:o})=>{if(o<0)return[];let m={id:u.id},i={funcId:u.funcId,funcName:u.funcName},c={funcId:u.funcId,funcName:u.funcName},d={roleId:u.roleId,roleName:u.roleName},D={roleId:u.roleId,roleName:u.roleName};return[{txt:"\u4E3A\u8BE5\u529F\u80FD\u83DC\u5355\u5206\u914D\u89D2\u8272",text:!0,permission:"admin:web:roleFuncRel:funcAssignRole",route:{path:"/admin/roleFuncRelManageFuncAssignRole",query:i}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u5206\u914D\u529F\u80FD\u83DC\u5355",text:!0,permission:"admin:web:roleFuncRel:roleAssignFunc",route:{path:"/admin/roleFuncRelManageRoleAssignFunc",query:d}},{txt:"\u4E3A\u8BE5\u529F\u80FD\u83DC\u5355\u6E05\u7A7A\u89D2\u8272",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u529F\u80FD\u83DC\u5355 ${u.funcName} \u6240\u6709\u89D2\u8272,\u8BE5\u529F\u80FD\u83DC\u5355\u5C06\u4E0D\u518D\u5206\u914D\u7ED9\u4EFB\u4F55\u89D2\u8272\uFF0C\u540C\u65F6\u62E5\u6709\u6D89\u53CA\u5BF9\u5E94\u89D2\u8272\u7684\u7528\u6237\u529F\u80FD\u5C06\u53D7\u5230\u5F71\u54CD\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleFuncRel:deleteByFuncId",route:{path:"/admin/roleFuncRelManageDeleteByFuncId",query:c}},{txt:"\u4E3A\u8BE5\u89D2\u8272\u6E05\u7A7A\u529F\u80FD\u83DC\u5355",text:!0,methodConfirmText:`\u60A8\u5C06\u6E05\u7A7A\u89D2\u8272 ${u.roleName} \u6240\u6709\u529F\u80FD\u83DC\u5355,\u8BE5\u89D2\u8272\u5C06\u4E0D\u518D\u62E5\u6709\u4EFB\u4F55\u529F\u80FD\u83DC\u5355\uFF0C\u540C\u65F6\u62E5\u6709\u8BE5\u89D2\u8272\u7684\u7528\u6237\u529F\u80FD\u5C06\u53D7\u5230\u5F71\u54CD\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01\uFF01\uFF01\uFF0C\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F`,permission:"admin:web:roleFuncRel:deleteByRoleId",route:{path:"/admin/roleFuncRelManageDeleteByRoleId",query:D}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:roleFuncRel:delete",methodConfirmText:`\u5220\u9664\u540E\u89D2\u8272 ${u.roleName} \u5C06\u4E0D\u518D\u62E5\u6709\u529F\u80FD\u83DC\u5355 ${u.funcName}\uFF0C\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F`,method(){return P(m).then(p=>(R(),Promise.resolve(p)))}}]};return(u,s)=>{const o=n("PtButton"),m=n("PtForm"),i=n("PtButtonGroup"),c=n("el-table-column"),d=n("PtTable"),D=n("PtRouteViewPopover");return v(),w(M,null,[e(m,{form:a.form,method:R,defaultButtonsShow:"submit,reset",submitAttrs:F.value,inline:"",comps:a.formComps},{buttons:t(()=>[e(o,{permission:"admin:web:roleFuncRel:create",route:"/admin/roleFuncRelManageAdd"},{default:t(()=>[l("\u6DFB\u52A0")]),_:1}),e(o,{permission:"admin:web:roleFuncRel:funcAssignRole",route:"/admin/roleFuncRelManageFuncAssignRole"},{default:t(()=>[l("\u529F\u80FD\u83DC\u5355\u5206\u914D\u89D2\u8272")]),_:1}),e(o,{permission:"admin:web:roleFuncRel:roleAssignFunc",route:"/admin/roleFuncRelManageRoleAssignFunc"},{default:t(()=>[l("\u89D2\u8272\u5206\u914D\u529F\u80FD\u83DC\u5355")]),_:1}),e(o,{permission:"admin:web:roleFuncRel:deleteByFuncId",route:"/admin/roleFuncRelManageDeleteByFuncId"},{default:t(()=>[l("\u6E05\u7A7A\u529F\u80FD\u83DC\u5355\u89D2\u8272")]),_:1}),e(o,{permission:"admin:web:roleFuncRel:deleteByRoleId",route:"/admin/roleFuncRelManageDeleteByRoleId"},{default:t(()=>[l("\u6E05\u7A7A\u89D2\u8272\u529F\u80FD\u83DC\u5355")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),e(d,{ref_key:"tableRef",ref:C,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:s[0]||(s[0]=r=>F.value.loading=r),paginationProps:g,columns:a.tableColumns},{defaultAppend:t(()=>[e(c,{label:"\u64CD\u4F5C"},{default:t(({row:r,column:p,$index:y})=>[e(i,{options:_({row:r,column:p,$index:y})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),e(D,{level:3})],64)}}});export{G as default};
