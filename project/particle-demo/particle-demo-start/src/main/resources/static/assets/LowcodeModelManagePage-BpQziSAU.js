import{p as B,r as v}from"./lowcodeModelAdminApi-CFZBaqcO.js";import{p as y}from"./lowcodeModelManage-CFoImX2g.js";import{d as T,r as f,a as C,b as o,o as D,c as A,e as t,w as r,f as R,F as E}from"./index-D8BtRcSm.js";const q=T({__name:"LowcodeModelManagePage",setup(I){const u=f(null),l=C({form:{},formComps:y,tableColumns:[{prop:"name",label:"名称"},{prop:"nameEn",label:"英文名称"},{prop:"nameEnEntity",label:"实体名称"},{prop:"nameEnEntityVar",label:"实体变量名称"},{prop:"tableName",label:"表名称"},{prop:"tableTypeDictName",label:"模型表类型"},{prop:"requestPath",label:"请求路径"},{prop:"remark",label:"描述"}]}),m=f({buttonText:"查询",loading:!1,permission:"admin:web:lowcodeModel:pageQuery"}),c=()=>{u.value.refreshData()},w=({pageQuery:e})=>B({...l.form,...e}),M={permission:m.value.permission},_=({row:e,column:a,$index:s})=>{if(s<0)return[];let n={id:e.id},d={lowcodeModelId:e.id};return[{txt:"编辑",text:!0,permission:"admin:web:lowcodeModel:update",route:{path:"/admin/lowcodeModelManageUpdate",query:n}},{txt:"删除",text:!0,position:"more",permission:"admin:web:lowcodeModel:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return v(n).then(p=>(c(),Promise.resolve(p)))}},{txt:"加载载模型项",text:!0,position:"more",permission:"admin:web:lowcodeModel:loadByModelAndDatasource",methodConfirmText:`如果存在已添加或装载的模型项将会被清空，确定要装载 ${e.name} 吗？`,route:{path:"/admin/lowcodeModelManageLoadModelItemByModelAndDataSource",query:n}},{txt:"查看模型项",text:!0,position:"more",permission:"admin:web:lowcodeModelItem:pageQuery",route:{path:"/admin/lowcodeModelItemManagePage",query:d}}]},g={text:!0,buttonText:"更多"};return(e,a)=>{const s=o("PtButton"),n=o("PtForm"),d=o("PtButtonGroup"),b=o("el-table-column"),p=o("PtTable"),P=o("PtRouteViewPopover");return D(),A(E,null,[t(n,{form:l.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:l.formComps},{buttons:r(()=>[t(s,{permission:"admin:web:lowcodeModel:create",route:"/admin/lowcodeModelManageAdd"},{default:r(()=>a[1]||(a[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),t(p,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:a[0]||(a[0]=i=>m.value.loading=i),paginationProps:M,columns:l.tableColumns},{defaultAppend:r(()=>[t(b,{label:"操作",width:"180"},{default:r(({row:i,column:x,$index:h})=>[t(d,{options:_({row:i,column:x,$index:h}),dropdownTriggerButtonOptions:g},null,8,["options"])]),_:1})]),_:1},8,["columns"]),t(P,{level:3})],64)}}});export{q as default};
