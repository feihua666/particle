import{p as P,r as T}from"./dictAdminApi-Ck9PaC-l.js";import{p as M}from"./dictManage-CGw8EkKW.js";import{d as B,r as b,a as F,b as n,o as R,c as C,e as l,w as s,f as O,F as D}from"./index-BGwvwH0Y.js";import"./treeQueryComps-CWIG2rsy.js";const G=B({__name:"DictManagePage",setup(A){const d=b(null),i=F({form:{},formComps:M,tableColumns:[{prop:"name",label:"名称",width:150,showOverflowTooltip:!0},{prop:"code",label:"编码",showOverflowTooltip:!0},{prop:"value",label:"字典值",showOverflowTooltip:!0},{prop:"valueUnit",label:"字典值单位",width:100},{prop:"parentName",label:"父级",showOverflowTooltip:!0},{prop:"isSystem",label:"是否系统",width:80,formatter:(t,r,e,a)=>e?"系统":"自定义"},{prop:"isPublic",label:"是否公共",width:80,formatter:(t,r,e,a)=>e?"公共":"私有"},{prop:"isGroup",label:"是否字典组",width:100,formatter:(t,r,e,a)=>e?"字典组":"字典项"},{prop:"isDisabled",label:"是否禁用",width:80,formatter:(t,r,e,a)=>{let o=e?"禁用":"启用";return e&&t.disabledReason&&(o=o+`(${t.disabledReason})`),o}},{prop:"privateFlag",label:"私有标识",formatter:(t,r,e,a)=>{let o=e;return e&&t.privateFlagMemo&&(o=o+`(${t.privateFlagMemo})`),o},showOverflowTooltip:!0},{prop:"groupFlag",label:"分组标识",formatter:(t,r,e,a)=>{let o=e;return e&&t.groupFlagMemo&&(o=o+`(${t.groupFlagMemo})`),o},showOverflowTooltip:!0},{prop:"tags",label:"标签",showOverflowTooltip:!0},{prop:"seq",label:"排序",width:60},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),p=b({buttonText:"查询",loading:!1,permission:"admin:web:dict:pageQuery"}),c=()=>{d.value.refreshData()},f=({pageQuery:t})=>P({...i.form,...t}),w={permission:p.value.permission},g=({row:t,column:r,$index:e})=>{if(e<0)return[];let a={id:t.id};return[{txt:"添加子级",text:!0,permission:"admin:web:dict:create",route:{path:"/admin/dictManageAdd",query:a}},{txt:"编辑",position:"more",text:!0,permission:"admin:web:dict:update",route:{path:"/admin/dictManageUpdate",query:a}},{txt:"删除",position:"more",text:!0,permission:"admin:web:dict:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return T({id:t.id}).then(m=>(c(),Promise.resolve(m)))}}]};return(t,r)=>{const e=n("PtButton"),a=n("PtForm"),o=n("PtButtonGroup"),m=n("el-table-column"),h=n("PtTable"),v=n("PtRouteViewPopover");return R(),C(D,null,[l(a,{form:i.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",layout:[[8,8],3],comps:i.formComps},{buttons:s(()=>[l(e,{permission:"admin:web:dict:create",route:"/admin/dictManageAdd"},{default:s(()=>r[1]||(r[1]=[O("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),l(h,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:r[0]||(r[0]=u=>p.value.loading=u),dataMethodResultHandleConvertToTree:!0,paginationProps:w,columns:i.tableColumns},{defaultAppend:s(()=>[l(m,{label:"操作",width:"210"},{default:s(({row:u,column:_,$index:x})=>[l(o,{options:g({row:u,column:_,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),l(v,{level:3})],64)}}});export{G as default};
