import{p as v,r as y}from"./tenantCreateApplyAdminApi.14c3c13f.js";import{p as h}from"./tenantCreateApplyManage.8aedeb1d.js";import{d as A,r as F,a as P,b as r,o as x,c as T,e as n,w as i,f as g,F as E}from"./index.bcd8c549.js";const N=A({name:"TenantCreateApplyManagePage"}),R=A({...N,setup(k){const f=F(null),l=P({form:{},formComps:h,tableColumns:[{prop:"name",label:"\u79DF\u6237\u540D\u79F0",showOverflowTooltip:!0},{prop:"tenantTypeDictName",label:"\u79DF\u6237\u7C7B\u578B"},{prop:"applyUserNickname",label:"\u7533\u8BF7\u4EBA"},{prop:"applyUserAvatar",label:"\u7533\u8BF7\u4EBA\u5934\u50CF",columnView:"image"},{prop:"isFormal",label:"\u662F\u5426\u6B63\u5F0F",formatter:(t,o,e,u)=>e?"\u6B63\u5F0F":"\u8BD5\u7528"},{prop:"userLimitCount",label:"\u7528\u6237\u6570\u9650\u5236",formatter:(t,o,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"effectiveDays",label:"\u7533\u8BF7\u5929\u6570",formatter:(t,o,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"effectiveAt",label:"\u751F\u6548\u65E5\u671F",formatter:(t,o,e,u)=>e||"\u7ACB\u5373\u751F\u6548"},{prop:"expireAt",label:"\u8FC7\u671F\u65F6\u95F4",formatter:(t,o,e,u)=>e||"\u4E0D\u9650\u5236"},{prop:"email",label:"\u90AE\u7BB1",showOverflowTooltip:!0},{prop:"userName",label:"\u59D3\u540D",showOverflowTooltip:!0},{prop:"mobile",label:"\u624B\u673A\u53F7",showOverflowTooltip:!0},{prop:"auditStatusDictName",label:"\u5BA1\u6838\u72B6\u6001"},{prop:"auditStatusComment",label:"\u5BA1\u6838\u610F\u89C1",showOverflowTooltip:!0},{prop:"auditUserNickname",label:"\u5BA1\u6838\u4EBA",showOverflowTooltip:!0},{prop:"remark",label:"\u63CF\u8FF0",showOverflowTooltip:!0}]}),m=F({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:tenantCreateApply:pageQuery"}),b=()=>{f.value.refreshData()},B=({pageQuery:t})=>v({...l.form,...t}),C={permission:m.value.permission},_=({row:t,column:o,$index:e})=>{if(e<0)return[];t.id;let u={id:t.id,applyUserId:t.applyUserId,applyUserNickname:t.applyUserNickname},a=t.auditStatusDictValue=="audit_pass",p={};a&&(p={disabled:!0,disabledReason:"\u5DF2\u5BA1\u6838\u901A\u8FC7\u4E0D\u80FD\u7F16\u8F91"});let s=[{txt:"\u7F16\u8F91",text:!0,...p,permission:"admin:web:tenantCreateApply:update",route:{path:"/admin/TenantCreateApplyManageUpdate",query:u}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:tenantCreateApply:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return y({id:t.id}).then(d=>(b(),Promise.resolve(d)))}}];return t.auditStatusDictValue=="un_audit"&&s.push({txt:"\u5BA1\u6838",text:!0,permission:"admin:web:tenantCreateApply:audit",route:{path:"/admin/TenantCreateApplyManageAudit",query:u}}),s};return(t,o)=>{const e=r("PtButton"),u=r("PtForm"),a=r("PtButtonGroup"),p=r("el-table-column"),s=r("PtTable"),d=r("PtRouteViewPopover");return x(),T(E,null,[n(u,{form:l.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:l.formComps},{buttons:i(()=>[n(e,{permission:"admin:web:tenantCreateApply:create",route:"/admin/TenantCreateApplyManageAdd"},{default:i(()=>[g("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(s,{ref_key:"tableRef",ref:f,"default-expand-all":"",dataMethod:B,onDataMethodDataLoading:o[0]||(o[0]=c=>m.value.loading=c),paginationProps:C,columns:l.tableColumns},{defaultAppend:i(()=>[n(p,{label:"\u64CD\u4F5C",width:"180"},{default:i(({row:c,column:w,$index:D})=>[n(a,{options:_({row:c,column:w,$index:D})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(d,{level:3})],64)}}});export{R as default};
