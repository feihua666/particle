import{p as A,a as g,r as C}from"./feedbackManage.d1a5bac4.js";import{d as f,r as c,a as h,b as a,o as v,c as x,e as n,w as b,F as P}from"./index.48f373ed.js";const R=f({name:"FeedbackManagePage"}),M=f({...R,setup(w){const p=c(null),r=h({form:{},formComps:A,tableColumns:[{prop:"contactUsername",label:"\u8054\u7CFB\u59D3\u540D"},{prop:"contactTelephone",label:"\u8054\u7CFB\u7535\u8BDD",formatter:(e,o,u,t)=>{let l=e.isContactTelephoneMobile?"(\u624B\u673A\u53F7)":"";return u+l}},{prop:"contactEmail",label:"\u8054\u7CFB\u90AE\u7BB1"},{prop:"feedbackContent",label:"\u95EE\u9898\u5EFA\u8BAE\u5185\u5BB9",showOverflowTooltip:!0},{prop:"feedbackAt",label:"\u95EE\u9898\u5EFA\u8BAE\u65F6\u95F4"},{prop:"feedbackUserNickname",label:"\u95EE\u9898\u5EFA\u8BAE\u7528\u6237"},{prop:"feedbackUserAvatar",label:"\u95EE\u9898\u5EFA\u8BAE\u7528\u6237\u5934\u50CF"},{prop:"isHandle",label:"\u662F\u5426\u5DF2\u5904\u7406",formatter:(e,o,u,t)=>u?"\u5DF2\u5904\u7406":"\u672A\u5904\u7406"},{prop:"handleResult",label:"\u5904\u7406\u7ED3\u679C",showOverflowTooltip:!0},{prop:"remark",label:"\u63CF\u8FF0"}]}),s=c({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:feedback:pageQuery"}),m=()=>{p.value.refreshData()},F=({pageQuery:e})=>g({...r.form,...e}),E={permission:s.value.permission},B=({row:e,column:o,$index:u})=>{if(u<0)return[];let t={id:e.id};return[{txt:"\u56DE\u590D",text:!0,permission:"admin:web:feedbackReply:create",disabled:!e.feedbackUserId,disabledReason:e.feedbackUserId?void 0:"\u65E0\u7528\u6237\u5173\u8054\uFF0C\u4E0D\u652F\u6301\u56DE\u590D",route:{path:"/admin/feedbackReplyManageAdd",query:t}},{txt:"\u56DE\u590D\u5217\u8868",text:!0,permission:"admin:web:feedbackReply:pageQuery",position:"more",disabled:!e.feedbackUserId,disabledReason:e.feedbackUserId?void 0:"\u65E0\u7528\u6237\u5173\u8054\uFF0C\u65E0\u56DE\u590D\u5217\u8868\u6570\u636E",route:{path:"/admin/feedbackReplyManagePage",query:t}},{txt:"\u624B\u52A8\u5904\u7406",text:!0,permission:"admin:web:feedback:manualHandle",position:"more",disabled:e.isHandle,disabledReason:e.isHandle?"\u5DF2\u5904\u7406,\u4E0D\u80FD\u518D\u6B21\u5904\u7406":void 0,route:{path:"/admin/feedbackManageManualHandle",query:t}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:feedback:delete",position:"more",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return C({id:e.id}).then(d=>(m(),Promise.resolve(d)))}}]};return(e,o)=>{const u=a("PtForm"),t=a("PtButtonGroup"),l=a("el-table-column"),d=a("PtTable"),D=a("PtRouteViewPopover");return v(),x(P,null,[n(u,{form:r.form,method:m,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:r.formComps},null,8,["form","submitAttrs","comps"]),n(d,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:F,onDataMethodDataLoading:o[0]||(o[0]=i=>s.value.loading=i),paginationProps:E,columns:r.tableColumns},{defaultAppend:b(()=>[n(l,{label:"\u64CD\u4F5C",width:"180"},{default:b(({row:i,column:k,$index:_})=>[n(t,{options:B({row:i,column:k,$index:_}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(D,{level:3})],64)}}});export{M as default};
