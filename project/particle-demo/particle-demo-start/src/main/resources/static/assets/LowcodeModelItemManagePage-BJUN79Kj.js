import{p as h,r as T}from"./lowcodeModelItemAdminApi-OB1HbXKc.js";import{p as x}from"./lowcodeModelItemManage-DZ6OnRcU.js";import{d as B,r as w,a as C,b as t,o as F,c as R,e as o,w as a,f,F as A}from"./index-D8BtRcSm.js";import"./lowcodeModelAdminApi-CFZBaqcO.js";const q=B({__name:"LowcodeModelItemManagePage",props:{lowcodeModelId:{type:String}},setup(i){const u=w(null),r=C({form:{lowcodeModelId:i.lowcodeModelId},formComps:x,tableColumns:[{label:"字段名称",prop:"columnName"},{label:"实体属性名称",prop:"propertyName"},{label:"字段类型",prop:"jdbcType"},{label:"实体属性类型",prop:"propertyType"},{label:"实体属性类型全路径",prop:"propertyFullType",showOverflowTooltip:!0},{label:"全注释",prop:"commentFull",showOverflowTooltip:!0},{label:"简洁注释",prop:"commentSimple",showOverflowTooltip:!0},{label:"默认值",prop:"defaultValue"},{label:"是否唯一",prop:"isUnique"},{label:"是否必填",prop:"isRequired"},{label:"是否主键",prop:"isKey"},{label:"是否主键自增",prop:"isKeyIdentity"},{label:"是否关键字",prop:"isKeyWord"},{label:"长度",prop:"columnLength"},{label:"小数位长度",prop:"fractionLength"},{label:"是否外键",prop:"isForeignKey"},{label:"模型",prop:"lowcodeModelName"},{label:"设计数据",prop:"designJson",showOverflowTooltip:!0},{label:"描述",prop:"remark"}]}),s=w({buttonText:"查询",loading:!1,permission:"admin:web:lowcodeModelItem:pageQuery"}),c=()=>{u.value.refreshData()},g=({pageQuery:l})=>h({...r.form,...l}),M={permission:s.value.permission},P=({row:l,column:e,$index:n})=>{if(n<0)return[];let p={id:l.id};return[{txt:"编辑",text:!0,permission:"admin:web:lowcodeModelItem:update",route:{path:"/admin/lowcodeModelItemManageUpdate",query:p}},{txt:"删除",text:!0,permission:"admin:web:lowcodeModelItem:delete",methodConfirmText:`确定要删除 ${l.name} 吗？`,method(){return T(p).then(m=>(c(),Promise.resolve(m)))}}]};return(l,e)=>{const n=t("PtButton"),p=t("PtForm"),b=t("PtButtonGroup"),m=t("el-table-column"),_=t("PtTable"),y=t("PtRouteViewPopover");return F(),R(A,null,[o(p,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:r.formComps},{buttons:a(()=>[o(n,{permission:"admin:web:lowcodeModelItem:create",route:"/admin/lowcodeModelItemManageAdd"},{default:a(()=>e[1]||(e[1]=[f("添加")])),_:1}),o(n,{permission:"admin:web:lowcodeModelItem:pageQuery",route:{path:"/admin/lowcodeModelItemDesignManagePage",query:{lowcodeModelId:i.lowcodeModelId}}},{default:a(()=>e[2]||(e[2]=[f("去设计")])),_:1},8,["route"])]),_:1},8,["form","submitAttrs","comps"]),o(_,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:g,onDataMethodDataLoading:e[0]||(e[0]=d=>s.value.loading=d),paginationProps:M,columns:r.tableColumns},{defaultAppend:a(()=>[o(m,{label:"操作",width:"180"},{default:a(({row:d,column:I,$index:v})=>[o(b,{options:P({row:d,column:I,$index:v})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(y,{level:3})],64)}}});export{q as default};
