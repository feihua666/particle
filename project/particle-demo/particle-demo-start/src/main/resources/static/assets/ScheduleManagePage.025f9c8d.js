import{g as d,d as f,r as b,a as _,b as r,o as S,c as v,e as l,w as A,F as T}from"./index.6cdd7c8b.js";const I=[{field:{name:"schedulerName"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"schedulerInstanceId"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8Bid"},compProps:{clearable:!0}}}];let i="/admin/web/schedule";const M=t=>d.post(i+"/standby",t),w=t=>d.post(i+"/start",t),C=t=>d.post(i+"/shutdown",t),N=t=>d.get(i+"/getScheduleList",{params:t}),y=f({name:"ScheduleManagePage"}),R=f({...y,setup(t){const h=b(null),n=_({form:{},formComps:I,tableColumns:[{prop:"schedulerName",label:"\u4EFB\u52A1\u8BA1\u5212\u540D\u79F0"},{prop:"schedulerInstanceId",label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8Bid"},{prop:"isStarted",label:"\u662F\u5426\u5F00\u542F"},{prop:"isInStandbyMode",label:"\u662F\u5426\u6302\u8D77"},{prop:"isShutdown",label:"\u662F\u5426\u505C\u6B62"},{prop:"scheduleMetaData.startAt",label:"\u542F\u52A8\u65F6\u95F4"},{prop:"scheduleMetaData.version",label:"\u7248\u672C"},{prop:"scheduleMetaData.schedulerClassName",label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8B\u7C7B",showOverflowTooltip:!0},{prop:"scheduleMetaData.numberOfJobsExecuted",label:"\u5DF2\u6267\u884C\u4EFB\u52A1\u6570"},{prop:"scheduleMetaData.jobStoreClassName",label:"\u4EFB\u52A1\u5B58\u50A8\u7C7B",showOverflowTooltip:!0},{prop:"scheduleMetaData.isJobStoreSupportsPersistence",label:"\u4EFB\u52A1\u5B58\u50A8\u662F\u5426\u652F\u6301\u6301\u4E45\u5316"},{prop:"scheduleMetaData.isJobStoreSupportsPersistence",label:"\u4EFB\u52A1\u5B58\u50A8\u662F\u5426\u96C6\u7FA4\u6A21\u5F0F"},{prop:"scheduleMetaData.threadPoolClassName",label:"\u7EBF\u7A0B\u6C60\u7C7B",showOverflowTooltip:!0},{prop:"scheduleMetaData.threadPoolSize",label:"\u5F53\u524D\u7EBF\u7A0B\u6C60\u7EBF\u7A0B\u6570\u91CF"}]}),m=b({buttonText:"\u67E5\u8BE2",loading:!1,permission:"schedule:getScheduleList"}),a=()=>{h.value.refreshData()},D=({pageQuery:e})=>N({...n.form,...e}),E={permission:m.value.permission},P=({row:e,column:p,$index:c})=>{if(c<0)return[];let o={schedulerName:e.schedulerName,schedulerInstanceId:e.schedulerInstanceId},s={schedulerName:e.schedulerName,schedulerInstanceId:e.schedulerInstanceId,isWaitForJobsToComplete:!0};return[{txt:"\u4EFB\u52A1\u7BA1\u7406",text:!0,permission:"schedule:getJobDetailList",route:{path:"/admin/scheduleJobManagePage",query:o}},{txt:"\u89E6\u53D1\u5668\u7BA1\u7406",text:!0,position:"more",permission:"schedule:getTriggerList",route:{path:"/admin/scheduleTriggerManagePage",query:o}},{txt:"\u5F3A\u5236\u505C\u6B62",text:!0,position:"more",permission:"schedule:shutdown",disabled:!e.isStarted,methodConfirmText:`\u786E\u5B9A\u8981\u5F3A\u5236\u505C\u6B62 ${e.name} \u5417\uFF1F\u6B63\u5728\u6267\u884C\u4E2D\u7684\u4EFB\u52A1\u4F1A\u88AB\u4E2D\u65AD`,method(){return s.isWaitForJobsToComplete=!1,C(s).then(u=>(a(),Promise.resolve(u)))}},{txt:"\u505C\u6B62",text:!0,position:"more",permission:"schedule:shutdown",disabled:!e.isStarted,methodConfirmText:`\u786E\u5B9A\u8981\u5F3A\u5236\u505C\u6B62 ${e.name} \u5417\uFF1F\u64CD\u4F5C\u540E\u4F1A\u7B49\u5F85\u4EFB\u52A1\u5B8C\u6210\u540E\u624D\u80FD\u505C\u6B62`,method(){return s.isWaitForJobsToComplete=!0,C(s).then(u=>(a(),Promise.resolve(u)))}},{txt:"\u6302\u8D77",text:!0,position:"more",permission:"schedule:standby",disabled:e.isInStandbyMode,methodConfirmText:`\u786E\u5B9A\u8981\u6302\u8D77 ${e.name} \u5417\uFF1F`,method(){return M(o).then(u=>(a(),Promise.resolve(u)))}},{txt:"\u542F\u52A8|\u6062\u590D",text:!0,position:"more",permission:"schedule:start",disabled:e.isStarted,methodConfirmText:`\u786E\u5B9A\u8981\u542F\u52A8\u6216\u6062\u590D ${e.name} \u5417\uFF1F\u5F53\u4EFB\u52A1\u505C\u6B62\u6216\u6302\u8D77\u540E\uFF0C\u9700\u8981\u91CD\u65B0\u542F\u52A8\u624D\u80FD\u518D\u6B21\u6267\u884C\u4EFB\u52A1`,method(){return w(o).then(u=>(a(),Promise.resolve(u)))}}]};return(e,p)=>{const c=r("PtForm"),o=r("PtButtonGroup"),s=r("el-table-column"),B=r("PtTable"),u=r("PtRouteViewPopover");return S(),v(T,null,[l(c,{form:n.form,method:a,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:n.formComps},null,8,["form","submitAttrs","comps"]),l(B,{ref_key:"tableRef",ref:h,"default-expand-all":"",dataMethod:D,onDataMethodDataLoading:p[0]||(p[0]=F=>m.value.loading=F),paginationProps:E,columns:n.tableColumns},{defaultAppend:A(()=>[l(s,{label:"\u64CD\u4F5C",width:"180"},{default:A(({row:F,column:g,$index:x})=>[l(o,{options:P({row:F,column:g,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),l(u,{level:3})],64)}}});export{R as default};
