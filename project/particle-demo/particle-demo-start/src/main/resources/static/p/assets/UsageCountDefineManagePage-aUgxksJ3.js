import{p as w,r as x}from"./usageCountCompItem-CHHDl-Mp.js";import{p as h}from"./usageCountDefineManage-PcvbiMuz.js";import{d as B,r as c,a as R,b as o,o as T,c as M,e as n,w as s,f as A,F}from"./index-_8rL1G8m.js";import"./treeQueryComps-CWIG2rsy.js";const q=B({__name:"UsageCountDefineManagePage",setup(U){const p=c(null),r=R({form:{},formComps:h,tableColumns:[{prop:"name",label:"名称"},{prop:"code",label:"编码"},{prop:"urlPattern",label:"url模式"},{prop:"isGroup",label:"是否分组",width:80,formatter:(e,t,a,l)=>a?"分组":"定义"},{prop:"seq",label:"排序"},{prop:"remark",label:"备注"}]}),u=c({buttonText:"查询",loading:!1,permission:"admin:web:usageCountDefine:pageQuery"}),d=()=>{p.value.refreshData()},b=({pageQuery:e})=>w({...r.form,...e}),g={permission:u.value.permission},_=({row:e,column:t,$index:a})=>a<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:usageCountDefine:update",route:{path:"/admin/UsageCountDefineManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:usageCountDefine:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return x({id:e.id}).then(m=>(d(),Promise.resolve(m)))}}];return(e,t)=>{const a=o("PtButton"),l=o("PtForm"),f=o("PtButtonGroup"),m=o("el-table-column"),P=o("PtTable"),C=o("PtRouteViewPopover");return T(),M(F,null,[n(l,{form:r.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"",comps:r.formComps},{buttons:s(()=>[n(a,{permission:"admin:web:usageCountDefine:create",route:"/admin/UsageCountDefineManageAdd"},{default:s(()=>t[1]||(t[1]=[A("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(P,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:t[0]||(t[0]=i=>u.value.loading=i),dataMethodResultHandleConvertToTree:!0,paginationProps:g,columns:r.tableColumns},{defaultAppend:s(()=>[n(m,{label:"操作",width:"180"},{default:s(({row:i,column:D,$index:v})=>[n(f,{options:_({row:i,column:D,$index:v})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(C,{level:3})],64)}}});export{q as default};
