import{h as C,d as S,a as y,r as s,b as I,o as D,c as P,e as f,i as v,F as T,X as w,_ as M}from"./index.b53d3025.js";import{r as R,b as k}from"./dataconstraintCompItem.8ede6a8a.js";import{a as x}from"./dataObjectAdminApi.b3fa6028.js";import{a as L}from"./dataScopeAdminApi.4df033d2.js";let g="/admin/web/data_scope_custom_data_rel";const J=a=>C.post(g+"/dataScope/assign/customData",a),q=a=>C.get(g+"/queryCustomDataIdsByDataScopeId",{params:a}),z=S({name:"DataScopeCustomDataRelManageCustomDataAssignDataScopePage"}),N=S({...z,props:{...R,dataObjectId:{type:String}},setup(a){const r=a;let m=(t,e="success")=>{w({showClose:!0,message:t,type:e,showIcon:!0,grouping:!0})};const u=y({form:{isLazyLoad:!1},formData:{}}),c=s([]),n=s(!1);x({id:r.dataObjectId}).then(t=>{let e=t.data.data;e.customDataUrl||m("\u6570\u636E\u5BF9\u8C61\u672A\u914D\u7F6E\u81EA\u5B9A\u4E49\u6570\u636Eurl","error");let o=t.data.data.customDataConfigJson,h=t.data.data.isCustomDataLazy,d=t.data.data.customDataTypeDictValue,F=t.data.data.customDataTypeDictName;d&&d!="tree_list"&&m(`\u6570\u636E\u5BF9\u8C61\u81EA\u5B9A\u4E49\u6570\u636E\u4EA4\u4E92\u65B9\u5F0F\u4E3A ${F},\u6682\u4E0D\u652F\u6301\uFF0C\u5DF2\u81EA\u52A8\u9002\u914D\u4E3A \u6811\u5F62\u5217\u8868`,"warn"),u.form.isLazyLoad=h;let p=null;o&&(p=JSON.parse(o).treeProps);let _=[k({props:r,required:!0}),{field:{name:"checkedDataIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"\u81EA\u5B9A\u4E49\u6570\u636E",required:!0},compProps:({form:l})=>({dataInitMethod:({param:B})=>{let i=B.dataScopeId;return i?q({id:i}):{data:[]}},dataInitMethodParam:{dataScopeId:l.dataScopeId},dataMethod:()=>L(e.customDataUrl,{}),dataMethodResultHandleConvertToTree:!0,showCheckbox:!0,props:p})}}];c.value=_,n.value=!0});const E=s({buttonText:"\u786E\u8BA4",permission:"admin:web:dataScopeCustomDataRel:dataScopeAssignCustomData"}),A=()=>J,b=()=>"\u5206\u914D\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u6570\u636E\u67E5\u770B";return(t,e)=>{const o=I("PtForm");return D(),P(T,null,[f(" \u6DFB\u52A0\u8868\u5355 "),n.value?(D(),v(o,{key:0,form:u.form,formData:u.formData,labelWidth:"80",method:A(),methodSuccess:b,defaultButtonsShow:"submit,reset",submitAttrs:E.value,buttonsTeleportProps:t.$route.meta.formButtonsTeleportProps,inline:"",layout:1,comps:c.value},null,8,["form","formData","method","submitAttrs","buttonsTeleportProps","comps"])):f("v-if",!0)],2112)}}}),$=M(N,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/dataconstraint/views/admin/DataScopeCustomDataRelManageDataScopeAssignCustomDataPage.vue"]]);export{$ as default};
