import{d as J,r as y,a as I,b as o,o as q,c as L,e as w,f as n,w as p,g as $,F as U,a7 as T,_ as j}from"./index.3ad8a272.js";import{p as K,r as Q,a as W}from"./lowcodeSegmentGenAdminApi.d8f729fc.js";import{p as z}from"./lowcodeSegmentGenManage.911b1c87.js";import"./lowcodeSegmentTemplateAdminApi.15f31907.js";import"./lowcodeModelAdminApi.bf53885e.js";const H=J({name:"LowcodeSegmentGenManagePage"}),X=J({...H,setup(Y){const A=y(null),l=I({form:{},formComps:z,tableColumns:[{label:"\u751F\u6210\u540D\u79F0",prop:"name"},{label:"\u7247\u6BB5\u6A21\u677F\u540D\u79F0",prop:"lowcodeSegmentTemplateName"},{label:"\u6A21\u578B\u540D\u79F0",prop:"lowcodeModelName"},{label:"\u6A21\u578B\u6570\u636E",prop:"lowcodeModelJson",showOverflowTooltip:!0},{label:"\u5168\u5C40\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"globalJson",showOverflowTooltip:!0},{label:"\u6269\u5C55\u6570\u636E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"extJson",showOverflowTooltip:!0},{label:"\u8F93\u51FA\u7EDD\u5BF9\u4F4D\u7F6E(\u6E32\u67D3\u540E\u6709\u503C)",prop:"outputFileParentAbsoluteDir",showOverflowTooltip:!0},{label:"java\u5305key(\u6E32\u67D3\u540E\u6709\u503C)",prop:"javaPackageKeys",showOverflowTooltip:!0},{label:"\u662F\u5426\u751F\u6210",prop:"isGenerated"},{label:"\u751F\u6210\u7C7B\u578B",prop:"generateTypeDictName"},{label:"\u5F15\u7528\u751F\u6210\u540D\u79F0",prop:"refrenceSegmentGenName"},{label:"\u63CF\u8FF0",prop:"remark",showOverflowTooltip:!0}]}),c=y({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:lowcodeSegmentGen:pageQuery"}),g=()=>{A.value.refreshData()},R=({pageQuery:e})=>K({...l.form,...e}),k={permission:c.value.permission},N=({row:e,column:F,$index:D})=>{var G,x,C,h,P,S,v,M;if(D<0)return[];let a={id:e.id},r={id:e.id,refrenceSegmentGenId:e.refrenceSegmentGenId,isGenerated:e.isGenerated},u=[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:lowcodeSegmentGen:update",route:{path:"/admin/lowcodeSegmentGenManageUpdate",query:a}},{txt:"\u5220\u9664",text:!0,permission:"admin:web:lowcodeSegmentGen:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return Q(a).then(B=>(g(),Promise.resolve(B)))}},{txt:"\u91CD\u65B0\u52A0\u8F7D\u6A21\u578Bjson\u6570\u636E",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:reloadLowcodeModelJson",methodConfirmText:`\u8FD9\u5C06\u4F1A\u8986\u76D6\u5F53\u524D\u7684\u6A21\u578Bjson\u6570\u636E\uFF0C\u786E\u5B9A\u8981\u91CD\u65B0\u52A0\u8F7D ${e.name} \u5417\uFF1F`,method(){return W(a).then(B=>(g(),Promise.resolve(B)))}}];const i=T(e.generateTypeDictValue,["backend_module","frontend_module","backend_and_frontend_module"]);i&&u.push({txt:"\u6A21\u5757\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModuleDesignAndGenerate",query:r}});const m=T(e.generateTypeDictValue,["backend_model_service","frontend_model_service","backend_and_frontend_model_service"]);m&&u.push({txt:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",beforeMethod:()=>e.lowcodeModelId>0?!0:"\u6A21\u578B\u670D\u52A1\u8BBE\u8BA1\u4E0E\u6E32\u67D3\u9700\u8981\u8BBE\u7F6E\u6A21\u578B",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenModelServiceDesignAndGenerate",query:r}}),!i&&!m&&u.push({txt:"\u901A\u7528\u8BBE\u8BA1\u548C\u6E32\u67D3",text:!0,position:"more",permission:"admin:web:lowcodeSegmentGen:renderGen",route:{path:"/admin/lowcodeSegmentGenGenericDesignAndGenerate",query:r}});let d=e.globalJson,s=JSON.parse(d)||{},E=e.lowcodeModelJson,t=JSON.parse(E)||{},O=s.moduleNamePackage+"_manage",b=e.name.split("_")[0]+"\u7BA1\u7406",f="1",_=s.moduleName;u.push({txt:"\u6DFB\u52A0\u6839\u529F\u80FD\u83DC\u5355",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u6839\u529F\u80FD\u83DC\u5355",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageAdd",query:{code:O,name:b,funcGroupId:f,typeDictId:"21",componentOf:_}}});let V=((G=t.model)==null?void 0:G.nameEn)+"_manage_page";return u.push({txt:"\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageAdd",query:{code:V,name:b,funcGroupId:f,typeDictId:"22",url:`/admin/${(x=t.model)==null?void 0:x.nameEnEntityVar}ManagePage`,componentOf:_}}}),u.push({txt:"\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762CRUD",text:!0,position:"more",disabled:!e.isGenerated,disabledReason:e.isGenerated?void 0:"\u751F\u6210\u540E\u624D\u53EF\u4EE5\u6DFB\u52A0\u529F\u80FD\u83DC\u5355\u9875\u9762CRUD",permission:"admin:web:func:create",route:{path:"/admin/lowcodeSegmentGen_funcManageCrudAdd",query:{codePrefix:((C=t.model)==null?void 0:C.nameEn)+"_manage_page_",namePrefix:b,permissionPrefix:`admin:web:${(h=t.model)==null?void 0:h.nameEnEntityVar}:`,funcGroupId:f,typeDictId:"1605497232817737729",componentOf:_,createExtPermission:`admin${(P=t.model)==null?void 0:P.nameEnEntity}ManageAdd`,updateExtPermission:`admin${(S=t.model)==null?void 0:S.nameEnEntity}ManageUpdate`,queryPageExtPermission:`admin${(v=t.model)==null?void 0:v.nameEnEntity}ManagePage`,isTree:((M=t.model)==null?void 0:M.tableTypeDictValue)=="TREE"}}}),u};return(e,F)=>{const D=o("PtButton"),a=o("PtForm"),r=o("PtButtonGroup"),u=o("el-table-column"),i=o("PtTable"),m=o("PtRouteViewPopover");return q(),L(U,null,[w(" \u67E5\u8BE2\u8868\u5355 "),n(a,{form:l.form,method:g,defaultButtonsShow:"submit,reset",submitAttrs:c.value,inline:"",comps:l.formComps},{buttons:p(()=>[n(D,{permission:"admin:web:lowcodeSegmentGen:create",route:"/admin/lowcodeSegmentGenManageAdd"},{default:p(()=>[$("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),w(" \u6307\u5B9A dataMethod\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u6570\u636E "),n(i,{ref_key:"tableRef",ref:A,"default-expand-all":"",dataMethod:R,onDataMethodDataLoading:F[0]||(F[0]=d=>c.value.loading=d),paginationProps:k,columns:l.tableColumns},{defaultAppend:p(()=>[n(u,{label:"\u64CD\u4F5C",width:"220"},{default:p(({row:d,column:s,$index:E})=>[n(r,{options:N({row:d,column:s,$index:E}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),w(" \u5B50\u7EA7\u8DEF\u7531 "),n(m,{level:3})],64)}}}),ne=j(X,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/lowcode/views/generator/admin/LowcodeSegmentGenManagePage.vue"]]);export{ne as default};
