import{d as B,r as F,a as P,b as r,o as I,c as v,e as i,f as n,w as a,g as N,F as J,_ as T}from"./index.53bce7bf.js";import{p as y,g as R,d as M,c as j,a as S,r as w,e as V}from"./scheduleJobAdminApi.a95153ac.js";const $=B({name:"ScheduleJobManagePage"}),O=B({...$,props:{schedulerName:{type:String},schedulerInstanceId:{type:String}},setup(E){const p=E,h=F(null),o=P({form:{schedulerName:p.schedulerName,schedulerInstanceId:p.schedulerInstanceId},formComps:y,tableColumns:[{prop:"schedulerName",label:"\u4EFB\u52A1\u8BA1\u5212\u540D\u79F0"},{prop:"schedulerInstanceId",label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8Bid"},{prop:"name",label:"\u4EFB\u52A1\u540D\u79F0"},{prop:"group",label:"\u4EFB\u52A1\u7EC4"},{prop:"cronExpression",label:"cronExpression"},{prop:"isDurable",label:"\u5982\u679C\u6CA1\u6709\u5173\u8054\u89E6\u53D1\u5668\u662F\u5426\u6301\u4E45\u5316"},{prop:"isPersistJobDataAfterExecution",label:"\u6267\u884C\u5B8C\u6210\u662F\u5426\u6301\u4E45\u5316"},{prop:"isConcurrentExectionDisallowed",label:"\u662F\u5426\u4E0D\u5141\u8BB8\u5E76\u884C"},{prop:"isRecovery",label:"\u662F\u5426\u53EF\u6062\u590D"},{prop:"jobClassName",label:"\u7C7B\u540D\u79F0",showOverflowTooltip:!0},{prop:"description",label:"\u63CF\u8FF0"}]}),l=F({buttonText:"\u67E5\u8BE2",loading:!1,permission:"schedule:getJobDetailList"}),s=()=>{h.value.refreshData()},f=({pageQuery:e})=>R({...o.form,...e}),x={permission:l.value.permission},g=({row:e,column:c,$index:m})=>{if(m<0)return[];e.schedulerName,e.schedulerInstanceId;let t={schedulerName:e.schedulerName,schedulerInstanceId:e.schedulerInstanceId,name:e.name,group:e.group};return e.schedulerName,e.schedulerInstanceId,[{txt:"\u7F16\u8F91",text:!0,permission:"schedule:job:update",route:{path:"/admin/scheduleJobManageUpdatePage",query:t}},{txt:"\u5220\u9664",text:!0,position:"more",permission:"schedule:job:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return M(t).then(u=>(s(),Promise.resolve(u)))}},{txt:"\u67E5\u770B\u6267\u884C\u8BB0\u5F55",text:!0,position:"more",permission:"admin:web:schedulerExecuteRecord:pageQuery",route:{path:"/admin/schedulerExecuteRecordManagePage",query:t}},{txt:"\u590D\u5236",text:!0,position:"more",permission:"schedule:job:copy",methodConfirmText:`\u786E\u5B9A\u8981\u590D\u5236 ${e.name} \u5417\uFF1F`,method(){return j(t).then(u=>(s(),Promise.resolve(u)))}},{txt:"\u6682\u505C",text:!0,position:"more",permission:"schedule:job:pause",methodConfirmText:`\u786E\u5B9A\u8981\u6682\u505C ${e.name} \u5417\uFF1F\u4EFB\u52A1\u5173\u8054\u7684\u6240\u6709\u7684\u89E6\u53D1\u5668\u90FD\u4F1A\u88AB\u6682\u505C`,method(){return S(t).then(u=>(s(),Promise.resolve(u)))}},{txt:"\u6062\u590D",text:!0,position:"more",permission:"schedule:job:resume",methodConfirmText:`\u786E\u5B9A\u8981\u6062\u590D ${e.name} \u5417\uFF1F\u4EFB\u52A1\u5173\u8054\u7684\u6240\u6709\u7684\u89E6\u53D1\u5668\u90FD\u4F1A\u88AB\u6062\u590D`,method(){return w(t).then(u=>(s(),Promise.resolve(u)))}},{txt:"\u624B\u52A8\u6267\u884C\u4E00\u6B21",text:!0,position:"more",permission:"schedule:job:executeOnce",methodConfirmText:`\u786E\u5B9A\u8981\u624B\u52A8\u6267\u884C\u4E00\u6B21 ${e.name} \u5417\uFF1F`,method(){return V(t).then(u=>(s(),Promise.resolve(u)))}}]};return(e,c)=>{const m=r("PtButton"),t=r("PtForm"),b=r("PtButtonGroup"),u=r("el-table-column"),A=r("PtTable"),C=r("PtRouteViewPopover");return I(),v(J,null,[i(" \u67E5\u8BE2\u8868\u5355 "),n(t,{form:o.form,method:s,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:o.formComps},{buttons:a(()=>[n(m,{permission:"schedule:job:add",route:{path:"/admin/scheduleJobManageAddPage",query:{schedulerName:o.form.schedulerName,schedulerInstanceId:o.form.schedulerInstanceId}}},{default:a(()=>[N("\u6DFB\u52A0\u4EFB\u52A1")]),_:1},8,["route"])]),_:1},8,["form","submitAttrs","comps"]),i(" \u6307\u5B9A dataMethod\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u6570\u636E "),n(A,{ref_key:"tableRef",ref:h,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:c[0]||(c[0]=d=>l.value.loading=d),paginationProps:x,columns:o.tableColumns},{defaultAppend:a(()=>[n(u,{label:"\u64CD\u4F5C",width:"180"},{default:a(({row:d,column:D,$index:_})=>[n(b,{options:g({row:d,column:D,$index:_}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),i(" \u5B50\u7EA7\u8DEF\u7531 "),n(C,{level:3})],64)}}}),L=T(O,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/scheduler/views/schedule/admin/ScheduleJobManagePage.vue"]]);export{L as default};
