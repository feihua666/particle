import{d as F,r as l,a as P,af as g,b as A,o as x,c as _,e as N,f,u as q,F as D,_ as y}from"./index.b53d3025.js";import{u as B,H as S,i as w,a as Y,b as O,c as W,d as $,e as j}from"./index.esm.min.4e8cefb5.js";import{l as k}from"./ssqCodeOpenedAdminApi.8a818d9d.js";const I=F({name:"SsqCodeOpenedSeqNoTrendPage.vue"}),T=F({...I,setup(L){B([w,Y,O,W,$,j]);const n=l({}),o=P({form:{},formComps:[{field:{name:"openedPhaseYearStart",value:new Date().getFullYear()+""},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u5E74\u4EFD\u5F00\u59CB",tips:"\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"openedPhaseYearEnd"},element:{comp:"PtDatePicker",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u5E74\u4EFD\u7ED3\u675F",tips:"\u4E0D\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"slidingWindowSize",value:4},element:{comp:"el-input-number",formItemProps:{label:"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F",tips:"\u53EF\u8C03\u7528\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F\u4EE5\u5BFB\u627E\u6700\u4F73\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F"},compProps:{}}},{field:{name:"computeObject",value:"seqNo"},element:{comp:"PtSelect",formItemProps:{label:"\u8BA1\u7B97\u5BF9\u8C61",required:!0},compProps:{dataMethod:()=>({data:[{id:"seqNo",name:"\u5E8F\u53F7"},{id:"redSeqNo",name:"\u7EA2\u5E8F\u53F7"},{id:"blue",name:"\u84DD\u7403"}]})}}}]}),b=l({buttonText:"\u8BA1\u7B97",loading:!1,permission:"admin:web:ssqCodeOpened:queryList"}),m=l({}),C=()=>k(o.form).then(e=>{let t=e.data.data;m.value=E[o.form.computeObject];let u=h(t,o.form.slidingWindowSize,m.value);return n.value=u,Promise.resolve(e)});g(()=>{});const E={seqNo:{max:17721008,fieldName:"seqNo",valueFormat:e=>e.toFixed(5)},redSeqNo:{max:1107568,fieldName:"redSeqNo",valueFormat:e=>e.toFixed(5)},blue:{max:16,fieldName:"blue",valueFormat:e=>e.toFixed(5)}},h=(e,t,u)=>{let i=[],d=[];for(let r=t;r<e.length;r++){let p=0,c=[];for(let a=0;a<t;a++){let s=e[r-(t-a-1)][u.fieldName];c.push(s)}p=c.reduce((a,s)=>a+s,0),i.push(e[r].openedPhase),d.push(Number(u.valueFormat(p)))}return v(i,d,"")},v=(e,t,u)=>({myCustom:{},title:{text:u},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},tooltip:{trigger:"axis",show:!0,formatter:"\u548C\u6570\uFF1A{c}<br/>\u671F\u53F7\uFF1A{b}"},xAxis:{type:"category",data:e,axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{data:t,type:"line",label:{show:!0,position:"top",formatter:"{c}"}}]});return(e,t)=>{const u=A("PtForm");return x(),_(D,null,[N(" \u67E5\u8BE2\u8868\u5355 "),f(u,{form:o.form,method:C,defaultButtonsShow:"submit,reset",submitAttrs:b.value,inline:"",labelWidth:"140",comps:o.formComps},null,8,["form","submitAttrs","comps"]),f(q(S),{style:{width:"100%",height:"300px"},option:n.value,autoresize:""},null,8,["option"])],64)}}}),H=y(T,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/dream/views/ssq/admin/SsqCodeOpenedSlidingWindowTrendPage.vue"]]);export{H as default};
