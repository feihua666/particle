import{u as R,p as T,r as h}from"./tenantUserManage-Bl19MKWJ.js";import{d as B,r as f,a as A,b as a,o as U,c as C,e as r,w as m,f as D,F as k}from"./index-_8rL1G8m.js";import"./userCompItem-CsXXKKu7.js";import"./userAdminApi-DZfFHVq4.js";const V=B({__name:"TenantUserManagePage",setup(F){const d=f(null),l=A({form:{},formComps:R({props:{}}),tableColumns:[{prop:"nickname",label:"昵称",showOverflowTooltip:!0},{prop:"name",label:"用户姓名"},{prop:"avatar",label:"头像",columnView:"image"},{prop:"joinAt",label:"加入时间"},{prop:"isExpired",label:"是否过期",formatter:(e,n,t,s)=>{let o=t?"已过期":"正常";return t&&e.expiredReason&&(o=o+`(${e.expiredReason})`),o}},{prop:"expireAt",label:"到期时间"},{prop:"isLeave",label:"是否离职/退出",formatter:(e,n,t,s)=>{let o=t?"离职/退出":"正常";return t&&e.leaveReason&&(o=o+`(${e.leaveReason})`),o}},{prop:"leaveAt",label:"离职/退出时间"},{prop:"isFormal",label:"是否正式",formatter:(e,n,t,s)=>t?"正式":"试用"},{prop:"tenantName",label:"租户名称"}]}),i=f({buttonText:"查询",loading:!1,permission:"admin:web:tenantUser:pageQuery"}),c=()=>{d.value.refreshData()},_=({pageQuery:e})=>T({...l.form,...e}),P={permission:i.value.permission},v=({row:e,column:n,$index:t})=>t<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:tenantUser:update",route:{path:"/admin/TenantUserManageUpdate",query:{...{id:e.id},userId:e.userId,userNickname:e.nickname}}},{txt:"删除",text:!0,permission:"admin:web:tenantUser:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return h({id:e.id}).then(p=>(c(),Promise.resolve(p)))}}];return(e,n)=>{const t=a("PtButton"),s=a("PtForm"),o=a("PtButtonGroup"),b=a("el-table-column"),p=a("PtTable"),x=a("PtRouteViewPopover");return U(),C(k,null,[r(s,{form:l.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:l.formComps},{buttons:m(()=>[r(t,{permission:"admin:web:tenantUser:create",route:"/admin/TenantUserManageAdd"},{default:m(()=>n[1]||(n[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(p,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:n[0]||(n[0]=u=>i.value.loading=u),paginationProps:P,columns:l.tableColumns},{defaultAppend:m(()=>[r(b,{label:"操作",width:"180"},{default:m(({row:u,column:g,$index:w})=>[r(o,{options:v({row:u,column:g,$index:w})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(x,{level:3})],64)}}});export{V as default};
