import{d as S,r,a as y,af as O,b as q,o as z,c as W,e as V,f as p,u as f,j as I,V as j,F as M,bc as $,bd as k,be as L,_ as R}from"./index.49d89bd8.js";import{u as T,H as E,i as H,a as Q,b as U,c as G,d as J,e as K}from"./index.esm.min.c0fe6b49.js";import{p as X}from"./ssqCodeOpenedAdminApi.3736a8ec.js";const Y=S({name:"SsqCodeOpenedSeqNoTrendPage.vue"}),Z=S({...Y,setup(ee){T([H,Q,U,G,J,K]);const b=r({}),C=r({}),g=r({}),v=r({}),P=r({}),B=r([]),l=y({form:{},formComps:[{field:{name:"openedPhaseEnd"},element:{comp:"el-input",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u622A\u6B62",tips:"\u4E0D\u5305\u62EC\u6570\u503C\u672C\u8EAB\uFF0C\u5C06\u6309\u6ED1\u52A8\u7A97\u53E3\u5F80\u524D\u63A8\u6765\u9884\u6D4B,\u4E0D\u586B\u5199\u5C06\u6309\u6700\u65B0\u671F\u53F7"},compProps:{clearable:!0}}},{field:{name:"openedPhasePageSize",value:80},element:{comp:"el-input-number",formItemProps:{label:"\u5F00\u5956\u671F\u53F7\u622A\u6B62\u524D\u6761\u6570"},compProps:{}}},{field:{name:"slidingWindowSize",value:10},element:{comp:"el-input-number",formItemProps:{label:"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F",tips:"\u53EF\u8C03\u7528\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F\u4EE5\u5BFB\u627E\u6700\u4F73\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F"},compProps:{}}},{field:{name:"computeObject",value:"seqNo"},element:{comp:"PtSelect",formItemProps:{label:"\u8BA1\u7B97\u5BF9\u8C61",required:!0},compProps:{dataMethod:()=>({data:[{id:"seqNo",name:"\u5E8F\u53F7"},{id:"redSeqNo",name:"\u7EA2\u5E8F\u53F7"},{id:"blue",name:"\u84DD\u7403"}]})}}},{field:{name:"slidingWindowSize1",value:4},element:{comp:"el-input-number",formItemProps:{label:"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F1",tips:"\u53EF\u8C03\u7528\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F\u4EE5\u5BFB\u627E\u6700\u4F73\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F"},compProps:{}}},{field:{name:"slidingWindowSize2",value:6},element:{comp:"el-input-number",formItemProps:{label:"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F2",tips:"\u53EF\u8C03\u7528\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F\u4EE5\u5BFB\u627E\u6700\u4F73\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F"},compProps:{}}},{field:{name:"predictionNum",value:10},element:{comp:"el-input-number",formItemProps:{label:"\u9884\u6D4B\u6570\u91CF"},compProps:{}}},{field:{name:"predictionScopeStart",value:10},element:{comp:"el-input-number",formItemProps:{label:"\u9884\u6D4B\u533A\u95F4\u5F00\u59CB",tips:"\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{}}},{field:{name:"predictionScopeEnd",value:10},element:{comp:"el-input-number",formItemProps:{label:"\u9884\u6D4B\u533A\u95F4\u7ED3\u675F",tips:"\u5305\u62EC\u6570\u503C\u672C\u8EAB"},compProps:{}}}]}),w=r({buttonText:"\u8BA1\u7B97",loading:!1,permission:"admin:web:ssqCodeOpened:pageQuery"}),F=r({}),N=()=>{let a={pageNo:1,pageSize:l.form.openedPhasePageSize,orderBy:"openedPhase-0",openedPhaseEnd:l.form.openedPhaseEnd};return X(a).then(n=>{let o=n.data.data;F.value=_[l.form.computeObject],o=$(o);let u=D(o,l.form.slidingWindowSize,F.value),t=d(u.xAxisData,u.seriesData,"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F");b.value=t,o=[];let A=l.form.computeObject;for(let e=0;e<u.xAxisData.length;e++){let s={openedPhase:u.xAxisData[e]};s[A]=u.seriesData[e],o.push(s)}u=D(o,l.form.slidingWindowSize1,F.value),t=d(u.xAxisData,u.seriesData,"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F1"),C.value=t,o=[];for(let e=0;e<u.xAxisData.length;e++){let s={openedPhase:u.xAxisData[e]};s[A]=u.seriesData[e],o.push(s)}u=D(o,l.form.slidingWindowSize2,F.value),t=d(u.xAxisData,u.seriesData,"\u6ED1\u52A8\u7A97\u53E3\u5927\u5C0F2"),g.value=t,B.value=u.seriesData;let h=[],m=[];for(let e=1;e<u.xAxisData.length;e++)m.push(Math.abs(u.seriesData[e]-u.seriesData[e-1])),h.push(u.xAxisData[e]);t=d(h,m,"\u5DEE\u503C"),v.value=t;let i=[],c=[];for(let e=1;e<u.xAxisData.length;e++)c.push(Math.abs(m[e]-m[e-1])),i.push(h[e]);return t=d(i,c,"\u5DEE\u503C\u7684\u5DEE\u503C"),P.value=t,Promise.resolve(n)})};O(()=>{});const _={seqNo:{max:17721008,fieldName:"seqNo",valueFormat:a=>a.toFixed(5)},redSeqNo:{max:1107568,fieldName:"redSeqNo",valueFormat:a=>a.toFixed(5)},blue:{max:16,fieldName:"blue",valueFormat:a=>a.toFixed(5)}},D=(a,n,o)=>{let u=[],t=[];for(let i=n;i<a.length;i++){let c=0,e=[];for(let s=0;s<n;s++){let x=a[i-(n-s-1)][o.fieldName];e.push(x)}c=e.reduce((s,x)=>s+x,0),u.push(a[i].openedPhase),t.push(Number(o.valueFormat(c)))}let A=k(t),m=(L(t)+A)/2;for(let i=0;i<t.length;i++)t[i]=Number((t[i]-m).toFixed(5));return{xAxisData:u,seriesData:t}},d=(a,n,o)=>({myCustom:{},title:{text:o},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},tooltip:{trigger:"axis",show:!0,formatter:"\u548C\u6570\uFF1A{c}<br/>\u671F\u53F7\uFF1A{b}"},xAxis:{type:"category",data:a,axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{data:n,type:"line",label:{show:!0,position:"top",formatter:"{c}"}}]});return(a,n)=>{const o=q("PtForm");return z(),W(M,null,[V(" \u67E5\u8BE2\u8868\u5355 "),p(o,{form:l.form,method:N,defaultButtonsShow:"submit,reset",submitAttrs:w.value,inline:"",comps:l.formComps},null,8,["form","submitAttrs","comps"]),p(f(E),{style:{width:"100%",height:"300px"},option:b.value,autoresize:""},null,8,["option"]),p(f(E),{style:{width:"100%",height:"300px"},option:C.value,autoresize:""},null,8,["option"]),p(f(E),{style:{width:"100%",height:"300px"},option:g.value,autoresize:""},null,8,["option"]),p(f(E),{style:{width:"100%",height:"300px"},option:v.value,autoresize:""},null,8,["option"]),p(f(E),{style:{width:"100%",height:"300px"},option:P.value,autoresize:""},null,8,["option"]),I("div",null,j(B.value),1)],64)}}}),ae=R(Z,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/dream/views/ssq/admin/SsqCodeOpenedSlidingWindowPredictionPage.vue"]]);export{ae as default};
