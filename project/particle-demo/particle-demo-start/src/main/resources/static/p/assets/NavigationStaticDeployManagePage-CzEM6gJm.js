import{p as w,a as x,r as h}from"./navigationStaticDeployManage-B-4bGv3x.js";import{d as S,r as b,a as B,b as o,o as T,c as C,e as a,w as l,f as R,F as A}from"./index-B_FSv1tI.js";const F=S({__name:"NavigationStaticDeployManagePage",setup(M){const u=b(null),r=B({form:{},formComps:w,tableColumns:[{prop:"code",label:"部署编码"},{prop:"name",label:"部署名称"},{prop:"frontDomain",label:"域名地址",showOverflowTooltip:!0},{prop:"frontContextPath",label:"子一级路径"},{prop:"frontSubContextPath",label:"子二级路径"},{prop:"isPureStaticDeploy",label:"是否纯静态部署",formatter:(t,e,n,i)=>n?"纯静态部署":"半静态部署"},{prop:"deployPath",label:"部署路径",showOverflowTooltip:!0},{prop:"deployPostGroovyScript",label:"部署后脚本",showOverflowTooltip:!0},{prop:"lastDeployAt",label:"上一次部署时间"},{prop:"remark",label:"描述"}]}),p=b({buttonText:"查询",loading:!1,permission:"admin:web:navigationStaticDeploy:pageQuery"}),d=()=>{u.value.refreshData()},f=({pageQuery:t})=>x({...r.form,...t}),g={permission:p.value.permission},v=({row:t,column:e,$index:n})=>{if(n<0)return[];let i={id:t.id};return[{txt:"部署",text:!0,disabled:t.code=="backend_static_deploy",disabledReason:t.code=="backend_static_deploy"?"该数据为系统后端动态配置，不支持部署":void 0,permission:"admin:web:navigationStaticDeploy:deploy",route:{path:"/admin/NavigationStaticDeployManageDeploy",query:i}},{txt:"编辑",text:!0,position:"more",permission:"admin:web:navigationStaticDeploy:update",route:{path:"/admin/NavigationStaticDeployManageUpdate",query:i}},{txt:"删除",text:!0,position:"more",permission:"admin:web:navigationStaticDeploy:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return h({id:t.id}).then(s=>(d(),Promise.resolve(s)))}}]};return(t,e)=>{const n=o("PtButton"),i=o("PtForm"),c=o("PtButtonGroup"),s=o("el-table-column"),_=o("PtTable"),y=o("PtRouteViewPopover");return T(),C(A,null,[a(i,{form:r.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",comps:r.formComps},{buttons:l(()=>[a(n,{permission:"admin:web:navigationStaticDeploy:create",route:"/admin/NavigationStaticDeployManageAdd"},{default:l(()=>e[1]||(e[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(_,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:e[0]||(e[0]=m=>p.value.loading=m),paginationProps:g,columns:r.tableColumns},{defaultAppend:l(()=>[a(s,{label:"操作",width:"180"},{default:l(({row:m,column:P,$index:D})=>[a(c,{options:v({row:m,column:P,$index:D}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(y,{level:3})],64)}}});export{F as default};
