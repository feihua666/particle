import{p as x,r as h}from"./funcApplicationAdminApi-D1dArKYs.js";import{p as T}from"./funcApplicationManage-DumhOsUm.js";import{d as F,r as b,a as R,b as a,o as B,c as C,e as i,w as l,f as D,F as M}from"./index-B_FSv1tI.js";import"./treeQueryComps-CWIG2rsy.js";const q=F({__name:"FuncApplicationManagePage",setup(y){const c=b(null),r=R({form:{},formComps:T,tableColumns:[{prop:"code",label:"应用编码"},{prop:"name",label:"应用名称"},{prop:"parentName",label:"父级"},{prop:"isGroup",label:"是否分组",formatter:(t,o,e,p)=>e?"应用组":"应用"},{prop:"applicationLogoUrl",label:"应用logo",columnView:"image"},{prop:"applicationIconUrl",label:"应用图标",columnView:"image"},{prop:"isDisabled",label:"是否禁用",formatter:(t,o,e,p)=>{let n=e?"禁用":"启用";return e&&t.disabledReason&&(n=n+`(${t.disabledReason})`),n}},{prop:"applicationTheme",label:"应用主题",showOverflowTooltip:!0},{prop:"applicationDefaultRoute",label:"默认路由",showOverflowTooltip:!0},{prop:"configJson",label:"配置json",showOverflowTooltip:!0},{prop:"seq",label:"排序"},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),s=b({buttonText:"查询",loading:!1,permission:"admin:web:funcApplication:pageQuery"}),d=()=>{c.value.refreshData()},g=({pageQuery:t})=>x({...r.form,...t}),A={permission:s.value.permission},_=({row:t,column:o,$index:e})=>{if(e<0)return[];let p={id:t.id};return[{txt:"分配功能",text:!0,permission:"admin:web:funcApplicationFuncRel:funcApplicationAssignFunc",route:{path:"/admin/funcApplicationAssignFunc",query:{funcApplicationId:t.id,funcApplicationName:t.name}}},{txt:"编辑",position:"more",text:!0,permission:"admin:web:funcApplication:update",route:{path:"/admin/FuncApplicationManageUpdate",query:p}},{txt:"删除",position:"more",text:!0,permission:"admin:web:funcApplication:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return h({id:t.id}).then(u=>(d(),Promise.resolve(u)))}}]};return(t,o)=>{const e=a("PtButton"),p=a("PtForm"),n=a("PtButtonGroup"),f=a("el-table-column"),u=a("PtTable"),w=a("PtRouteViewPopover");return B(),C(M,null,[i(p,{form:r.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:r.formComps},{buttons:l(()=>[i(e,{permission:"admin:web:funcApplication:create",route:"/admin/FuncApplicationManageAdd"},{default:l(()=>o[1]||(o[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),i(u,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:g,onDataMethodDataLoading:o[0]||(o[0]=m=>s.value.loading=m),dataMethodResultHandleConvertToTree:!0,paginationProps:A,columns:r.tableColumns},{defaultAppend:l(()=>[i(f,{label:"操作",width:"220"},{default:l(({row:m,column:P,$index:v})=>[i(n,{options:_({row:m,column:P,$index:v}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),i(w,{level:3})],64)}}});export{q as default};
