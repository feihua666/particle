import{h as F,d as C,r as B,a as v,b as n,o as A,c as I,e as m,f as s,w as D,F as T,_ as L}from"./index.3ad8a272.js";import{p as y}from"./opLogAdminApi.5da6d902.js";let _="/admin/web/op_log_audit_data";const x=e=>F.delete(_+"/delete",{data:e}),O=e=>F.get(_+"/page",{params:e}),R={opLogId:{type:String},opLogName:String},M=({props:e,required:l=!1,fieldName:r="opLogId",propOpLogIdFieldName:o="opLogId",propOpLogNicknameFieldName:u="opLogName",label:p="\u64CD\u4F5C\u65E5\u5FD7",valueChange:i=()=>{}})=>({field:{name:r,value:e[o],valueChange:i},element:{comp:"PtSelect",formItemProps:{label:p,required:l},compProps:()=>{let a=!!(e[o]&&e[u]);return{placeholder:"\u8F93\u5165\u64CD\u4F5C\u540D\u79F0",disabled:a,dataMethod:()=>a?{data:[{id:e[o],name:e[u]}]}:{data:[]},remote:!a,remoteMethod:t=>t?y({name:t}):{data:[]},props:{label:"name"}}}}}),V=({props:e})=>[{field:{name:"name"},element:{comp:"el-input",formItemProps:{label:"\u5B57\u6BB5\u540D\u79F0"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D\uFF0C\u5982\uFF1A\u6635\u79F0"}}},{field:{name:"propertyName"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u5B57\u6BB5"},compProps:{clearable:!0,placeholder:"\u5DE6\u524D\u7F00\u5339\u914D\uFF0C\u5982\uFF1Anickname"}}},{field:{name:"oldValue"},element:{comp:"el-input",formItemProps:{label:"\u65E7\u503C"},compProps:{clearable:!0}}},{field:{name:"newValue"},element:{comp:"el-input",formItemProps:{label:"\u65B0\u503C"},compProps:{clearable:!0}}},{field:{name:"changeTypeDictId"},element:{comp:"PtDictFrontSelect",formItemProps:{label:"\u503C\u6539\u53D8\u7C7B\u578B\u5B57\u5178"},compProps:{dictParam:{groupCode:"op_log_audit_data_change_type"}}}},{field:{name:"changeType"},element:{comp:"el-input",formItemProps:{label:"\u503C\u6539\u53D8\u7C7B\u578B"},compProps:{clearable:!0,placeholder:"\u5982\uFF1APROPERTY_VALUE_CHANGED"}}},{field:{name:"typeDictId"},element:{comp:"PtDictFrontSelect",formItemProps:{label:"\u7C7B\u578B\u5BF9\u5E94\u7684\u5B57\u5178"},compProps:{dictParam:{groupCode:"op_log_type"}}}},{field:{name:"type"},element:{comp:"el-input",formItemProps:{label:"\u7C7B\u578B"},compProps:{clearable:!0,placeholder:"\u5982\uFF1Acreate"}}},{field:{name:"dataId"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636Eid"},compProps:{}}},{field:{name:"dataTable"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u8868\u540D"},compProps:{clearable:!0}}},{field:{name:"dataEntity"},element:{comp:"el-input",formItemProps:{label:"\u6570\u636E\u8F7D\u4F53"},compProps:{clearable:!0}}},M({props:e})],S=C({name:"OpLogAuditDataManagePage"}),N=C({...S,props:{...R},setup(e){const l=e,r=B(null),o=v({form:{opLogId:l.opLogId},formComps:V({props:l}),tableColumns:[{prop:"name",label:"\u5B57\u6BB5\u540D\u79F0",showOverflowTooltip:!0},{prop:"propertyName",label:"\u6570\u636E\u5B57\u6BB5",showOverflowTooltip:!0},{prop:"oldValue",label:"\u65E7\u503C",showOverflowTooltip:!0},{prop:"newValue",label:"\u65B0\u503C",showOverflowTooltip:!0},{prop:"changeTypeDictName",label:"\u503C\u6539\u53D8\u7C7B\u578B\u5B57\u5178"},{prop:"dataId",label:"\u6570\u636Eid",showOverflowTooltip:!0},{prop:"dataTable",label:"\u6570\u636E\u8868\u540D",showOverflowTooltip:!0},{prop:"dataEntity",label:"\u6570\u636E\u8F7D\u4F53",showOverflowTooltip:!0},{prop:"opLogName",label:"\u64CD\u4F5C\u65E5\u5FD7",showOverflowTooltip:!0}]}),u=B({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:opLogAuditData:pageQuery"}),p=()=>{r.value.refreshData()},i=({pageQuery:t})=>O({...o.form,...t}),a={permission:u.value.permission},P=({row:t,column:c,$index:d})=>d<0?[]:(t.id,[{txt:"\u5220\u9664",text:!0,permission:"admin:web:opLogAuditData:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${t.name} \u5417\uFF1F`,method(){return x({id:t.id}).then(f=>(p(),Promise.resolve(f)))}}]);return(t,c)=>{const d=n("PtForm"),g=n("PtButtonGroup"),f=n("el-table-column"),h=n("PtTable");return A(),I(T,null,[m(" \u67E5\u8BE2\u8868\u5355 "),s(d,{form:o.form,method:p,defaultButtonsShow:"submit,reset",submitAttrs:u.value,inline:"","label-width":"120",comps:o.formComps},null,8,["form","submitAttrs","comps"]),m(" \u6307\u5B9A dataMethod\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u6570\u636E "),s(h,{ref_key:"tableRef",ref:r,"default-expand-all":"",dataMethod:i,onDataMethodDataLoading:c[0]||(c[0]=b=>u.value.loading=b),paginationProps:a,columns:o.tableColumns},{defaultAppend:D(()=>[s(f,{label:"\u64CD\u4F5C",width:"80"},{default:D(({row:b,column:w,$index:E})=>[s(g,{options:P({row:b,column:w,$index:E})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),m(" \u5B50\u7EA7\u8DEF\u7531 "),m('  <PtRouteViewPopover :level="3"></PtRouteViewPopover>')],64)}}}),U=L(N,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/oplog/views/admin/OpLogAuditDataManagePage.vue"]]);export{U as default};
