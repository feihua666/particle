import{h as d,d as B,r as E,a as T,b as r,o as x,c as v,e as i,f as o,w as f,F as N,_ as S}from"./index.3ad8a272.js";const M=[{field:{name:"schedulerName"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"schedulerInstanceId"},element:{comp:"el-input",formItemProps:{label:"\u4EFB\u52A1\u8BA1\u5212\u5B9E\u4F8Bid"},compProps:{clearable:!0}}},{field:{name:"name"},element:{comp:"el-input",formItemProps:{label:"\u89E6\u53D1\u5668\u540D\u79F0"},compProps:{clearable:!0}}},{field:{name:"group"},element:{comp:"el-input",formItemProps:{label:"\u89E6\u53D1\u5668\u7EC4"},compProps:{clearable:!0}}}];let g="/admin/web/schedule/trigger";const R=u=>d.post(g+"/pauseTrigger",u),w=u=>d.post(g+"/resumeTrigger",u),y=u=>d.get(g+"/getTriggerList",{params:u}),L=B({name:"ScheduleTriggerManagePage"}),O=B({...L,props:{schedulerName:{type:String},schedulerInstanceId:{type:String}},setup(u){const b=u,h=E(null),s=T({form:{schedulerName:b.schedulerName,schedulerInstanceId:b.schedulerInstanceId},formComps:M,tableColumns:[{prop:"name",label:"\u4EFB\u52A1\u540D\u79F0"},{prop:"group",label:"\u4EFB\u52A1\u7EC4"},{prop:"cronExpression",label:"cronExpression"},{prop:"triggerState",label:"\u72B6\u6001"},{prop:"triggerClassName",label:"\u7C7B\u540D\u79F0",showOverflowTooltip:!0},{prop:"calendarName",label:"\u65E5\u5386\u540D\u79F0"},{prop:"priority",label:"\u4F18\u5148\u7EA7"},{prop:"isMayFireAgain",label:"\u662F\u5426\u53EF\u4EE5\u518D\u6B21\u89E6\u53D1"},{prop:"startAt",label:"\u5F00\u59CB\u4E8E"},{prop:"endAt",label:"\u7ED3\u675F\u4E8E"},{prop:"nextFireAt",label:"\u4E0B\u4E00\u6B21\u89E6\u53D1\u65F6\u95F4"},{prop:"previousFireAt",label:"\u4E0A\u4E00\u6B21\u89E6\u53D1\u65F6\u95F4"},{prop:"finalFireAt",label:"\u6700\u540E\u89E6\u53D1\u65F6\u95F4"},{prop:"misfireInstruction",label:"\u5931\u706B\u8BF4\u660E"},{prop:"description",label:"\u63CF\u8FF0\u4FE1\u606F",showOverflowTooltip:!0}]}),l=E({buttonText:"\u67E5\u8BE2",loading:!1,permission:"schedule:getTriggerList"}),n=()=>{h.value.refreshData()},P=({pageQuery:e})=>y({...s.form,...e}),A={permission:l.value.permission},I=({row:e,column:p,$index:m})=>{if(m<0)return[];e.schedulerName,e.schedulerInstanceId;let a={schedulerName:e.schedulerName,schedulerInstanceId:e.schedulerInstanceId,name:e.name,group:e.group};return e.schedulerName,e.schedulerInstanceId,[{txt:"\u6682\u505C",text:!0,permission:"schedule:trigger:pause",disabled:e.triggerState!="NORMAL",methodConfirmText:`\u786E\u5B9A\u8981\u6682\u505C ${e.name} \u5417\uFF1F`,method(){return R(a).then(t=>(n(),Promise.resolve(t)))}},{txt:"\u6062\u590D",text:!0,permission:"schedule:trigger:resume",disabled:e.triggerState!="PAUSED",methodConfirmText:`\u786E\u5B9A\u8981\u590D\u5236 ${e.name} \u5417\uFF1F`,method(){return w(a).then(t=>(n(),Promise.resolve(t)))}}]};return(e,p)=>{const m=r("PtForm"),a=r("PtButtonGroup"),F=r("el-table-column"),t=r("PtTable"),_=r("PtRouteViewPopover");return x(),v(N,null,[i(" \u67E5\u8BE2\u8868\u5355 "),o(m,{form:s.form,method:n,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:s.formComps},null,8,["form","submitAttrs","comps"]),i(" \u6307\u5B9A dataMethod\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u6570\u636E "),o(t,{ref_key:"tableRef",ref:h,"default-expand-all":"",dataMethod:P,onDataMethodDataLoading:p[0]||(p[0]=c=>l.value.loading=c),paginationProps:A,columns:s.tableColumns},{defaultAppend:f(()=>[o(F,{label:"\u64CD\u4F5C",width:"180"},{default:f(({row:c,column:D,$index:C})=>[o(a,{options:I({row:c,column:D,$index:C}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),i(" \u5B50\u7EA7\u8DEF\u7531 "),o(_,{level:3})],64)}}}),k=S(O,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/scheduler/views/schedule/admin/ScheduleTriggerManagePage.vue"]]);export{k as default};
