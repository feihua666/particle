import{d as g,r as _,a as B,b as a,o as P,c as x,e as f,f as u,w as s,g as v,F as D,_ as C}from"./index.b53d3025.js";import{p as T,r as M}from"./openplatformOpenapiCompItem.2c550ff6.js";import{p as R}from"./openplatformOpenapiManage.0911d24f.js";import"./openplatformOpenapiFeeCompItem.a7347fe0.js";import"./openplatformOpenapiFeeAdminApi.962df136.js";import"./treeQueryComps.5854cd36.js";import"./openplatformProviderCompItem.25410c3e.js";import"./openplatformProviderAdminApi.b1e84d37.js";const y=g({name:"OpenplatformOpenapiManagePage"}),q=g({...y,setup(N){const c=_(null),p=B({form:{},formComps:R,tableColumns:[{prop:"name",label:"\u540D\u79F0",width:"250",showOverflowTooltip:!0},{prop:"code",label:"\u7F16\u7801"},{prop:"isGroup",label:"\u662F\u5426\u4E3A\u7EC4",formatter:(e,n,t,l)=>t?"\u5206\u7EC4":"\u63A5\u53E3"},{prop:"permissions",label:"\u63A5\u53E3\u6743\u9650\u7801",showOverflowTooltip:!0},{prop:"url",label:"\u63A5\u53E3\u5730\u5740",showOverflowTooltip:!0},{prop:"isDisabled",label:"\u662F\u5426\u7981\u7528",formatter:(e,n,t,l)=>{let o=t?"\u7981\u7528":"\u542F\u7528";return t&&e.disabledReason&&(o=o+`(${e.disabledReason})`),o}},{prop:"defaultOpenplatformOpenapiFeeName",label:"\u9ED8\u8BA4\u8BA1\u8D39\u89C4\u5219"},{prop:"parentName",label:"\u7236\u7EA7"},{prop:"remark",label:"\u63CF\u8FF0",showOverflowTooltip:!0}]}),m=_({buttonText:"\u67E5\u8BE2",loading:!1,permission:"admin:web:openplatformOpenapi:pageQuery"}),b=()=>{c.value.refreshData()},F=({pageQuery:e})=>T({...p.form,...e}),O={permission:m.value.permission},A=({row:e,column:n,$index:t})=>{if(t<0)return[];let o=[{txt:"\u7F16\u8F91",text:!0,permission:"admin:web:openplatformOpenapi:update",route:{path:"/admin/OpenplatformOpenapiManageUpdate",query:{id:e.id}}},{txt:"\u5220\u9664",text:!0,position:"more",permission:"admin:web:openplatformOpenapi:delete",methodConfirmText:`\u786E\u5B9A\u8981\u5220\u9664 ${e.name} \u5417\uFF1F`,method(){return M({id:e.id}).then(r=>(b(),Promise.resolve(r)))}}],i="/openapi/dq";if(e.url&&e.url.indexOf(i)==0){let r={dqUrl:e.url.replace(i,"")};o.push({txt:"\u67E5\u770B\u67E5\u8BE2\u63A5\u53E3",text:!0,position:"more",permission:"admin:web:dataQueryDataApi:pageQuery",route:{path:"/admin/dataQueryDataApiManagePage",query:r}})}return o};return(e,n)=>{const t=a("PtButton"),l=a("PtForm"),o=a("PtButtonGroup"),i=a("el-table-column"),r=a("PtTable"),h=a("PtRouteViewPopover");return P(),x(D,null,[f(" \u67E5\u8BE2\u8868\u5355 "),u(l,{form:p.form,labelWidth:"120",method:b,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:p.formComps},{buttons:s(()=>[u(t,{permission:"admin:web:openplatformOpenapi:create",route:"/admin/OpenplatformOpenapiManageAdd"},{default:s(()=>[v("\u6DFB\u52A0")]),_:1})]),_:1},8,["form","submitAttrs","comps"]),f(" \u6307\u5B9A dataMethod\uFF0C\u9ED8\u8BA4\u52A0\u8F7D\u6570\u636E "),u(r,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:F,onDataMethodDataLoading:n[0]||(n[0]=d=>m.value.loading=d),dataMethodResultHandleConvertToTree:!0,paginationProps:O,columns:p.tableColumns},{defaultAppend:s(()=>[u(i,{label:"\u64CD\u4F5C",width:"180"},{default:s(({row:d,column:E,$index:w})=>[u(o,{options:A({row:d,column:E,$index:w}),dropdownTriggerButtonOptions:{text:!0,buttonText:"\u66F4\u591A"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),f(" \u5B50\u7EA7\u8DEF\u7531 "),u(h,{level:3})],64)}}}),L=C(q,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/openplatform/views/openapi/admin/OpenplatformOpenapiManagePage.vue"]]);export{L as default};
