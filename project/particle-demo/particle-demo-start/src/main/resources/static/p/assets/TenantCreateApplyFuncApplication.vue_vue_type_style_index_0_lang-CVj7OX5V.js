import{l as b}from"./funcApplicationAdminApi-Aocr2ebF.js";import{d as h,a as y,r as i,p as k,b as s,o as p,g as _,w as r,c as C,F as D,B as S,aj as x,e as A,f as P,C as T}from"./index-_8rL1G8m.js";import{r as B,a as N}from"./funcApplicationCompItem-DqXLMCK8.js";const V=h({__name:"TenantCreateApplyFuncApplicationAssignFunc",props:{...B,limitFuncApplicationId:{type:String},checkedFuncIds:{type:Array,default:()=>[]}},setup(u,{expose:d}){const o=u,n=y({form:{},formData:{}}),c=i([N({props:o,required:!0}),{field:{name:"funcIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"功能",required:!0},compProps:({form:l})=>({dataInitMethod:()=>({data:o.checkedFuncIds}),dataMethod:()=>k({funcApplicationId:o.limitFuncApplicationId}),dataMethodResultHandleConvertToTree:!0,showCheckbox:!0})}}]);return d({form:n.form}),(l,m)=>{const f=s("PtForm");return p(),_(f,{form:n.form,formData:n.formData,labelWidth:"80",defaultButtonsShow:"",inline:"",layout:1,comps:c.value},null,8,["form","formData","comps"])}}}),j=h({__name:"TenantCreateApplyFuncApplication",props:{initSelectedData:{type:Array,default:()=>[]}},setup(u,{expose:d}){const o=i([]),n=i(""),c=i(null),l=u,m=t=>{if(l.initSelectedData.length==0)return[];for(let e=0;e<l.initSelectedData.length;e++)if(l.initSelectedData[e].funcApplicationId==t)return l.initSelectedData[e].funcIds;return[]};b({}).then(t=>{o.value=t.data.data,n.value=t.data.data[0].code});const f=()=>{let t=[];for(let e=0;e<c.value.length;e++)c.value[e].form.funcIds.length!=0&&t.push(c.value[e].form);return t},F=t=>t?t.length==0:!0;return d({getSelectedData:f}),(t,e)=>{const g=s("el-badge"),I=s("el-tab-pane"),v=s("el-tabs");return p(),_(v,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a)},{default:r(()=>[(p(!0),C(D,null,S(o.value,a=>(p(),_(I,{key:a.id,label:a.name,name:a.code},x({default:r(()=>[A(V,{ref_for:!0,ref_key:"funcApplicationAssignFuncRef",ref:c,funcApplicationId:a.id,funcApplicationName:a.name,limitFuncApplicationId:a.id,checkedFuncIds:m(a.id)},null,8,["funcApplicationId","funcApplicationName","limitFuncApplicationId","checkedFuncIds"])]),_:2},[F(m(a.id))?void 0:{name:"label",fn:r(()=>[A(g,{type:"success","is-dot":"",class:"pt-message-template-content-detail-json-badge"},{default:r(()=>[P(T(a.name),1)]),_:2},1024)]),key:"0"}]),1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}});export{j as _};
