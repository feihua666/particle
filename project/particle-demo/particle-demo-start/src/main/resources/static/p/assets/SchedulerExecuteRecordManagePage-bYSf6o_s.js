import{i as P,d as R,r as b,a as A,b as o,o as C,c as S,e as l,w as f,F as B}from"./index-B_FSv1tI.js";let h="/admin/web/scheduler_execute_record";const T=t=>P.delete(h+"/delete",{data:t}),y=t=>P.get(h+"/page",{params:t}),D=[{field:{name:"schedulerName"},element:{comp:"el-input",formItemProps:{label:"schedulerName"},compProps:{clearable:!0}}},{field:{name:"schedulerInstanceId"},element:{comp:"el-input",formItemProps:{label:"schedulerInstanceId"},compProps:{clearable:!0}}},{field:{name:"name"},element:{comp:"el-input",formItemProps:{label:"任务名称"},compProps:{clearable:!0}}},{field:{name:"groupName"},element:{comp:"el-input",formItemProps:{label:"任务组"},compProps:{clearable:!0}}},{field:{name:"executeStatusDictId"},element:{comp:"el-input",formItemProps:{label:"执行状态"},compProps:{clearable:!0,dictParam:{groupCode:"这里填写字典组编码"}}}},{field:{name:"startAt"},element:{comp:"el-input",formItemProps:{label:"运行开始时间"},compProps:{}}},{field:{name:"finishAt"},element:{comp:"el-input",formItemProps:{label:"运行结束时间"},compProps:{}}},{field:{name:"localHostIp"},element:{comp:"el-input",formItemProps:{label:"本地主机ip"},compProps:{clearable:!0}}},{field:{name:"localHostName"},element:{comp:"el-input",formItemProps:{label:"本地主机名称"},compProps:{clearable:!0}}},{field:{name:"traceId"},element:{comp:"el-input",formItemProps:{label:"链路追踪id"},compProps:{clearable:!0}}}],F=R({__name:"SchedulerExecuteRecordManagePage",props:{schedulerName:{type:String},schedulerInstanceId:{type:String},name:{type:String},group:{type:String}},setup(t){const r=t,u=b(null),a=A({form:{schedulerName:r.schedulerName,schedulerInstanceId:r.schedulerInstanceId,name:r.name,groupName:r.group},formComps:D,tableColumns:[{prop:"schedulerName",label:"schedulerName"},{prop:"schedulerInstanceId",label:"schedulerInstanceId"},{prop:"name",label:"任务名称"},{prop:"groupName",label:"任务组"},{prop:"params",label:"执行参数",showOverflowTooltip:!0},{prop:"executeStatusDictName",label:"执行状态"},{prop:"startAt",label:"运行开始时间"},{prop:"finishAt",label:"运行结束时间"},{prop:"localHostIp",label:"本地主机ip"},{prop:"localHostName",label:"本地主机名称"},{prop:"traceId",label:"链路追踪id"},{prop:"result",label:"运行结果",showOverflowTooltip:!0}]}),n=b({buttonText:"查询",loading:!1,permission:"admin:web:schedulerExecuteRecord:pageQuery"}),i=()=>{u.value.refreshData()},I=({pageQuery:e})=>y({...a.form,...e}),g={permission:n.value.permission},_=({row:e,column:m,$index:p})=>p<0?[]:(e.id,[{txt:"删除",text:!0,permission:"admin:web:schedulerExecuteRecord:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return T({id:e.id}).then(s=>(i(),Promise.resolve(s)))}}]);return(e,m)=>{const p=o("PtForm"),d=o("PtButtonGroup"),s=o("el-table-column"),x=o("PtTable"),v=o("PtRouteViewPopover");return C(),S(B,null,[l(p,{form:a.form,method:i,defaultButtonsShow:"submit,reset",submitAttrs:n.value,inline:"",labelWidth:"110",comps:a.formComps},null,8,["form","submitAttrs","comps"]),l(x,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:I,onDataMethodDataLoading:m[0]||(m[0]=c=>n.value.loading=c),paginationProps:g,columns:a.tableColumns},{defaultAppend:f(()=>[l(s,{label:"操作",width:"80"},{default:f(({row:c,column:w,$index:N})=>[l(d,{options:_({row:c,column:w,$index:N})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),l(v,{level:3})],64)}}});export{F as default};
