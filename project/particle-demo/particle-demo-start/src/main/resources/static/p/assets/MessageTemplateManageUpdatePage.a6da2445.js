import{d as c,r as a,a as T,b as l,o as C,c as P,e as h,f as u,w as r,j as y,g as M,F as S,aX as p,_ as w}from"./index.49d89bd8.js";import{b as A,d as N,e as V}from"./messageTemplateManage.2a124314.js";import{M as U}from"./MessageTemplateContentDetailJson.58c6abc4.js";import"./treeQueryComps.5854cd36.js";const x=c({name:"AreaManageUpdatePage"}),O=c({...x,props:{messageTemplateId:{type:String}},setup(d){const m=d,t=a(!1),i=a(null),s=T({form:{id:m.messageTemplateId,version:1},formData:{}}),f=a(A({contentDetailJsonDialogVisible:t})),D=a({buttonText:"\u786E\u8BA4\u4FEE\u6539",permission:"admin:web:messageTemplate:update"}),g=()=>N,_=()=>V({id:m.messageTemplateId}).then(e=>{let o=e.data.data.contentDetailJson;return o&&(n.value=JSON.parse(o)),Promise.resolve(e)}),b=()=>"\u4FEE\u6539\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u6570\u636E\u67E5\u770B",n=a({}),v=()=>{let e=i.value.getContentDetailJsonData();if(p(e)||p(e.contentDetails)){s.form.contentDetailJson="",n.value={},t.value=!1;return}s.form.contentDetailJson=JSON.stringify(e),n.value=JSON.parse(JSON.stringify(e)),t.value=!1};return(e,o)=>{const J=l("PtForm"),B=l("PtButton"),F=l("el-dialog");return C(),P(S,null,[h(" \u6DFB\u52A0\u8868\u5355 "),u(J,{form:s.form,formData:s.formData,labelWidth:"80",dataMethod:_,method:g(),methodSuccess:b,defaultButtonsShow:"submit,reset",submitAttrs:D.value,buttonsTeleportProps:e.$route.meta.formButtonsTeleportProps,inline:"",layout:[3,1,1,1,1,2,2,2,2,1],comps:f.value},null,8,["form","formData","method","submitAttrs","buttonsTeleportProps","comps"]),u(F,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=E=>t.value=E),width:"70%",title:"\u4E2A\u6027\u5316\u5185\u5BB9\u8BE6\u60C5\u914D\u7F6E","append-to-body":"","destroy-on-close":""},{footer:r(()=>[y("span",null,[u(B,{type:"primary",onClick:v},{default:r(()=>[M("\u786E\u8BA4")]),_:1})])]),default:r(()=>[u(U,{ref_key:"contentDetailJsonRef",ref:i,initContentDetailJsonData:n.value},null,8,["initContentDetailJsonData"])]),_:1},8,["modelValue"])],64)}}}),W=w(O,[["__file","/Users/yw/fh/git-source/particle/web/component/pc/message/views/admin/MessageTemplateManageUpdatePage.vue"]]);export{W as default};
