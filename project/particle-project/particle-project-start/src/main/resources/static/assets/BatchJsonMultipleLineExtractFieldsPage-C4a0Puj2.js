import{d as h,a as S,r as m,b as j,o as P,g as x}from"./index-CmUqrYxc.js";const _=h({__name:"BatchJsonMultipleLineExtractFieldsPage",setup(v){const p=S({form:{},formData:{}}),u=m([{field:{name:"jsonStrLines"},element:{comp:"el-input",formItemProps:{label:"json多行文本",required:!0,tips:"注意：每一行应该是一个完整的json字符串"},compProps:{clearable:!0,rows:10,type:"textarea"}}},{field:{name:"fields"},element:{comp:"el-input",formItemProps:{label:"提取的字段",tips:"多个以英文逗号分割",required:!0},compProps:{clearable:!0}}},{field:{name:"handleLogical",value:"newJson"},element:{comp:"PtRadioGroup",formItemProps:{label:"处理逻辑",required:!0},compProps:{options:[{id:"newJson",name:"提取后转为新的json"},{id:"valueOnly",name:"仅提取值"}]}}},{field:{name:"multipleFieldsSeparator",value:"|"},element:{comp:"el-input",formItemProps:{label:"多个字段时的分隔符",required:!0,tips:"在选择 仅提取值 时有效"},compProps:{clearable:!0,rows:2,type:"textarea"}}},{field:{name:"text"},element:{comp:"el-input",formItemProps:{label:"结果"},compProps:{clearable:!0,readonly:!0,rows:10,type:"textarea"}}}]),c=m({buttonText:"确认提取"}),d=e=>{f[e.handleLogical](e)},f={newJson:e=>{let l=e.jsonStrLines.split(`
`),t="";for(let o=0;o<l.length;o++){let s=l[o];if(!s)continue;let a=JSON.parse(s),r={};e.fields.split(",").forEach(n=>{let i=a[n];r[n]=i}),t+=JSON.stringify(r)+`
`}e.text=t},valueOnly:e=>{let l=e.jsonStrLines.split(`
`),t="";for(let o=0;o<l.length;o++){let s=l[o];if(!s)continue;let a=JSON.parse(s),r=[];e.fields.split(",").forEach(n=>{let i=a[n];r.push(JSON.stringify(i))}),t+=r.join(e.multipleFieldsSeparator)+`
`}e.text=t}},b=()=>"提取成功";return(e,l)=>{const t=j("PtForm");return P(),x(t,{form:p.form,formData:p.formData,labelWidth:"80",method:d,methodSuccess:b,defaultButtonsShow:"submit,reset",submitAttrs:c.value,layout:1,"label-position":"top",comps:u.value},null,8,["form","formData","submitAttrs","comps"])}}});export{_ as default};
