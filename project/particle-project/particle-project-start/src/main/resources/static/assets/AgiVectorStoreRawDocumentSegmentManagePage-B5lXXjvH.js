import{p as P,a as V,e as v,r as x}from"./agiVectorStoreRawDocumentSegmentManage-BCKmfHPK.js";import{d as h,r as g,a as T,b as o,o as B,c as A,e as n,w as i,f as C,F as M}from"./index-q46_oeYE.js";import"./agiVectorStoreRawDocumentAdminApi-CH56a9d_.js";const E=h({__name:"AgiVectorStoreRawDocumentSegmentManagePage",setup(F){const p=g(null),m=T({form:{},formComps:P,tableColumns:[{prop:"agiVectorStoreRawDocumentName",label:"知识存储原始文档名称",showOverflowTooltip:!0},{prop:"content",label:"片段内容",showOverflowTooltip:!0},{prop:"metadataJson",label:"元数据json",showOverflowTooltip:!0},{prop:"isEmbedded",label:"是否嵌入",formatter:(e,t,a,l)=>a?"已嵌入":"未嵌入"},{prop:"remark",label:"描述"}]}),s=g({buttonText:"查询",loading:!1,permission:"admin:web:agiVectorStoreRawDocumentSegment:pageQuery"}),u=()=>{p.value.refreshData()},b=({pageQuery:e})=>V({...m.form,...e}),f={permission:s.value.permission},w=({row:e,column:t,$index:a})=>a<0?[]:(e.id,[{txt:"编辑",text:!0,permission:"admin:web:agiVectorStoreRawDocumentSegment:update",route:{path:"/admin/AgiVectorStoreRawDocumentSegmentManageUpdate",query:{id:e.id,agiVectorStoreRawDocumentId:e.agiVectorStoreRawDocumentId,agiVectorStoreRawDocumentName:e.agiVectorStoreRawDocumentName}}},{txt:"嵌入",text:!0,position:"more",disabled:e.isEmbedded,disabledReason:e.isEmbedded?"未嵌入的片段才可以嵌入":void 0,permission:"admin:web:agiVectorStoreRawDocumentSegment:embedding",methodConfirmText:"确定要嵌入吗？将尝试删除已嵌入的向量并重新嵌入",method(){return v({id:e.id}).then(r=>(u(),Promise.resolve(r)))}},{txt:"删除",text:!0,position:"more",permission:"admin:web:agiVectorStoreRawDocumentSegment:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return x({id:e.id}).then(r=>(u(),Promise.resolve(r)))}}]);return(e,t)=>{const a=o("PtButton"),l=o("PtForm"),c=o("PtButtonGroup"),r=o("el-table-column"),S=o("PtTable"),_=o("PtRouteViewPopover");return B(),A(M,null,[n(l,{form:m.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:m.formComps},{buttons:i(()=>[n(a,{permission:"admin:web:agiVectorStoreRawDocumentSegment:create",route:"/admin/AgiVectorStoreRawDocumentSegmentManageAdd"},{default:i(()=>t[1]||(t[1]=[C("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(S,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:t[0]||(t[0]=d=>s.value.loading=d),paginationProps:f,columns:m.tableColumns},{defaultAppend:i(()=>[n(r,{label:"操作",width:"180"},{default:i(({row:d,column:R,$index:D})=>[n(c,{options:w({row:d,column:R,$index:D}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(_,{level:3})],64)}}});export{E as default};
