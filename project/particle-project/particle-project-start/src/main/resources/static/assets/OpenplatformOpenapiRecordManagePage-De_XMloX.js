import{p as P,a as _}from"./openplatformOpenapiRecordManage-CeJImhLe.js";import{d as g,r as d,a as R,b as a,o as x,c as A,e as l,w as f,F as D}from"./index-BAoWe_iC.js";import"./openplatformAppCompItem-BH6gzBAK.js";import"./openplatformAppAdminApi-Dc5MkXK0.js";import"./userCompItem-ByRBUqu9.js";import"./userAdminApi-CSsHgdyh.js";import"./openplatformOpenapiCompItem-DhsNbVsI.js";import"./crmCompItem--npaq2f5.js";import"./crmCustomerTagAdminApi-DH7cQ09K.js";const k=g({__name:"OpenplatformOpenapiRecordManagePage",setup(M){const u=d(null),n=R({form:{},formComps:P,tableColumns:[{prop:"openplatformAppName",label:"应用",showOverflowTooltip:!0},{prop:"userNickname",label:"用户昵称",showOverflowTooltip:!0},{prop:"isApp",label:"调用方式",formatter:(e,t,o,r)=>o?"应用":"用户"},{prop:"customerName",label:"客户",showOverflowTooltip:!0},{prop:"openplatformOpenapiName",label:"开放接口",showOverflowTooltip:!0},{prop:"requestUrl",label:"接口地址",showOverflowTooltip:!0},{prop:"requestTimestamp",label:"请求时间戳",showOverflowTooltip:!0},{prop:"requestNonce",label:"请求流水号",showOverflowTooltip:!0},{prop:"requestSignature",label:"请求签名",showOverflowTooltip:!0},{prop:"requestParameterMd5",label:"请求参数md5",showOverflowTooltip:!0},{prop:"requestTimestampDateTimeStr",label:"请求时间",showOverflowTooltip:!0},{prop:"requestHandleAt",label:"请求处理时间",showOverflowTooltip:!0},{prop:"createAt",label:"创建时间",showOverflowTooltip:!0},{prop:"responseResultMd5",label:"响应结果md5",showOverflowTooltip:!0},{prop:"traceId",label:"traceId",showOverflowTooltip:!0},{prop:"handleDuration",label:"处理时长(ms)"},{prop:"isResponseHasEffectiveValue",label:"响应数据",showOverflowTooltip:!0,formatter:(e,t,o,r)=>o?"正常响应数据":"无数据"},{prop:"responseHttpStatus",label:"http状态码"},{prop:"responseBusinessStatus",label:"业务状态码",showOverflowTooltip:!0},{prop:"isCacheHit",label:"缓存命中",formatter:(e,t,o,r)=>o?"是":"否"},{prop:"feeAmount",label:"消费金额"},{prop:"feeReasonDictName",label:"消费金额缘由",showOverflowTooltip:!0}]}),i=d({buttonText:"查询",loading:!1,permission:"admin:web:openplatformOpenapiRecord:pageQuery"}),c=()=>{u.value.refreshData()},w=({pageQuery:e})=>_({...n.form,...e}),b={permission:i.value.permission},h=({row:e,column:t,$index:o})=>{if(o<0)return[];let r={id:e.id},p={openplatformOpenapiRecordId:e.id},s=[{txt:"查看参数",text:!0,permission:"admin:web:openplatformOpenapiRecordParam:detail",route:{path:"/admin/openplatformOpenapiRecordManageParamView",query:r}}];return e.isExistProviderRecord&&s.push({txt:"查看供应商调用记录",text:!0,position:"more",permission:"admin:web:openplatformProviderRecord:pageQuery",route:{path:"/admin/openplatformProviderRecordManagePage",query:p}}),s};return(e,t)=>{const o=a("PtForm"),r=a("PtButtonGroup"),p=a("el-table-column"),s=a("PtTable"),v=a("PtRouteViewPopover");return x(),A(D,null,[l(o,{form:n.form,labelWidth:"100",method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:n.formComps},null,8,["form","submitAttrs","comps"]),l(s,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:t[0]||(t[0]=m=>i.value.loading=m),doDataMethodOnMounted:!1,paginationProps:b,columns:n.tableColumns},{defaultAppend:f(()=>[l(p,{label:"操作",width:"200"},{default:f(({row:m,column:O,$index:T})=>[l(r,{options:h({row:m,column:O,$index:T}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),l(v,{level:3})],64)}}});export{k as default};
