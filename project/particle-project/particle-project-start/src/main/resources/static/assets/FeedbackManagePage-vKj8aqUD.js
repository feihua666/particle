import{p as x,a as P,r as R}from"./feedbackManage-CnLFLQaZ.js";import{d as w,r as b,a as y,b as n,o as T,c as C,e as r,w as c,F as B}from"./index-CmUqrYxc.js";const U=w({__name:"FeedbackManagePage",setup(M){const m=b(null),l=y({form:{},formComps:x,tableColumns:[{prop:"contactUsername",label:"联系姓名"},{prop:"contactTelephone",label:"联系电话",formatter:(e,a,t,o)=>{let s=e.isContactTelephoneMobile?"(手机号)":"";return t+s}},{prop:"contactEmail",label:"联系邮箱"},{prop:"feedbackContent",label:"问题建议内容",showOverflowTooltip:!0},{prop:"feedbackAt",label:"问题建议时间"},{prop:"feedbackUserNickname",label:"问题建议用户"},{prop:"feedbackUserAvatar",label:"问题建议用户头像"},{prop:"isHandle",label:"是否已处理",formatter:(e,a,t,o)=>t?"已处理":"未处理"},{prop:"handleResult",label:"处理结果",showOverflowTooltip:!0},{prop:"remark",label:"描述"}]}),d=b({buttonText:"查询",loading:!1,permission:"admin:web:feedback:pageQuery"}),u=()=>{m.value.refreshData()},f=({pageQuery:e})=>P({...l.form,...e}),k={permission:d.value.permission},_=({row:e,column:a,$index:t})=>{if(t<0)return[];let o={id:e.id};return[{txt:"回复",text:!0,permission:"admin:web:feedbackReply:create",disabled:!e.feedbackUserId,disabledReason:e.feedbackUserId?void 0:"无用户关联，不支持回复",route:{path:"/admin/feedbackReplyManageAdd",query:o}},{txt:"回复列表",text:!0,permission:"admin:web:feedbackReply:pageQuery",position:"more",disabled:!e.feedbackUserId,disabledReason:e.feedbackUserId?void 0:"无用户关联，无回复列表数据",route:{path:"/admin/feedbackReplyManagePage",query:o}},{txt:"手动处理",text:!0,permission:"admin:web:feedback:manualHandle",position:"more",disabled:e.isHandle,disabledReason:e.isHandle?"已处理,不能再次处理":void 0,route:{path:"/admin/feedbackManageManualHandle",query:o}},{txt:"删除",text:!0,permission:"admin:web:feedback:delete",position:"more",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return R({id:e.id}).then(i=>(u(),Promise.resolve(i)))}}]};return(e,a)=>{const t=n("PtForm"),o=n("PtButtonGroup"),s=n("el-table-column"),i=n("PtTable"),g=n("PtRouteViewPopover");return T(),C(B,null,[r(t,{form:l.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:d.value,inline:"",comps:l.formComps},null,8,["form","submitAttrs","comps"]),r(i,{ref_key:"tableRef",ref:m,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:a[0]||(a[0]=p=>d.value.loading=p),paginationProps:k,columns:l.tableColumns},{defaultAppend:c(()=>[r(s,{label:"操作",width:"180"},{default:c(({row:p,column:h,$index:v})=>[r(o,{options:_({row:p,column:h,$index:v}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(g,{level:3})],64)}}});export{U as default};
