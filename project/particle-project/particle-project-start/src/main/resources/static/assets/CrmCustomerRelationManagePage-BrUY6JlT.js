import{p as w,a as x,r as h}from"./crmCustomerRelationManage-mR7TG9ny.js";import{d as B,r as b,a as D,b as e,o as A,c as M,e as o,w as r,f as T,F}from"./index-CmUqrYxc.js";import"./crmCompItem-CZYmCfuk.js";import"./crmCustomerTagAdminApi-CV48wDub.js";const q=B({__name:"CrmCustomerRelationManagePage",setup(N){const u=b(null),n=D({form:{},formComps:w,tableColumns:[{prop:"crmCustomerName",label:"客户"},{prop:"anotherCrmCustomerName",label:"另一个客户"},{prop:"crmCustomerRelationDefineName",label:"关系"},{prop:"relationDetail",label:"关系详情描述"}]}),m=b({buttonText:"查询",loading:!1,permission:"admin:web:crmCustomerRelation:pageQuery"}),p=()=>{u.value.refreshData()},f=({pageQuery:t})=>x({...n.form,...t}),C={permission:m.value.permission},_=({row:t,column:a,$index:s})=>s<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:crmCustomerRelation:update",route:{path:"/admin/CrmCustomerRelationManageUpdate",query:{id:t.id}}},{txt:"删除",text:!0,permission:"admin:web:crmCustomerRelation:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return h({id:t.id}).then(l=>(p(),Promise.resolve(l)))}}];return(t,a)=>{const s=e("PtButton"),d=e("PtForm"),c=e("PtButtonGroup"),l=e("el-table-column"),P=e("PtTable"),R=e("PtRouteViewPopover");return A(),M(F,null,[o(d,{form:n.form,method:p,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:n.formComps},{buttons:r(()=>[o(s,{permission:"admin:web:crmCustomerRelation:create",route:"/admin/CrmCustomerRelationManageAdd"},{default:r(()=>a[1]||(a[1]=[T("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(P,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:a[0]||(a[0]=i=>m.value.loading=i),paginationProps:C,columns:n.tableColumns},{defaultAppend:r(()=>[o(l,{label:"操作",width:"180"},{default:r(({row:i,column:g,$index:v})=>[o(c,{options:_({row:i,column:g,$index:v})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(R,{level:3})],64)}}});export{q as default};
