import{p as P,a as x,r as w}from"./schedulerTempTaskRunRecordManage-CewJHOkh.js";import{d as v,r as T,a as I,b as r,o as B,c as C,e as s,w as b,F as A}from"./index-BAoWe_iC.js";import"./schedulerTempTaskAdminApi-U1kcxFjb.js";const S=v({__name:"SchedulerTempTaskRunRecordManagePage",props:{schedulerTempTaskId:{type:String}},setup(h){const m=T(null),n=I({form:{schedulerTempTaskId:h.schedulerTempTaskId},formComps:P,tableColumns:[{prop:"schedulerTempTaskCode",label:"临时任务编码"},{prop:"schedulerTempTaskName",label:"临时任务名称"},{prop:"statusDictName",label:"临时任务状态"},{prop:"isHasError",label:"是否有异常",formatter:(e,o,t,a)=>t?"是":"否"},{prop:"isAllowRunSwitch",label:"是否允许运行",formatter:(e,o,t,a)=>t?"是":"否"},{prop:"startAt",label:"运行开始时间"},{prop:"finishAt",label:"运行结束时间"},{prop:"localHostIp",label:"本地主机ip"},{prop:"localHostName",label:"本地主机名称"},{prop:"traceId",label:"traceId"}]}),l=T({buttonText:"查询",loading:!1,permission:"admin:web:schedulerTempTaskRunRecord:pageQuery"}),d=()=>{m.value.refreshData()},R=({pageQuery:e})=>x({...n.form,...e}),f={permission:l.value.permission},g=({row:e,column:o,$index:t})=>{if(t<0)return[];let a={id:e.id};return[{txt:"查看运行记录日志",text:!0,permission:"admin:web:schedulerTempTaskRunRecordLog:pageQuery",route:{path:"/admin/schedulerTempTaskRunRecordLogManagePage",query:{schedulerTempTaskRunRecordId:e.id,schedulerTempTaskName:e.schedulerTempTaskName}}},{txt:"编辑",text:!0,position:"more",permission:"admin:web:schedulerTempTaskRunRecord:update",route:{path:"/admin/SchedulerTempTaskRunRecordManageUpdate",query:a}},{txt:"删除",text:!0,position:"more",permission:"admin:web:schedulerTempTaskRunRecord:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return w({id:e.id}).then(p=>(d(),Promise.resolve(p)))}}]};return(e,o)=>{const t=r("PtForm"),a=r("PtButtonGroup"),i=r("el-table-column"),c=r("PtTable"),p=r("PtRouteViewPopover");return B(),C(A,null,[s(t,{form:n.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:n.formComps},null,8,["form","submitAttrs","comps"]),s(c,{ref_key:"tableRef",ref:m,"default-expand-all":"",dataMethod:R,onDataMethodDataLoading:o[0]||(o[0]=u=>l.value.loading=u),paginationProps:f,columns:n.tableColumns},{defaultAppend:b(()=>[s(i,{label:"操作",width:"220"},{default:b(({row:u,column:k,$index:_})=>[s(a,{options:g({row:u,column:k,$index:_}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),s(p,{level:3})],64)}}});export{S as default};
