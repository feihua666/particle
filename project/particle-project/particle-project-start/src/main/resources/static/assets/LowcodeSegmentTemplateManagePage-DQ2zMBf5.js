import{p as x,r as P}from"./lowcodeSegmentTemplateAdminApi-NjptK6GW.js";import{p as S}from"./lowcodeSegmentTemplateManage-BoR1p1Fk.js";import{d as B,r as b,a as C,b as o,o as M,c as O,e as a,w as l,f as y,F as R}from"./index-DoSQKVHz.js";import"./treeQueryComps-CWIG2rsy.js";const k=B({__name:"LowcodeSegmentTemplateManagePage",setup(A){const d=b(null),r=C({form:{},formComps:S,tableColumns:[{label:"模板名称",prop:"name",showOverflowTooltip:!0,width:250},{label:"编码",prop:"code",showOverflowTooltip:!0},{label:"输出类型",prop:"outputTypeDictName"},{label:"父级",prop:"parentName",showOverflowTooltip:!0},{label:"名称模板",prop:"nameTemplate",showOverflowTooltip:!0},{label:"名称输出变量名",prop:"nameOutputVariable",showOverflowTooltip:!0},{label:"内容输出变量名",prop:"outputVariable",showOverflowTooltip:!0},{label:"引用模板",prop:"referenceSegmentTemplateName",showOverflowTooltip:!0},{label:"共享变量名",prop:"shareVariables"},{label:"描述",prop:"remark",showOverflowTooltip:!0}]}),m=b({buttonText:"查询",loading:!1,permission:"admin:web:lowcodeSegmentTemplate:pageQuery"}),c=()=>{d.value.refreshData()},f=({pageQuery:e})=>x({...r.form,...e}),T={permission:m.value.permission},g=({row:e,column:n,$index:p})=>{if(p<0)return[];let t={id:e.id},s={id:e.id,parentId:e.parentId};return[{txt:"编辑",text:!0,permission:"admin:web:lowcodeSegmentTemplate:update",route:{path:"/admin/lowcodeSegmentTemplateManageUpdate",query:t}},{txt:"删除",text:!0,position:"more",permission:"admin:web:lowcodeSegmentTemplate:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return P(t).then(i=>(c(),Promise.resolve(i)))}},{txt:"渲染测试",position:"more",text:!0,permission:"admin:web:lowcodeSegmentTemplate:renderTest",route:{path:"/admin/lowcodeSegmentTemplateManageRenderTest",query:t}},{txt:"添加子级",position:"more",text:!0,permission:"admin:web:lowcodeSegmentTemplate:create",route:{path:"/admin/lowcodeSegmentTemplateManageAdd",query:t}},{txt:"复制节点",text:!0,position:"more",permission:"admin:web:lowcodeSegmentTemplate:copy",route:{path:"/admin/lowcodeSegmentTemplateManageCopy",query:s}}]};return(e,n)=>{const p=o("PtButton"),t=o("PtForm"),s=o("PtButtonGroup"),w=o("el-table-column"),i=o("PtTable"),h=o("PtRouteViewPopover");return M(),O(R,null,[a(t,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:r.formComps},{buttons:l(()=>[a(p,{permission:"admin:web:lowcodeSegmentTemplate:create",route:"/admin/lowcodeSegmentTemplateManageAdd"},{default:l(()=>n[1]||(n[1]=[y("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(i,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:n[0]||(n[0]=u=>m.value.loading=u),dataMethodResultHandleConvertToTree:!0,paginationProps:T,columns:r.tableColumns},{defaultAppend:l(()=>[a(w,{label:"操作",width:"180"},{default:l(({row:u,column:_,$index:v})=>[a(s,{options:g({row:u,column:_,$index:v}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(h,{level:3})],64)}}});export{k as default};
