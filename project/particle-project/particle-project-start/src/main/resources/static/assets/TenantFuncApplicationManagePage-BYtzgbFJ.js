import{p as x,r as v}from"./tenantFuncApplicationAdminApi-b97EFn0a.js";import{p as I}from"./tenantFuncApplicationManage-Cn7Z-nRX.js";import{d as B,r as b,a as C,aq as M,b as e,o as w,c as R,e as n,w as s,f as D,F as y,ap as V}from"./index-CmUqrYxc.js";import"./funcApplicationAdminApi-IRJS8LEX.js";const N=B({__name:"TenantFuncApplicationManagePage",setup(k){const d=b(null),a=C({form:{},formComps:I,tableColumns:M}),p=b({buttonText:"查询",loading:!1,permission:"admin:web:tenantFuncApplication:pageQuery"}),f=()=>{d.value.refreshData()},A=({pageQuery:t})=>x({...a.form,...t}),_={permission:p.value.permission},F=({row:t,column:o,$index:r})=>{if(r<0)return[];let u={id:t.id};t.tenantId;let l={tenantId:t.tenantId,funcApplicationId:t.funcApplicationId},i=[{txt:"编辑",text:!0,permission:"admin:web:tenantFuncApplication:update",route:{path:"/admin/TenantFuncApplicationManageUpdate",query:u}},{txt:"删除",text:!0,permission:"admin:web:tenantFuncApplication:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return v({id:t.id}).then(m=>(f(),Promise.resolve(m)))}}];return!t.isGroup&&i.push({txt:"租户应用分配功能菜单",text:!0,position:"more",permission:"admin:web:tenantFunc:tenantAssignFunc",route:{path:"/admin/tenantFuncApplication/tenantFuncTenantAssignFunc",query:l}}),i},T=t=>V(t,null,"funcApplicationId","parentFuncApplicationId");return(t,o)=>{const r=e("PtButton"),u=e("PtForm"),l=e("PtButtonGroup"),i=e("el-table-column"),m=e("PtTable"),g=e("PtRouteViewPopover");return w(),R(y,null,[n(u,{form:a.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",comps:a.formComps},{buttons:s(()=>[n(r,{permission:"admin:web:tenantFuncApplication:create",route:"/admin/TenantFuncApplicationManageAdd"},{default:s(()=>o[1]||(o[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(m,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:A,onDataMethodDataLoading:o[0]||(o[0]=c=>p.value.loading=c),dataMethodResultHandleConvertToTree:!0,dataMethodResultHandleListToTreeMethod:T,paginationProps:_,columns:a.tableColumns},{defaultAppend:s(()=>[n(i,{label:"操作",width:"220"},{default:s(({row:c,column:P,$index:h})=>[n(l,{options:F({row:c,column:P,$index:h}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(g,{level:3})],64)}}});export{N as default};
