import{p as A,r as N}from"./roleUserRelAdminApi-IKFczxuF.js";import{a as v,u as w}from"./userCompItem-D0ziwGpi.js";import{r as M,a as C}from"./roleCompItem-DmljlYC0.js";import{d as k,r as y,a as T,b as l,o as h,c as D,e as o,w as r,f as n,F as q}from"./index-DoSQKVHz.js";import"./userAdminApi-BrVTPQqU.js";import"./roleAdminApi-DIrxWkaX.js";const O=k({__name:"RoleUserRelManagePage",props:{...v,...M},setup(B){const b=y(null),g=B,a=T({form:{},formComps:[w({props:g,required:!1}),C({props:g,required:!1})],tableColumns:[{prop:"userNickname",label:"用户昵称",showOverflowTooltip:!0,width:120},{prop:"roleName",label:"角色名称",showOverflowTooltip:!0,width:120}]}),i=y({buttonText:"查询",loading:!1,permission:"admin:web:roleUserRel:pageQuery"}),c=()=>{b.value.refreshData()},I=({pageQuery:e})=>A({...a.form,...e}),P={permission:i.value.permission},x=({row:e,column:t,$index:s})=>{if(s<0)return[];let u={id:e.id},d={userId:e.userId,userNickname:e.userNickname},p={userId:e.userId,userNickname:e.userNickname},R={roleId:e.roleId,roleName:e.roleName},f={roleId:e.roleId,roleName:e.roleName};return[{txt:"为该用户分配角色",text:!0,permission:"admin:web:roleUserRel:userAssignRole",route:{path:"/admin/roleUserRelManageUserAssignRole",query:d}},{txt:"为该角色分配用户",text:!0,permission:"admin:web:roleUserRel:roleAssignUser",route:{path:"/admin/roleUserRelManageRoleAssignUser",query:R}},{txt:"为该用户清空角色",text:!0,methodConfirmText:`您将清空用户 ${e.userNickname} 所有角色,该用户将不再拥有任何角色，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleUserRel:deleteByUserId",route:{path:"/admin/roleUserRelManageDeleteByUserId",query:p}},{txt:"为该角色清空用户",text:!0,methodConfirmText:`您将清空角色 ${e.roleName} 所有角色,该角色将不再分配给任何用户，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleUserRel:deleteByRoleId",route:{path:"/admin/roleUserRelManageDeleteByRoleId",query:f}},{txt:"删除",text:!0,permission:"admin:web:roleUserRel:delete",methodConfirmText:`删除后用户 ${e.userNickname} 将不再拥有角色 ${e.roleName} 及角色所赋予的功能，确定要删除吗？`,method(){return N(u).then(U=>(c(),Promise.resolve(U)))}}]};return(e,t)=>{const s=l("PtButton"),u=l("PtForm"),d=l("PtButtonGroup"),p=l("el-table-column"),R=l("PtTable"),f=l("PtRouteViewPopover");return h(),D(q,null,[o(u,{form:a.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:a.formComps},{buttons:r(()=>[o(s,{permission:"admin:web:roleUserRel:create",route:"/admin/roleUserRelManageAdd"},{default:r(()=>t[1]||(t[1]=[n("添加")])),_:1}),o(s,{permission:"admin:web:roleUserRel:userAssignRole",route:"/admin/roleUserRelManageUserAssignRole"},{default:r(()=>t[2]||(t[2]=[n("用户分配角色")])),_:1}),o(s,{permission:"admin:web:roleUserRel:roleAssignUser",route:"/admin/roleUserRelManageRoleAssignUser"},{default:r(()=>t[3]||(t[3]=[n("角色分配用户")])),_:1}),o(s,{permission:"admin:web:roleUserRel:deleteByUserId",route:"/admin/roleUserRelManageDeleteByUserId"},{default:r(()=>t[4]||(t[4]=[n("清空用户角色")])),_:1}),o(s,{permission:"admin:web:roleUserRel:deleteByRoleId",route:"/admin/roleUserRelManageDeleteByRoleId"},{default:r(()=>t[5]||(t[5]=[n("清空角色用户")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(R,{ref_key:"tableRef",ref:b,"default-expand-all":"",dataMethod:I,onDataMethodDataLoading:t[0]||(t[0]=m=>i.value.loading=m),paginationProps:P,columns:a.tableColumns},{defaultAppend:r(()=>[o(p,{label:"操作"},{default:r(({row:m,column:U,$index:_})=>[o(d,{options:x({row:m,column:U,$index:_})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(f,{level:3})],64)}}});export{O as default};
