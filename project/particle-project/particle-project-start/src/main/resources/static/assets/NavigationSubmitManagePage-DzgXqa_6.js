import{p as h,s as w,r as B}from"./navigationSubmitAdminApi-Cc0Sqjiq.js";import{p as C}from"./navigationSubmitManage-B0ueSkVq.js";import{d as T,r as c,a as N,b as e,o as A,c as M,e as o,w as m,f as R,F as D}from"./index-CmUqrYxc.js";const q=T({__name:"NavigationSubmitManagePage",setup(F){const d=c(null),i=N({form:{},formComps:C,tableColumns:[{prop:"name",label:"网站名称"},{prop:"title",label:"网站标题"},{prop:"url",label:"网站地址"},{prop:"submitAt",label:"提交时间"},{prop:"statusDictName",label:"状态"},{prop:"remark",label:"描述"}]}),s=c({buttonText:"查询",loading:!1,permission:"admin:web:navigationSubmit:pageQuery"}),u=()=>{d.value.refreshData()},f=({pageQuery:t})=>h({...i.form,...t}),g={permission:s.value.permission},v=({row:t,column:n,$index:l})=>{if(l<0)return[];let r={id:t.id};return[{txt:"编辑内容",text:!0,permission:"admin:web:navigationSubmit:update",route:{path:"/admin/NavigationSubmitManageUpdateContent",query:r}},{txt:"确认提交",text:!0,position:"more",permission:"admin:web:navigationSubmit:sureSubmit",methodConfirmText:`确定要提交 ${t.name} 吗？确保内容已经编辑完成，提交后将会在网站中添加该内容记录，但仍需要手动关联到分类中才能使用`,method(){return w({id:t.id}).then(a=>(u(),Promise.resolve(a)))}},{txt:"编辑",text:!0,position:"more",permission:"admin:web:navigationSubmit:update",route:{path:"/admin/NavigationSubmitManageUpdate",query:r}},{txt:"删除",text:!0,position:"more",permission:"admin:web:navigationSubmit:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return B({id:t.id}).then(a=>(u(),Promise.resolve(a)))}}]};return(t,n)=>{const l=e("PtButton"),r=e("PtForm"),b=e("PtButtonGroup"),a=e("el-table-column"),_=e("PtTable"),P=e("PtRouteViewPopover");return A(),M(D,null,[o(r,{form:i.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:i.formComps},{buttons:m(()=>[o(l,{permission:"admin:web:navigationSubmit:create",route:"/admin/NavigationSubmitManageAdd"},{default:m(()=>n[1]||(n[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(_,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:n[0]||(n[0]=p=>s.value.loading=p),paginationProps:g,columns:i.tableColumns},{defaultAppend:m(()=>[o(a,{label:"操作",width:"220"},{default:m(({row:p,column:x,$index:S})=>[o(b,{options:v({row:p,column:x,$index:S}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(P,{level:3})],64)}}});export{q as default};
