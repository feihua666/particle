import{k as a}from"./index-BAoWe_iC.js";import{u as c}from"./openplatformAppCompItem-BH6gzBAK.js";import{u as f,a as b}from"./openplatformOpenapiCompItem-DhsNbVsI.js";import{u as v}from"./openplatformOpenapiFeeCompItem-BVTgcptN.js";import{u as P}from"./openplatformOpenapiLimitRuleCompItem-DcyjbKKB.js";let i="/admin/web/openplatform_app_openapi";const N=o=>a.post(i+"/create",o),O=o=>a.delete(i+"/delete",{data:o}),W=o=>a.put(i+"/refreshCache",o),A=o=>a.put(i+"/update",o),F=o=>a.get(i+"/detail-for-update",{params:o}),S=o=>a.get(i+"/page",{params:o}),y=[c({}),f({fieldName:"openplatformOpenapiId",label:"开放接口",disableGroup:!0}),v({}),P({})],x=({props:o={},form:h})=>[c({required:!0}),f({fieldName:"openplatformOpenapiId",label:"开放接口",required:!0,disableGroup:!0,valueChange({form:l,formData:t,newValue:p,oldValue:e}){}}),v({tips:"如果配置将覆盖app管理中的默认计费规则配置"}),P({tips:"针对该应用分配的接口进行限制配置，注意区分于应用配置的限制规则，该配置是应用接口级的，粒度更细"}),{field:{name:"specifyProviderConfigJson"},element:{comp:"PtTableFormButton",formItemProps:{label:"指定供应商配置",tips:"该配置依赖开放接口，请先选择开放接口后再配置"},compProps:({form:l})=>({disabled:!l.openplatformOpenapiId,disabledReason:l.openplatformOpenapiId?void 0:"请先选择开放接口后再配置",formProps:{labelWidth:"120",formSubmitDataHandler({isAdd:t,formRef:p,form:e,formData:r}){var n,s,m,d,u;return e.openplatformProviderId=(n=r.providerConfigJsonId)==null?void 0:n.openplatformProviderId,e.openplatformProviderCode=(s=r.providerConfigJsonId)==null?void 0:s.openplatformProviderCode,e.openplatformProviderName=(m=r.providerConfigJsonId)==null?void 0:m.openplatformProviderName,e.providerApiVersion=(d=r.providerConfigJsonId)==null?void 0:d.providerApiVersion,e.dataLagGroovyScript=(u=r.providerConfigJsonId)==null?void 0:u.dataLagGroovyScript,e},comps:[b({tips:"配置接口指定由哪个供应商提供",openplatformOpenapiId:l.openplatformOpenapiId}),{field:{name:"isWhenDataLagNext",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否数据滞后时使用下一个",tips:"当数据滞后时，是否尝试下一个供应商"},compProps:{activeText:"是",inactiveText:"否"}}},{field:{name:"isWhenDataNotFoundNext",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否数据不存在时使用下一个",tips:"当数据不存在时，是否尝试下一个供应商"},compProps:{activeText:"是",inactiveText:"否"}}},{field:{name:"isWhenDataExistNext",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否数据存在时使用下一个",tips:"当数据存在时，是否尝试下一个供应商，这对数据入库非常有用"},compProps:{activeText:"是",inactiveText:"否"}}},{field:{name:"isWhenErrorNext",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否请求异常时使用下一个",tips:"当请求异常时，是否尝试下一个供应商"},compProps:{activeText:"是",inactiveText:"否"}}},{field:{name:"isWarehouseResult",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否将结果入库",tips:"当有正常返回数据时，将该结果数据入库"},compProps:{activeText:"是",inactiveText:"否"}}},{field:{name:"isWarehouseAsync",value:!0},element:{comp:"el-switch",formItemProps:{label:"是否异步入库",tips:"是否选择入库时，使用异步入库方式"},compProps:{activeText:"是",inactiveText:"否"}}}]},tableProps:{showMoveUpAndDownButton:!0,propForDeleteView:"openplatformProviderName",columns:[{prop:"openplatformProviderId",label:"供应商id",showOverflowTooltip:!0},{prop:"openplatformProviderCode",label:"供应商编码",showOverflowTooltip:!0},{prop:"openplatformProviderName",label:"供应商名称",showOverflowTooltip:!0},{prop:"providerApiVersion",label:"供应商接口版本",showOverflowTooltip:!0},{prop:"dataLagGroovyScript",label:"数据滞后脚本",showOverflowTooltip:!0},{prop:"isWhenDataLagNext",label:"数据滞后时",formatter:(t,p,e,r)=>e?"使用下一个":"否"},{prop:"isWhenDataNotFoundNext",label:"数据不存在时",formatter:(t,p,e,r)=>e?"使用下一个":"否"},{prop:"isWhenDataExistNext",label:"数据存在时",formatter:(t,p,e,r)=>e?"使用下一个":"否"},{prop:"isWhenErrorNext",label:"请求异常时",formatter:(t,p,e,r)=>e?"使用下一个":"否"},{prop:"isWarehouseResult",label:"将结果入库",formatter:(t,p,e,r)=>e?"结果入库":"否"},{prop:"isWarehouseAsync",label:"异步入库",formatter:(t,p,e,r)=>e?"异步入库":"否"}]}})}},{field:{name:"remark"},element:{comp:"el-input",formItemProps:{label:"描述"},compProps:{clearable:!0}}}],D=x;export{S as a,W as b,N as c,D as d,A as e,F as f,y as p,O as r,x as u};
