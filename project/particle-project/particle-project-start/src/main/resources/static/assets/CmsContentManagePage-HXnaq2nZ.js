import{e as h,f as x}from"./cmsSiteCompItem-D2doDuW5.js";import{p as D}from"./cmsContentManage-ClyFOOA9.js";import{d as B,r as d,a as T,b as o,o as A,c as N,e as a,w as r,f as R,F as M}from"./index-q46_oeYE.js";import"./cmsSiteAdminApi-BnmDz2eX.js";const O=B({__name:"CmsContentManagePage",setup(y){const u=d(null),l=T({form:{},formComps:D,tableColumns:[{prop:"cmsSiteName",label:"站点"},{prop:"cmsChannelName",label:"栏目"},{prop:"cmsContentCategoryName",label:"内容分类"},{prop:"title",label:"标题"},{prop:"author",label:"作者"},{prop:"original",label:"来源"},{prop:"profile",label:"简介",showOverflowTooltip:!0},{prop:"auditStatusDictName",label:"审核状态"},{prop:"isPublic",label:"是否发布",formatter:(e,t,n,s)=>n?"是":"否"},{prop:"publicAt",label:"发布时间"},{prop:"contentTypeDictName",label:"内容类型"},{prop:"imageUrl",label:"图片地址"},{prop:"imageDescription",label:"图片描述"},{prop:"imageUrl1",label:"图片地址1"},{prop:"imageDescription1",label:"图片描述1"},{prop:"imageUrl2",label:"图片地址2"},{prop:"imageDescription2",label:"图片描述2"},{prop:"templatePath",label:"模板路径",showOverflowTooltip:!0},{prop:"templateIndex",label:"内容模板"},{prop:"staticPath",label:"静态页路径",showOverflowTooltip:!0},{prop:"pv",label:"页面访问量"},{prop:"iv",label:"页面访问ip数"},{prop:"uv",label:"页面访问用户数"},{prop:"seq",label:"排序"}]}),p=d({buttonText:"查询",loading:!1,permission:"admin:web:cmsContent:pageQuery"}),b=()=>{u.value.refreshData()},f=({pageQuery:e})=>h({...l.form,...e}),g={permission:p.value.permission},C=({row:e,column:t,$index:n})=>n<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:cmsContent:update",route:{path:"/admin/CmsContentManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:cmsContent:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return x({id:e.id}).then(m=>(b(),Promise.resolve(m)))}}];return(e,t)=>{const n=o("PtButton"),s=o("PtForm"),c=o("PtButtonGroup"),m=o("el-table-column"),_=o("PtTable"),P=o("PtRouteViewPopover");return A(),N(M,null,[a(s,{form:l.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",comps:l.formComps},{buttons:r(()=>[a(n,{permission:"admin:web:cmsContent:create",route:"/admin/CmsContentManageAdd"},{default:r(()=>t[1]||(t[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(_,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:t[0]||(t[0]=i=>p.value.loading=i),paginationProps:g,columns:l.tableColumns},{defaultAppend:r(()=>[a(m,{label:"操作",width:"180"},{default:r(({row:i,column:v,$index:w})=>[a(c,{options:C({row:i,column:v,$index:w})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(P,{level:3})],64)}}});export{O as default};
