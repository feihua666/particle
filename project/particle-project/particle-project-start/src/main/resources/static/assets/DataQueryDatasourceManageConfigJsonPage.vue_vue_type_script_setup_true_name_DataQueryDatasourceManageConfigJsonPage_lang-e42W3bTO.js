import{d as o}from"./dataQueryDatasourceManage-Hb-v0XDo.js";import{d as f,a as p,$ as l,C as D,i as d,r as y,b,o as g,g as _,m as h}from"./index-BAoWe_iC.js";const C=f({__name:"DataQueryDatasourceManageConfigJsonPage",props:{typeDictValue:{type:String},initData:{type:[Object,String]},success:{type:Function,default:r=>{}}},setup(r){const t=r,a=p({form:{},formData:{}}),i=o[t.typeDictValue]||o.datasource_not_support;l(()=>{if(!t.initData)return;let e={};if(D(t.initData)&&(e=t.initData),d(t.initData))if(!o[t.typeDictValue])e.configJson=t.initData;else try{e=JSON.parse(t.initData)}catch{o[t.typeDictValue]||(e.configJson=t.initData)}for(let s in e)a.form[s]=e[s]});const n=y({buttonText:"确认"}),c=()=>()=>{},m=()=>{let e="";return o[t.typeDictValue]?e=JSON.stringify(a.form):e=a.form.configJson,t.success(e),"配置成功，提交数据后生效"};return(e,s)=>{const u=b("PtForm");return g(),_(u,{form:a.form,formData:a.formData,labelWidth:"80",method:c(),methodSuccess:m,defaultButtonsShow:"submit,reset",submitAttrs:n.value,layout:1,comps:h(i)},null,8,["form","formData","method","submitAttrs","comps"])}}});export{C as _};
