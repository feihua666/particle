import{p as B,a as N}from"./roleDataScopeRelAdminApi-60uEU_tR.js";import{p as _}from"./roleDataScopeRelManage-CwYCOpvq.js";import{d as P,r as g,a as A,b as r,o as v,c as M,e as o,w as a,f as p,F as w}from"./index-DoSQKVHz.js";import"./roleCompItem-DmljlYC0.js";import"./roleAdminApi-DIrxWkaX.js";import"./dataconstraintCompItem-DyGpFQ6w.js";import"./dataObjectAdminApi-BUmMIlsy.js";import"./dataScopeAdminApi-XW_rxl8n.js";const j=P({__name:"RoleDataScopeRelManagePage",setup(h){const D=g(null),s=A({form:{},formComps:_,tableColumns:[{prop:"roleName",label:"角色",showOverflowTooltip:!0,width:120},{prop:"dataObjectName",label:"数据对象",showOverflowTooltip:!0,width:120},{prop:"dataScopeName",label:"数据范围",showOverflowTooltip:!0,width:120}]}),m=g({buttonText:"查询",loading:!1,permission:"admin:web:roleDataScopeRel:pageQuery"}),b=()=>{D.value.refreshData()},I=({pageQuery:e})=>B({...s.form,...e}),x={permission:m.value.permission},y=({row:e,column:t,$index:l})=>{if(l<0)return[];let d={id:e.id},i={id:e.id,roleId:e.roleId,roleName:e.roleName},u={dataScopeId:e.dataScopeId,dataScopeName:e.dataScopeName,dataObjectId:e.dataObjectId},c={dataScopeId:e.dataScopeId,dataScopeName:e.dataScopeName},S={roleId:e.roleId,roleName:e.roleName},n={roleId:e.roleId,roleName:e.roleName};return[{txt:"为该数据范围分配角色",text:!0,permission:"admin:web:roleDataScopeRel:dataScopeAssignRole",route:{path:"/admin/roleDataScopeRelManageDataScopeAssignRole",query:u}},{txt:"为该角色分配数据范围",text:!0,permission:"admin:web:roleDataScopeRel:roleAssignDataScope",route:{path:"/admin/roleDataScopeRelManageRoleAssignDataScope",query:S}},{txt:"为该数据范围清空角色",text:!0,methodConfirmText:`您将清空数据范围 ${e.dataScopeName} 所有角色,该数据范围将不再分配给任何角色，同时拥有涉及对应角色的用户数据范围将受到影响，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleDataScopeRel:deleteByDataScopeId",route:{path:"/admin/roleDataScopeRelManageDeleteByDataScopeId",query:c}},{txt:"为该角色清空数据范围",text:!0,methodConfirmText:`您将清空角色 ${e.roleName} 所有数据范围,该角色将不再拥有任何数据范围，同时拥有该角色的用户数据范围将受到影响，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleDataScopeRel:deleteByRoleId",route:{path:"/admin/roleDataScopeRelManageDeleteByRoleId",query:n}},{txt:"编辑",text:!0,permission:"admin:web:roleDataScopeRel:update",route:{path:"/admin/roleDataScopeRelManageUpdate",query:i}},{txt:"删除",text:!0,permission:"admin:web:roleDataScopeRel:delete",methodConfirmText:`删除后角色 ${e.roleName} 将不再拥有数据范围 ${e.dataScopeName}，确定要删除吗？`,method(){return N(d).then(R=>(b(),Promise.resolve(R)))}}]};return(e,t)=>{const l=r("PtButton"),d=r("PtForm"),i=r("PtButtonGroup"),u=r("el-table-column"),c=r("PtTable"),S=r("PtRouteViewPopover");return v(),M(w,null,[o(d,{form:s.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:s.formComps},{buttons:a(()=>[o(l,{permission:"admin:web:roleDataScopeRel:create",route:"/admin/RoleDataScopeRelManageAdd"},{default:a(()=>t[1]||(t[1]=[p("添加")])),_:1}),o(l,{permission:"admin:web:roleDataScopeRel:dataScopeAssignRole",route:"/admin/roleDataScopeRelManageDataScopeAssignRole"},{default:a(()=>t[2]||(t[2]=[p("数据范围分配角色")])),_:1}),o(l,{permission:"admin:web:roleDataScopeRel:roleAssignDataScope",route:"/admin/roleDataScopeRelManageRoleAssignDataScope"},{default:a(()=>t[3]||(t[3]=[p("角色分配数据范围")])),_:1}),o(l,{permission:"admin:web:roleDataScopeRel:deleteByDataScopeId",route:"/admin/roleDataScopeRelManageDeleteByDataScopeId"},{default:a(()=>t[4]||(t[4]=[p("清空数据范围角色")])),_:1}),o(l,{permission:"admin:web:roleDataScopeRel:deleteByRoleId",route:"/admin/roleDataScopeRelManageDeleteByRoleId"},{default:a(()=>t[5]||(t[5]=[p("清空角色数据范围")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(c,{ref_key:"tableRef",ref:D,"default-expand-all":"",dataMethod:I,onDataMethodDataLoading:t[0]||(t[0]=n=>m.value.loading=n),paginationProps:x,columns:s.tableColumns},{defaultAppend:a(()=>[o(u,{label:"操作"},{default:a(({row:n,column:f,$index:R})=>[o(i,{options:y({row:n,column:f,$index:R})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(S,{level:3})],64)}}});export{j as default};
