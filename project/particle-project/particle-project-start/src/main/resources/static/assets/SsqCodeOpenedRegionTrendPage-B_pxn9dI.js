import{u as M,H as y,i as Y,a as A,b as F,c as _,d as q,e as S}from"./index.esm.min-DYWQ7TpV.js";import{l as w}from"./ssqCodeOpenedAdminApi-BSPJoLmF.js";import{d as $,r as d,a as k,$ as C,b as I,o as p,c as f,e as N,F as x,D as O,g as B,m as L}from"./index-CmUqrYxc.js";const H=$({__name:"SsqCodeOpenedRegionTrendPage",setup(E){M([Y,A,F,_,q,S]);const u=d(),n=k({form:{},formComps:[{field:{name:"openedPhaseYearStart",value:new Date().getFullYear()+""},element:{comp:"PtDatePicker",formItemProps:{label:"开奖期号年份开始",tips:"包括数值本身"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"openedPhaseYearEnd"},element:{comp:"PtDatePicker",formItemProps:{label:"开奖期号年份结束",tips:"不包括数值本身"},compProps:{type:"year",valueFormat:"YYYY"}}},{field:{name:"computeRegionMin",value:2},element:{comp:"el-input-number",formItemProps:{label:"分区最小值",tips:"包括数值本身",required:!0},compProps:{}}},{field:{name:"computeRegionMax",value:200},element:{comp:"el-input-number",formItemProps:{label:"分区最大值",tips:"不包括数值本身",required:!0},compProps:{}}},{field:{name:"computeStep",value:200},element:{comp:"el-input-number",formItemProps:{label:"分区计算步长",required:!0},compProps:{}}}]}),b=d({buttonText:"计算",loading:!1,permission:"admin:web:ssqCodeOpened:queryList"}),g=()=>w(n.form).then(e=>{let t=e.data.data;return h(t),Promise.resolve(e)});C(()=>{});const h=e=>{let t=n.form.computeRegionMin,m=n.form.computeRegionMax,i=n.form.computeStep,l=[];for(let a=t;a<m;a+=i){let o=P(e,a),r=D(o.xAxisData,o.seriesData,a+"");l.push(r)}u.value=l},P=(e,t)=>{let i=17721008/t;i=i.toFixed(1);let l=[],a=[];for(let o=0;o<t;o++){let r=(o+1)*i,s=r-i;r=r.toFixed(1),s=s.toFixed(1),l.push(s+"-"+r),a.push(0)}for(let o=0;o<e.length;o++){let r=e[o].seqNo;for(let s=0;s<t;s++){let c=l[s].split("-"),R=c[0],v=c[1];r>=R&&r<v&&(a[s]=a[s]+1)}}return{xAxisData:l,seriesData:a}},D=(e,t,m)=>({title:{text:m},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},tooltip:{trigger:"axis",show:!0,formatter:"个数：{c}<br/>序号区间：{b}"},xAxis:{type:"category",data:e,axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{data:t,type:"bar",label:{show:!0,position:"top",formatter:"{c}"}}]});return(e,t)=>{const m=I("PtForm");return p(),f(x,null,[N(m,{form:n.form,method:g,defaultButtonsShow:"submit,reset",submitAttrs:b.value,inline:"",labelWidth:"140",comps:n.formComps},null,8,["form","submitAttrs","comps"]),(p(!0),f(x,null,O(u.value,(i,l)=>(p(),B(L(y),{style:{width:"100%",height:"300px"},option:i,autoresize:""},null,8,["option"]))),256))],64)}}});export{H as default};
