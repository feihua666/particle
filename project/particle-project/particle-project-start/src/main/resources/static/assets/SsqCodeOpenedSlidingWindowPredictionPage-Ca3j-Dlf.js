import{u as C,H as f,i as I,a as W,b as q,c as _,d as V,e as j}from"./index.esm.min-uperCUvn.js";import{p as $}from"./ssqCodeOpenedAdminApi-Bj1Z_c5r.js";import{d as B,r as m,a as E,$ as M,b as k,o as L,c as R,e as u,m as h,j as G,G as H,F as J,aI as K,aJ as Q,aK as T}from"./index-q46_oeYE.js";const ee=B({__name:"SsqCodeOpenedSlidingWindowPredictionPage",setup(U){C([I,W,q,_,V,j]);const D=m({}),S=m({}),w=m({}),A=m({}),N=m({}),y=m([]),n=E({form:{},formComps:[{field:{name:"openedPhaseEnd"},element:{comp:"el-input",formItemProps:{label:"开奖期号截止",tips:"不包括数值本身，将按滑动窗口往前推来预测,不填写将按最新期号"},compProps:{clearable:!0}}},{field:{name:"openedPhasePageSize",value:80},element:{comp:"el-input-number",formItemProps:{label:"开奖期号截止前条数"},compProps:{}}},{field:{name:"slidingWindowSize",value:10},element:{comp:"el-input-number",formItemProps:{label:"滑动窗口大小",tips:"可调用滑动窗口大小以寻找最佳滑动窗口大小"},compProps:{}}},{field:{name:"computeObject",value:"seqNo"},element:{comp:"PtSelect",formItemProps:{label:"计算对象",required:!0},compProps:{dataMethod:()=>({data:[{id:"seqNo",name:"序号"},{id:"redSeqNo",name:"红序号"},{id:"blue",name:"蓝球"}]})}}},{field:{name:"slidingWindowSize1",value:4},element:{comp:"el-input-number",formItemProps:{label:"滑动窗口大小1",tips:"可调用滑动窗口大小以寻找最佳滑动窗口大小"},compProps:{}}},{field:{name:"slidingWindowSize2",value:6},element:{comp:"el-input-number",formItemProps:{label:"滑动窗口大小2",tips:"可调用滑动窗口大小以寻找最佳滑动窗口大小"},compProps:{}}},{field:{name:"predictionNum",value:10},element:{comp:"el-input-number",formItemProps:{label:"预测数量"},compProps:{}}},{field:{name:"predictionScopeStart",value:10},element:{comp:"el-input-number",formItemProps:{label:"预测区间开始",tips:"包括数值本身"},compProps:{}}},{field:{name:"predictionScopeEnd",value:10},element:{comp:"el-input-number",formItemProps:{label:"预测区间结束",tips:"包括数值本身"},compProps:{}}}]}),O=m({buttonText:"计算",loading:!1,permission:"admin:web:ssqCodeOpened:pageQuery"}),x=m({}),z=()=>{let i={pageNo:1,pageSize:n.form.openedPhasePageSize,orderBy:"openedPhase-0",openedPhaseEnd:n.form.openedPhaseEnd};return $(i).then(r=>{let o=r.data.data;x.value=F[n.form.computeObject],o=K(o);let t=v(o,n.form.slidingWindowSize,x.value),a=d(t.xAxisData,t.seriesData,"滑动窗口大小");D.value=a,o=[];let b=n.form.computeObject;for(let e=0;e<t.xAxisData.length;e++){let s={openedPhase:t.xAxisData[e]};s[b]=t.seriesData[e],o.push(s)}t=v(o,n.form.slidingWindowSize1,x.value),a=d(t.xAxisData,t.seriesData,"滑动窗口大小1"),S.value=a,o=[];for(let e=0;e<t.xAxisData.length;e++){let s={openedPhase:t.xAxisData[e]};s[b]=t.seriesData[e],o.push(s)}t=v(o,n.form.slidingWindowSize2,x.value),a=d(t.xAxisData,t.seriesData,"滑动窗口大小2"),w.value=a,y.value=t.seriesData;let g=[],p=[];for(let e=1;e<t.xAxisData.length;e++)p.push(Math.abs(t.seriesData[e]-t.seriesData[e-1])),g.push(t.xAxisData[e]);a=d(g,p,"差值"),A.value=a;let l=[],c=[];for(let e=1;e<t.xAxisData.length;e++)c.push(Math.abs(p[e]-p[e-1])),l.push(g[e]);return a=d(l,c,"差值的差值"),N.value=a,Promise.resolve(r)})};M(()=>{});const F={seqNo:{max:17721008,fieldName:"seqNo",valueFormat:i=>i.toFixed(5)},redSeqNo:{max:1107568,fieldName:"redSeqNo",valueFormat:i=>i.toFixed(5)},blue:{max:16,fieldName:"blue",valueFormat:i=>i.toFixed(5)}},v=(i,r,o)=>{let t=[],a=[];for(let l=r;l<i.length;l++){let c=0,e=[];for(let s=0;s<r;s++){let P=i[l-(r-s-1)][o.fieldName];e.push(P)}c=e.reduce((s,P)=>s+P,0),t.push(i[l].openedPhase),a.push(Number(o.valueFormat(c)))}let b=Q(a),p=(T(a)+b)/2;for(let l=0;l<a.length;l++)a[l]=Number((a[l]-p).toFixed(5));return{xAxisData:t,seriesData:a}},d=(i,r,o)=>({myCustom:{},title:{text:o},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},tooltip:{trigger:"axis",show:!0,formatter:"和数：{c}<br/>期号：{b}"},xAxis:{type:"category",data:i,axisLabel:{rotate:30}},yAxis:{type:"value"},series:[{data:r,type:"line",label:{show:!0,position:"top",formatter:"{c}"}}]});return(i,r)=>{const o=k("PtForm");return L(),R(J,null,[u(o,{form:n.form,method:z,defaultButtonsShow:"submit,reset",submitAttrs:O.value,inline:"",comps:n.formComps},null,8,["form","submitAttrs","comps"]),u(h(f),{style:{width:"100%",height:"300px"},option:D.value,autoresize:""},null,8,["option"]),u(h(f),{style:{width:"100%",height:"300px"},option:S.value,autoresize:""},null,8,["option"]),u(h(f),{style:{width:"100%",height:"300px"},option:w.value,autoresize:""},null,8,["option"]),u(h(f),{style:{width:"100%",height:"300px"},option:A.value,autoresize:""},null,8,["option"]),u(h(f),{style:{width:"100%",height:"300px"},option:N.value,autoresize:""},null,8,["option"]),G("div",null,H(y.value),1)],64)}}});export{ee as default};
