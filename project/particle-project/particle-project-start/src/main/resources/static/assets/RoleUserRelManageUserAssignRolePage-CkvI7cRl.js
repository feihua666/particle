import{q as c,u as i}from"./roleUserRelAdminApi-CauF_XVD.js";import{a as p,u as f}from"./userCompItem-ByRBUqu9.js";import{c as h}from"./roleLoginApi-BN2F6i_w.js";import{d as I,a as b,r as s,b as R,o as P,g as M,n as v}from"./index-BAoWe_iC.js";import"./userAdminApi-CSsHgdyh.js";const _=I({__name:"RoleUserRelManageUserAssignRolePage",props:{...p},setup(a){const m=a,t=b({form:{isLazyLoad:!0,uncheckedRoleIds:null},formData:{},dataMethodAllData:null}),n=s([f({props:m,required:!0}),{field:{name:"checkedRoleIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"角色",required:!0},compProps:({form:o})=>({dataInitMethod:({param:e})=>{let r=e.userId;return r?c({id:r}):{data:[]}},dataInitMethodParam:{userId:o.userId},dataMethod:()=>h().then(e=>(t.dataMethodAllData=e.data.data,Promise.resolve(e))),dataMethodResultHandleConvertToTree:!0,showCheckbox:!0})}}]),u=s({buttonText:"确认",permission:"admin:web:roleUserRel:userAssignRole"}),l=o=>(t.form.uncheckedRoleIds=v((t.dataMethodAllData||[]).map(e=>e.id),t.form.checkedRoleIds),i(o)),d=()=>"分配成功，请刷新数据查看";return(o,e)=>{const r=R("PtForm");return P(),M(r,{form:t.form,formData:t.formData,labelWidth:"80",method:l,methodSuccess:d,defaultButtonsShow:"submit,reset",submitAttrs:u.value,buttonsTeleportProps:o.$route.meta.formButtonsTeleportProps,inline:"",layout:1,comps:n.value},null,8,["form","formData","submitAttrs","buttonsTeleportProps","comps"])}}});export{_ as default};
