import{p as h,a as x,r as M}from"./messageTemplateManage-BByk1alj.js";import{d as B,r as b,a as C,b as o,o as R,c as D,e as a,w as s,f as A,F}from"./index-BAoWe_iC.js";import"./treeQueryComps-CWIG2rsy.js";const G=B({__name:"MessageTemplateManagePage",setup(O){const d=b(null),r=C({form:{},formComps:h,tableColumns:[{prop:"name",label:"模板名称",showOverflowTooltip:!0,width:"200"},{prop:"code",label:"编码",showOverflowTooltip:!0},{prop:"titleTpl",label:"消息标题模板",showOverflowTooltip:!0},{prop:"contentTpl",label:"消息内容模板",showOverflowTooltip:!0},{prop:"typeDictName",label:"消息模板分类"},{prop:"isGroup",label:"分组/模板",formatter:(e,t,n,m)=>n?"分组":"模板"},{prop:"remark",label:"描述",showOverflowTooltip:!0},{prop:"seq",label:"排序"}]}),l=b({buttonText:"查询",loading:!1,permission:"admin:web:messageTemplate:pageQuery"}),c=()=>{d.value.refreshData()},f=({pageQuery:e})=>x({...r.form,...e}),g={permission:l.value.permission},w=({row:e,column:t,$index:n})=>n<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:messageTemplate:update",route:{path:"/admin/MessageTemplateManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:messageTemplate:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return M({id:e.id}).then(i=>(c(),Promise.resolve(i)))}}];return(e,t)=>{const n=o("PtButton"),m=o("PtForm"),p=o("PtButtonGroup"),i=o("el-table-column"),T=o("PtTable"),_=o("PtRouteViewPopover");return R(),D(F,null,[a(m,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:r.formComps},{buttons:s(()=>[a(n,{permission:"admin:web:messageTemplate:create",route:"/admin/MessageTemplateManageAdd"},{default:s(()=>t[1]||(t[1]=[A("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(T,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:t[0]||(t[0]=u=>l.value.loading=u),dataMethodResultHandleConvertToTree:!0,paginationProps:g,columns:r.tableColumns},{defaultAppend:s(()=>[a(i,{label:"操作",width:"180"},{default:s(({row:u,column:v,$index:P})=>[a(p,{options:w({row:u,column:v,$index:P})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(_,{level:3})],64)}}});export{G as default};
