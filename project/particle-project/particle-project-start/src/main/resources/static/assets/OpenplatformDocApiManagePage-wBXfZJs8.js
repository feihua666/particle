import{p as x,r as A,d as h}from"./openplatformDocApiAdminApi-CYr1yg_R.js";import{p as T}from"./openplatformDocApiManage-CrxAkwaz.js";import{b as B}from"./FileTools-Cx4MUywI.js";import{d as C,r as f,a as O,b as t,o as R,c as F,e as n,w as p,f as M,F as V}from"./index-DoSQKVHz.js";import"./openplatformDocCompItem-CTq4K4EO.js";import"./openplatformDocDirNameAdminApi-BdaW_xDa.js";import"./openplatformDocApiDocTemplateAdminApi-DiMT_3ZR.js";import"./openplatformOpenapiCompItem-MccejH1j.js";const E=C({__name:"OpenplatformDocApiManagePage",setup(y){const s=f(null),r=O({form:{},formComps:T,tableColumns:[{prop:"code",label:"编码"},{prop:"name",label:"名称"},{prop:"nameSimple",label:"简称"},{prop:"logoUrl",label:"图标",columnView:"image"},{prop:"pricePerTime",label:"每次价格(元)"},{prop:"pricePerTimeDesc",label:"价格文本",showOverflowTooltip:!0},{prop:"description",label:"描述",showOverflowTooltip:!0},{prop:"seq",label:"排序"}]}),l=f({buttonText:"查询",loading:!1,permission:"admin:web:openplatformDocApi:pageQuery"}),u=()=>{s.value.refreshData()},b=({pageQuery:e})=>x({...r.form,...e}),_={permission:l.value.permission},P=({row:e,column:a,$index:m})=>m<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:openplatformDocApi:update",route:{path:"/admin/OpenplatformDocApiManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,position:"more",permission:"admin:web:openplatformDocApi:delete",methodConfirmText:`确定要删除 ${e.name} 吗？删除后将级联删除文档内容及文档内容关联的参数字段、代码示例、响应码数据`,method(){return A({id:e.id}).then(o=>(u(),Promise.resolve(o)))}},{txt:"下载接口文档",text:!0,position:"more",permission:"openplatform:doc:download",methodConfirmText:`确定要下载 ${e.name} 接口文档吗？`,method(){return h({openplatformDocApiId:e.id,convertToPdf:!0}).then(o=>(B(o.data.data.url,e.name+".pdf"),Promise.resolve(o)))}}];return(e,a)=>{const m=t("PtButton"),d=t("PtForm"),c=t("PtButtonGroup"),o=t("el-table-column"),g=t("PtTable"),w=t("PtRouteViewPopover");return R(),F(V,null,[n(d,{form:r.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:r.formComps},{buttons:p(()=>[n(m,{permission:"admin:web:openplatformDocApi:create",route:"/admin/OpenplatformDocApiManageAdd"},{default:p(()=>a[1]||(a[1]=[M("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(g,{ref_key:"tableRef",ref:s,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:a[0]||(a[0]=i=>l.value.loading=i),paginationProps:_,columns:r.tableColumns},{defaultAppend:p(()=>[n(o,{label:"操作",width:"180"},{default:p(({row:i,column:D,$index:v})=>[n(c,{options:P({row:i,column:D,$index:v}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(w,{level:3})],64)}}});export{E as default};
