import{a as c,b as i}from"./roleUserRelAdminApi-IKFczxuF.js";import{r as p,a as f}from"./roleCompItem-DmljlYC0.js";import{l as h}from"./userAdminApi-BrVTPQqU.js";import{d as b,a as I,r as s,b as P,o as U,g as A,n as M}from"./index-DoSQKVHz.js";import"./roleAdminApi-DIrxWkaX.js";const g=b({__name:"RoleUserRelManageRoleAssignUserPage",props:{...p},setup(a){const m=a,t=I({form:{isLazyLoad:!0,uncheckedUserIds:null},formData:{},dataMethodAllData:null}),l=s([f({props:m,required:!0}),{field:{name:"checkedUserIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"用户",required:!0},compProps:({form:o})=>({dataInitMethod:({param:e})=>{let r=e.roleId;return r?c({id:r}):{data:[]}},dataInitMethodParam:{roleId:o.roleId},dataMethod:()=>h().then(e=>(t.dataMethodAllData=e.data.data,Promise.resolve(e))),showCheckbox:!0,props:{label:"nickname"}})}}]),n=s({buttonText:"确认",permission:"admin:web:roleUserRel:roleAssignUser"}),d=o=>(t.form.uncheckedUserIds=M((t.dataMethodAllData||[]).map(e=>e.id),t.form.checkedUserIds),i(o)),u=()=>"分配成功，请刷新数据查看";return(o,e)=>{const r=P("PtForm");return U(),A(r,{form:t.form,formData:t.formData,labelWidth:"80",method:d,methodSuccess:u,defaultButtonsShow:"submit,reset",submitAttrs:n.value,buttonsTeleportProps:o.$route.meta.formButtonsTeleportProps,inline:"",layout:1,comps:l.value},null,8,["form","formData","submitAttrs","buttonsTeleportProps","comps"])}}});export{g as default};
