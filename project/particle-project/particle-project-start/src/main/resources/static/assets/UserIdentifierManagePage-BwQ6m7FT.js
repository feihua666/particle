import{a as B,p as C,d as y}from"./userCompItem-B-v6F0hj.js";import{b as T}from"./userIdentifierManage-BQKyjo3s.js";import{d as M,r as b,a as R,p as A,b as t,o as D,c as F,e as o,w as s,f as V,F as U}from"./index-q46_oeYE.js";import"./userAdminApi-Cok5X5U2.js";const S=M({__name:"UserIdentifierManagePage",props:{...B},setup(P){const l=b(null),i=R({form:{},formComps:T({props:P}),tableColumns:A}),a=b({buttonText:"查询",loading:!1,permission:"admin:web:userIdentifier:pageQuery"}),f=()=>{l.value.refreshData()},g=({pageQuery:e})=>C({...i.form,...e}),_={permission:a.value.permission},w=({row:e,column:n,$index:u})=>{if(u<0)return[];let m={id:e.id},r={identifierId:e.id,identifier:e.identifier};return[{txt:"编辑",text:!0,permission:"admin:web:userIdentifier:update",route:{path:"/admin/userIdentifierManageUpdate",query:r}},{txt:"删除",text:!0,position:"more",permission:"admin:web:userIdentifier:delete",methodConfirmText:`删除用户账号会造成用户当前账号不能登录，同时会删除当前账号的密码数据。确定要删除 ${e.identifier} 吗？`,method(){return y(m).then(d=>(f(),Promise.resolve(d)))}},{txt:"重置密码",text:!0,permission:"admin:web:userIdentifierPwd:identifier:resetPassword",position:"more",methodConfirmText:"此操作只影响当前登录标识密码，如果用户还有其它登录标识（其密码不受响应），确定要重置密码吗？",route:{path:"/admin/userIdentifierPwdManageResetPassword",query:r}},{txt:"用户密码",text:!0,permission:"admin:web:userIdentifierPwd:pageQuery",position:"more",icon:"View",type:"primary",route:{path:"/admin/userIdentifierPwdManagePage",query:r}}]},x={text:!0,buttonText:"更多"};return(e,n)=>{const u=t("PtButton"),m=t("PtForm"),r=t("PtButtonGroup"),c=t("el-table-column"),d=t("PtTable"),I=t("PtRouteViewPopover");return D(),F(U,null,[o(m,{form:i.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:a.value,inline:"",labelWidth:"80",comps:i.formComps},{buttons:s(()=>[o(u,{permission:"admin:web:userIdentifier:create",route:"/admin/userIdentifierManageAdd"},{default:s(()=>n[1]||(n[1]=[V("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(d,{ref_key:"tableRef",ref:l,"default-expand-all":"",dataMethod:g,onDataMethodDataLoading:n[0]||(n[0]=p=>a.value.loading=p),paginationProps:_,columns:i.tableColumns},{defaultAppend:s(()=>[o(c,{label:"操作",width:"220"},{default:s(({row:p,column:h,$index:v})=>[o(r,{options:w({row:p,column:h,$index:v}),dropdownTriggerButtonOptions:x},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(I,{level:3})],64)}}});export{S as default};
