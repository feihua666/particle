import{b as h,e as x}from"./deptCompItem-Cgt59Y8_.js";import{p as B}from"./deptTreeManage-Ck-wzuy_.js";import{d as D,r as f,a as C,b as t,o as R,c as M,e as o,w as n,f as A,F as N}from"./index-DoSQKVHz.js";import"./deptTreeNameAdminApi-B9jKmPVM.js";import"./treeQueryComps-CWIG2rsy.js";const q=D({__name:"DeptTreeManagePage",setup(F){const i=f(null),r=C({form:{},formComps:B,tableColumns:[{prop:"deptName",label:"部门名称",showOverflowTooltip:!0},{prop:"deptTreeNameName",label:"部门树名称",showOverflowTooltip:!0},{prop:"parentName",label:"父级",showOverflowTooltip:!0},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),s=f({buttonText:"查询",loading:!1,permission:"admin:web:deptTree:pageQuery"}),u=()=>{i.value.refreshData()},b=({pageQuery:e})=>h({...r.form,...e}),_={permission:s.value.permission},T=({row:e,column:a,$index:l})=>l<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:deptTree:update",route:{path:"/admin/DeptTreeManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:deptTree:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return x({id:e.id}).then(m=>(u(),Promise.resolve(m)))}}];return(e,a)=>{const l=t("PtButton"),d=t("PtForm"),c=t("PtButtonGroup"),m=t("el-table-column"),w=t("PtTable"),P=t("PtRouteViewPopover");return R(),M(N,null,[o(d,{form:r.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",layout:[[8,8],3],comps:r.formComps},{buttons:n(()=>[o(l,{permission:"admin:web:deptTree:create",route:"/admin/DeptTreeManageAdd"},{default:n(()=>a[1]||(a[1]=[A("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(w,{ref_key:"tableRef",ref:i,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:a[0]||(a[0]=p=>s.value.loading=p),dataMethodResultHandleConvertToTree:!0,paginationProps:_,columns:r.tableColumns},{defaultAppend:n(()=>[o(m,{label:"操作",width:"180"},{default:n(({row:p,column:v,$index:g})=>[o(c,{options:T({row:p,column:v,$index:g})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(P,{level:3})],64)}}});export{q as default};
