import{d as P,r as f,a as O,b as l,o as A,c as C,e as n,w as s,f as c,F as B,ag as R,ah as k}from"./index-BAoWe_iC.js";import{p as F}from"./tenantManage-lTXBm3gs.js";import"./userCompItem-ByRBUqu9.js";import"./userAdminApi-CSsHgdyh.js";const I=P({__name:"TenantManagePage",setup(D){const d=f(null),i=O({form:{},formComps:F,tableColumns:[{prop:"name",label:"租户名称",showOverflowTooltip:!0},{prop:"code",label:"租户编码",showOverflowTooltip:!0},{prop:"tenantLogoJson",label:"租户logo",columnView:"image"},{prop:"tenantLogoTextJson",label:"租户logo文本",showOverflowTooltip:!0},{prop:"tenantfaviconJson",label:"favicon图标",showOverflowTooltip:!0},{prop:"tenantWebTitleJson",label:"网页标题",showOverflowTooltip:!0},{prop:"isFormal",label:"是否正式",formatter:(e,t,o,a)=>o?"正式":"试用"},{prop:"userLimitCount",label:"用户数限制"},{prop:"effectiveAt",label:"生效日期",showOverflowTooltip:!0},{prop:"expireAt",label:"过期时间",showOverflowTooltip:!0},{prop:"masterUserNickname",label:"主用户昵称",showOverflowTooltip:!0},{prop:"isDisabled",label:"是否禁用",formatter:(e,t,o,a)=>{let r=o?"禁用":"启用";return o&&e.disabledReason&&(r=r+`(${e.disabledReason})`),r}},{prop:"userName",label:"姓名",showOverflowTooltip:!0},{prop:"email",label:"邮箱",showOverflowTooltip:!0},{prop:"mobile",label:"手机号"},{prop:"tenantDomain",label:"租户域名",showOverflowTooltip:!0},{prop:"tenantThemeJson",label:"租户主题"},{prop:"tenantDefaultRouteJson",label:"默认路由",showOverflowTooltip:!0},{prop:"configJson",label:"配置json",showOverflowTooltip:!0},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),p=f({buttonText:"查询",loading:!1,permission:"admin:web:tenant:pageQuery"}),b=()=>{d.value.refreshData()},w=({pageQuery:e})=>R({...i.form,...e}),v={permission:p.value.permission},T=({row:e,column:t,$index:o})=>{if(o<0)return[];e.id;let a={tenantId:e.id,masterUserId:e.masterUserId,masterUserNickname:e.masterUserNickname};return[{txt:"编辑",text:!0,permission:"admin:web:tenant:update",route:{path:"/admin/TenantManageUpdate",query:a}},{txt:"删除",text:!0,permission:"admin:web:tenant:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return k({id:e.id}).then(m=>(b(),Promise.resolve(m)))}},{txt:"租户分配应用",text:!0,position:"more",permission:"admin:web:tenantFuncApplication:tenantAssignFuncApplication",route:{path:"/admin/tenant/tenantAssignFuncApplication",query:a}}]};return(e,t)=>{const o=l("PtButton"),a=l("PtForm"),r=l("PtButtonGroup"),m=l("el-table-column"),g=l("PtTable"),h=l("PtRouteViewPopover");return A(),C(B,null,[n(a,{form:i.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:p.value,inline:"",labelWidth:"80",comps:i.formComps},{buttons:s(()=>[n(o,{permission:"admin:web:tenant:create",route:"/admin/TenantManageAdd"},{default:s(()=>t[1]||(t[1]=[c("添加")])),_:1}),n(o,{permission:"admin:web:tenant:oneClickCreate",route:"/admin/tenantManageOneClickAdd"},{default:s(()=>t[2]||(t[2]=[c("一键添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(g,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:t[0]||(t[0]=u=>p.value.loading=u),paginationProps:v,columns:i.tableColumns},{defaultAppend:s(()=>[n(m,{label:"操作",width:"220"},{default:s(({row:u,column:_,$index:x})=>[n(r,{options:T({row:u,column:_,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(h,{level:3})],64)}}});export{I as default};
