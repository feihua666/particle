import{u as P,p as _}from"./lowcodeModelItemAdminApi-DZQnyPqQ.js";import{l as y}from"./lowcodeModelAdminApi-DY5k5pOe.js";import{d as A,r as g,a as v,b as u,o as C,c as M,e as p,F as O}from"./index-BAoWe_iC.js";const F=A({__name:"LowcodeModelItemDesignManagePage",props:{lowcodeModelId:{type:String}},setup(V){const c=g(null),E=V,d=(e,l,r)=>({is:"PtSwitch",modelValue:e.row[l],method:t=>(e.row[l]=t,P(e.row).then(n=>(e.row.version++,Promise.resolve(n)))),methodSuccess:"修改成功"}),o=(e,l,r,t,n=[])=>{e.row.designJsonObj||(e.row.designJsonObj=JSON.parse(e.row.designJson));let a=e.row.designJsonObj,b=a.jsonItemMap,w=b[l];return{is:"PtSwitch",modelValue:w[r],method:f=>(w[r]=f,n&&n.forEach(m=>{b[m][r]=f}),e.row.designJson=JSON.stringify(a),P(e.row).then(m=>(e.row.version++,Promise.resolve(m)))),methodSuccess:"修改成功"}},s=v({form:{},formComps:[{field:{name:"columnName"},element:{comp:"el-input",formItemProps:{label:"字段名称"},compProps:{clearable:!0,placeholder:"左前缀匹配"}}},{field:{name:"propertyName"},element:{comp:"el-input",formItemProps:{label:"实体属性名称"},compProps:{clearable:!0,placeholder:"左前缀匹配"}}},{field:{name:"lowcodeModelId",value:E.lowcodeModelId},element:{comp:"PtSelect",formItemProps:{label:"模型"},compProps:{dataMethod:y}}}],tableColumns:[{label:"字段名称",prop:"columnName",fixed:!0},{label:"实体属性名称",prop:"propertyName"},{label:"字段类型",prop:"jdbcType"},{label:"实体属性类型",prop:"propertyType"},{label:"实体属性类型全路径",prop:"propertyFullType",showOverflowTooltip:!0},{label:"全注释",prop:"commentFull",showOverflowTooltip:!0},{label:"简洁注释",prop:"commentSimple",showOverflowTooltip:!0},{label:"响应实体",nestColumns:[{label:"是否使用",columnView:e=>o(e,"VO","isUse","是否使用",["UPDATE"])},{label:"是否翻译字典",columnView:e=>o(e,"VO","isTransDictId")}]},{label:"添加",nestColumns:[{label:"是否使用",columnView:e=>o(e,"CREATE","isUse","是否使用",["UPDATE"])},{label:"是否必填",columnView:e=>o(e,"CREATE","isRequired","是否必填",["UPDATE"])}]},{label:"修改(联动添加)",nestColumns:[{label:"是否使用",columnView:e=>o(e,"UPDATE","isUse")},{label:"是否必填",columnView:e=>o(e,"UPDATE","isRequired")}]},{label:"列表查询",nestColumns:[{label:"是否使用",columnView:e=>o(e,"QUERY_LIST","isUse","是否使用",["QUERY_PAGE"])},{label:"是否必填",columnView:e=>o(e,"QUERY_LIST","isRequired","是否必填",["QUERY_PAGE"])},{label:"左模糊查询",columnView:e=>o(e,"QUERY_LIST","isUseLike","左模糊查询",["QUERY_PAGE"])}]},{label:"分页列表查询(联动列表查询)",nestColumns:[{label:"是否使用",columnView:e=>o(e,"QUERY_PAGE","isUse")},{label:"是否必填",columnView:e=>o(e,"QUERY_PAGE","isRequired")},{label:"左模糊查询",columnView:e=>o(e,"QUERY_PAGE","isUseLike")}]},{label:"数据实体",nestColumns:[{label:"是否使用",columnView:e=>o(e,"DO","isUse","是否使用",["DOMAIN"])}]},{label:"领域模型(联动数据实体)",nestColumns:[{label:"是否使用",columnView:e=>o(e,"DOMAIN","isUse")}]},{label:"默认值",prop:"defaultValue"},{label:"是否唯一",prop:"isUnique",columnView:e=>d(e,"isUnique")},{label:"是否必填",prop:"isRequired"},{label:"是否主键",prop:"isKey"},{label:"是否主键自增",prop:"isKeyIdentity"},{label:"是否关键字",prop:"isKeyWord"},{label:"长度",prop:"columnLength"},{label:"小数位长度",prop:"fractionLength"},{label:"是否外键",prop:"isForeignKey",columnView:e=>d(e,"isForeignKey")},{label:"模型",prop:"lowcodeModelName"},{label:"设计数据",prop:"designJson",showOverflowTooltip:!0},{label:"描述",prop:"remark"}]}),i=g({buttonText:"查询",loading:!1,permission:"admin:web:lowcodeModelItem:pageQuery"}),U=()=>{c.value.refreshData()},h=({pageQuery:e})=>_({...s.form,...e}),T={permission:i.value.permission},I=[7,8,11,12,16,17,18,20],R=({row:e,column:l,rowIndex:r,columnIndex:t})=>I.indexOf(t)>=0?{background:"#F2F3F5"}:{};return(e,l)=>{const r=u("PtForm"),t=u("PtTable"),n=u("PtRouteViewPopover");return C(),M(O,null,[p(r,{form:s.form,method:U,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:s.formComps},null,8,["form","submitAttrs","comps"]),p(t,{ref_key:"tableRef",ref:c,"default-expand-all":"",cellStyle:R,dataMethod:h,onDataMethodDataLoading:l[0]||(l[0]=a=>i.value.loading=a),paginationProps:T,columns:s.tableColumns},null,8,["columns"]),p(n,{level:3})],64)}}});export{F as default};
