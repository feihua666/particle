import{p as w,r as C}from"./cmsSiteAdminApi-BnmDz2eX.js";import{p as B}from"./cmsSiteManage-zcHYzBau.js";import{d as S,r as b,a as R,b as o,o as A,c as D,e as a,w as s,f as M,F as T}from"./index-q46_oeYE.js";const G=S({__name:"CmsSiteManagePage",setup(F){const u=b(null),r=R({form:{},formComps:B,tableColumns:[{prop:"code",label:"站点编码"},{prop:"name",label:"站点名称"},{prop:"domain",label:"站点域名"},{prop:"path",label:"上下文路径"},{prop:"templatePath",label:"站点模板路径"},{prop:"templateIndex",label:"站点首页模板"},{prop:"staticPath",label:"静态页路径"},{prop:"isPrimeSite",label:"是否主站点",formatter:(e,t,n,m)=>n?"是":"否"},{prop:"pv",label:"页面访问量"},{prop:"iv",label:"页面访问ip数"},{prop:"uv",label:"页面访问用户数"}]}),l=b({buttonText:"查询",loading:!1,permission:"admin:web:cmsSite:pageQuery"}),d=()=>{u.value.refreshData()},f=({pageQuery:e})=>w({...r.form,...e}),_={permission:l.value.permission},P=({row:e,column:t,$index:n})=>n<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:cmsSite:update",route:{path:"/admin/CmsSiteManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:cmsSite:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return C({id:e.id}).then(p=>(d(),Promise.resolve(p)))}}];return(e,t)=>{const n=o("PtButton"),m=o("PtForm"),c=o("PtButtonGroup"),p=o("el-table-column"),g=o("PtTable"),v=o("PtRouteViewPopover");return A(),D(T,null,[a(m,{form:r.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:r.formComps},{buttons:s(()=>[a(n,{permission:"admin:web:cmsSite:create",route:"/admin/CmsSiteManageAdd"},{default:s(()=>t[1]||(t[1]=[M("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(g,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:t[0]||(t[0]=i=>l.value.loading=i),paginationProps:_,columns:r.tableColumns},{defaultAppend:s(()=>[a(p,{label:"操作",width:"180"},{default:s(({row:i,column:x,$index:h})=>[a(c,{options:P({row:i,column:x,$index:h})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(v,{level:3})],64)}}});export{G as default};
