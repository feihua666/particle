import{p as v,c as y,r as x}from"./dataQueryDatasourceAdminApi-D7kO4g4U.js";import{p as T}from"./dataQueryDatasourceManage-Bp2cl6CK.js";import{d as Q,r as b,a as B,b as o,o as C,c as R,e as a,w as u,f as M,F as A}from"./index-DoSQKVHz.js";import"./dataqueryProviderCompItem-CG_2SCsK.js";import"./dataQueryProviderAdminApi-BdKPZMyj.js";const G=Q({__name:"DataQueryDatasourceManagePage",setup(O){const d=b(null),r=B({form:{},formComps:T,tableColumns:[{prop:"code",label:"编码"},{prop:"name",label:"名称",showOverflowTooltip:!0},{prop:"typeDictName",label:"类型"},{prop:"configJson",label:"json配置",showOverflowTooltip:!0},{prop:"username",label:"用户名",showOverflowTooltip:!0},{prop:"password",label:"密码",showOverflowTooltip:!0},{prop:"dataQueryProviderName",label:"数据查询供应商"},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),m=b({buttonText:"查询",loading:!1,permission:"admin:web:dataQueryDatasource:pageQuery"}),l=()=>{d.value.refreshData()},f=({pageQuery:e})=>v({...r.form,...e}),w={permission:m.value.permission},_=({row:e,column:n,$index:i})=>{if(i<0)return[];let s={id:e.id};return[{txt:"编辑",text:!0,permission:"admin:web:dataQueryDatasource:update",route:{path:"/admin/DataQueryDatasourceManageUpdate",query:s}},{txt:"复制",text:!0,position:"more",permission:"admin:web:dataQueryDatasource:copy",methodConfirmText:`确定要复制 ${e.name} 吗？`,methodSuccess:t=>{r.form.name=t.data.data.name,l()},method(){return y({id:e.id}).then(t=>Promise.resolve(t))}},{txt:"重新加载",text:!0,position:"more",permission:"admin:web:dataQueryDatasource:reload",route:{path:"/admin/DataQueryDatasourceManageReload",query:s}},{txt:"删除",text:!0,position:"more",permission:"admin:web:dataQueryDatasource:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return x({id:e.id}).then(t=>(l(),Promise.resolve(t)))}}]};return(e,n)=>{const i=o("PtButton"),s=o("PtForm"),c=o("PtButtonGroup"),t=o("el-table-column"),D=o("PtTable"),h=o("PtRouteViewPopover");return C(),R(A,null,[a(s,{form:r.form,method:l,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",labelWidth:"100",comps:r.formComps},{buttons:u(()=>[a(i,{permission:"admin:web:dataQueryDatasource:create",route:"/admin/DataQueryDatasourceManageAdd"},{default:u(()=>n[1]||(n[1]=[M("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(D,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:n[0]||(n[0]=p=>m.value.loading=p),paginationProps:w,columns:r.tableColumns},{defaultAppend:u(()=>[a(t,{label:"操作",width:"180"},{default:u(({row:p,column:P,$index:g})=>[a(c,{options:_({row:p,column:P,$index:g}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(h,{level:3})],64)}}});export{G as default};
