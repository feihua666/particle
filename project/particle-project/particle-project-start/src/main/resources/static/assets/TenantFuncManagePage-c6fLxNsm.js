import{p as v,r as x}from"./tenantFuncAdminApi-BUsaNk4E.js";import{p as B}from"./tenantFuncManage-DydLIvII.js";import{d as M,r as b,a as C,b as e,o as R,c as A,e as n,w as r,f as D,F as N,ap as V}from"./index-CmUqrYxc.js";const L=M({__name:"TenantFuncManagePage",setup(y){const p=b(null),a=C({form:{},formComps:B,tableColumns:[{prop:"name",label:"名称"},{prop:"icon",label:"图标",columnView:"elIcon",width:60},{prop:"typeDictName",label:"类型"},{prop:"parentFuncName",label:"父级"},{prop:"funcApplicationName",label:"功能应用名称"},{prop:"tenantName",label:"租户名称"}]}),s=b({buttonText:"查询",loading:!1,permission:"admin:web:tenantFunc:pageQuery"}),i=()=>{p.value.refreshData()},f=({pageQuery:t})=>v({...a.form,...t}),_={permission:s.value.permission},P=({row:t,column:o,$index:l})=>l<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:tenantFunc:update",route:{path:"/admin/TenantFuncManageUpdate",query:{id:t.id}}},{txt:"删除",text:!0,permission:"admin:web:tenantFunc:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return x({id:t.id}).then(m=>(i(),Promise.resolve(m)))}}],T=t=>V(t,null,"funcId","parentFuncId");return(t,o)=>{const l=e("PtButton"),c=e("PtForm"),d=e("PtButtonGroup"),m=e("el-table-column"),g=e("PtTable"),F=e("PtRouteViewPopover");return R(),A(N,null,[n(c,{form:a.form,method:i,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:a.formComps},{buttons:r(()=>[n(l,{permission:"admin:web:tenantFunc:create",route:"/admin/TenantFuncManageAdd"},{default:r(()=>o[1]||(o[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(g,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:o[0]||(o[0]=u=>s.value.loading=u),dataMethodResultHandleListToTreeMethod:T,paginationProps:_,columns:a.tableColumns},{defaultAppend:r(()=>[n(m,{label:"操作",width:"180"},{default:r(({row:u,column:h,$index:w})=>[n(d,{options:P({row:u,column:h,$index:w})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(F,{level:3})],64)}}});export{L as default};
