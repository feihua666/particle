import{p as C,r as R}from"./oauth2RegisteredClientAdminApi-CNS7sq0L.js";import{p as O}from"./oauth2RegisteredClientManage-BT6UKzZW.js";import{as as B,at as I,E as A,d as M,r as b,a as D,b as r,o as S,c as y,e as n,w as s,f as E,F}from"./index-DMP92Tz2.js";let h=(a,t="success")=>{A({showClose:!0,message:a,type:t,showIcon:!0,grouping:!0})};function k(a,t=!0){B(a).then(o=>{h("已复制！")}).catch(o=>{h("复制失败！","error"),t&&I.alert(a,"复制失败,请手动复制",{confirmButtonText:"确定"})})}const G=M({__name:"Oauth2RegisteredClientManagePage",setup(a){const t=b(null),o=D({form:{},formComps:O,tableColumns:[{prop:"clientName",label:"客户端名称"},{prop:"clientId",label:"客户端ID",showOverflowTooltip:!0},{prop:"clientSecret",label:"秘钥",showOverflowTooltip:!0},{prop:"clientSecretExpiresAt",label:"秘钥过期时间",showOverflowTooltip:!0},{prop:"clientIdIssuedAt",label:"发布时间",showOverflowTooltip:!0},{prop:"clientAuthenticationMethods",label:"身份验证方法",showOverflowTooltip:!0},{prop:"authorizationGrantTypes",label:"授权类型",showOverflowTooltip:!0},{prop:"redirectUris",label:"定向URI",showOverflowTooltip:!0},{prop:"scopes",label:"访问范围",showOverflowTooltip:!0},{prop:"clientSettings",label:"客户端设置",showOverflowTooltip:!0},{prop:"tokenSettings",label:"令牌设置",showOverflowTooltip:!0}]}),i=b({buttonText:"查询",loading:!1,permission:"admin:web:oauth2RegisteredClient:pageQuery"}),c=()=>{t.value.refreshData()},w=({pageQuery:e})=>C({...o.form,...e}),g={permission:i.value.permission},_=({row:e,column:l,$index:p})=>p<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:oauth2RegisteredClient:update",route:{path:"/admin/Oauth2RegisteredClientManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,position:"more",permission:"admin:web:oauth2RegisteredClient:delete",methodConfirmText:`确定要删除 ${e.clientName} 吗？`,method(){return R({id:e.id}).then(u=>(c(),Promise.resolve(u)))}},{txt:"复制客户端ID和秘钥",text:!0,position:"more",method(){k(`clientId: ${e.clientId}
 clientSecret: ${e.clientSecret}`)}}];return(e,l)=>{const p=r("PtButton"),d=r("PtForm"),f=r("PtButtonGroup"),u=r("el-table-column"),v=r("PtTable"),T=r("PtRouteViewPopover");return S(),y(F,null,[n(d,{form:o.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:o.formComps},{buttons:s(()=>[n(p,{permission:"admin:web:oauth2RegisteredClient:create",route:"/admin/Oauth2RegisteredClientManageAdd"},{default:s(()=>l[1]||(l[1]=[E("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(v,{ref_key:"tableRef",ref:t,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:l[0]||(l[0]=m=>i.value.loading=m),paginationProps:g,columns:o.tableColumns},{defaultAppend:s(()=>[n(u,{label:"操作",width:"180"},{default:s(({row:m,column:P,$index:x})=>[n(f,{options:_({row:m,column:P,$index:x}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(T,{level:3})],64)}}});export{G as default};
