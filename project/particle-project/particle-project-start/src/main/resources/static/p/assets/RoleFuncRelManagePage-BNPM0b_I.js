import{p as A,a as N}from"./roleFuncRelAdminApi-idsvAMGQ.js";import{d as v,v as w,r as x,a as M,x as C,b as r,o as T,c as h,e as o,w as n,f as u,F as D}from"./index-DMP92Tz2.js";import{r as q,a as Q}from"./roleCompItem-DOxUI41K.js";import"./roleAdminApi-Cr9vyj8L.js";const G=v({__name:"RoleFuncRelManagePage",props:{...w,...q},setup(y){const F=x(null),b=y,a=M({form:{},formComps:[C({props:b,required:!1}),Q({props:b,required:!1})],tableColumns:[{prop:"funcName",label:"功能菜单名称",showOverflowTooltip:!0,width:120},{prop:"roleName",label:"角色名称",showOverflowTooltip:!0,width:120}]}),m=x({buttonText:"查询",loading:!1,permission:"admin:web:roleFuncRel:pageQuery"}),g=()=>{F.value.refreshData()},B=({pageQuery:e})=>A({...a.form,...e}),I={permission:m.value.permission},P=({row:e,column:t,$index:l})=>{if(l<0)return[];let i={id:e.id},d={funcId:e.funcId,funcName:e.funcName},c={funcId:e.funcId,funcName:e.funcName},p={roleId:e.roleId,roleName:e.roleName},f={roleId:e.roleId,roleName:e.roleName};return[{txt:"为该功能菜单分配角色",text:!0,permission:"admin:web:roleFuncRel:funcAssignRole",route:{path:"/admin/roleFuncRelManageFuncAssignRole",query:d}},{txt:"为该角色分配功能菜单",text:!0,permission:"admin:web:roleFuncRel:roleAssignFunc",route:{path:"/admin/roleFuncRelManageRoleAssignFunc",query:p}},{txt:"为该功能菜单清空角色",text:!0,methodConfirmText:`您将清空功能菜单 ${e.funcName} 所有角色,该功能菜单将不再分配给任何角色，同时拥有涉及对应角色的用户功能将受到影响，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleFuncRel:deleteByFuncId",route:{path:"/admin/roleFuncRelManageDeleteByFuncId",query:c}},{txt:"为该角色清空功能菜单",text:!0,methodConfirmText:`您将清空角色 ${e.roleName} 所有功能菜单,该角色将不再拥有任何功能菜单，同时拥有该角色的用户功能将受到影响，请谨慎操作！！！，确定要清空吗？`,permission:"admin:web:roleFuncRel:deleteByRoleId",route:{path:"/admin/roleFuncRelManageDeleteByRoleId",query:f}},{txt:"删除",text:!0,permission:"admin:web:roleFuncRel:delete",methodConfirmText:`删除后角色 ${e.roleName} 将不再拥有功能菜单 ${e.funcName}，确定要删除吗？`,method(){return N(i).then(R=>(g(),Promise.resolve(R)))}}]};return(e,t)=>{const l=r("PtButton"),i=r("PtForm"),d=r("PtButtonGroup"),c=r("el-table-column"),p=r("PtTable"),f=r("PtRouteViewPopover");return T(),h(D,null,[o(i,{form:a.form,method:g,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:a.formComps},{buttons:n(()=>[o(l,{permission:"admin:web:roleFuncRel:create",route:"/admin/roleFuncRelManageAdd"},{default:n(()=>t[1]||(t[1]=[u("添加")])),_:1}),o(l,{permission:"admin:web:roleFuncRel:funcAssignRole",route:"/admin/roleFuncRelManageFuncAssignRole"},{default:n(()=>t[2]||(t[2]=[u("功能菜单分配角色")])),_:1}),o(l,{permission:"admin:web:roleFuncRel:roleAssignFunc",route:"/admin/roleFuncRelManageRoleAssignFunc"},{default:n(()=>t[3]||(t[3]=[u("角色分配功能菜单")])),_:1}),o(l,{permission:"admin:web:roleFuncRel:deleteByFuncId",route:"/admin/roleFuncRelManageDeleteByFuncId"},{default:n(()=>t[4]||(t[4]=[u("清空功能菜单角色")])),_:1}),o(l,{permission:"admin:web:roleFuncRel:deleteByRoleId",route:"/admin/roleFuncRelManageDeleteByRoleId"},{default:n(()=>t[5]||(t[5]=[u("清空角色功能菜单")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(p,{ref_key:"tableRef",ref:F,"default-expand-all":"",dataMethod:B,onDataMethodDataLoading:t[0]||(t[0]=s=>m.value.loading=s),paginationProps:I,columns:a.tableColumns},{defaultAppend:n(()=>[o(c,{label:"操作"},{default:n(({row:s,column:R,$index:_})=>[o(d,{options:P({row:s,column:R,$index:_})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(f,{level:3})],64)}}});export{G as default};
