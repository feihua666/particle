import{p as P,r as T}from"./funcApplicationAdminApi-CyeDN0sA.js";import{p as x}from"./funcApplicationManage-D3jLogiW.js";import{d as F,r as b,a as R,b as a,o as B,c as C,e as i,w as p,f as O,F as D}from"./index-DMP92Tz2.js";import"./treeQueryComps-CWIG2rsy.js";const q=F({__name:"FuncApplicationManagePage",setup(M){const c=b(null),l=R({form:{},formComps:x,tableColumns:[{prop:"code",label:"应用编码",showOverflowTooltip:!0},{prop:"name",label:"应用名称",showOverflowTooltip:!0},{prop:"parentName",label:"父级",showOverflowTooltip:!0},{prop:"isGroup",label:"是否分组",formatter:(t,o,e,r)=>e?"应用组":"应用"},{prop:"applicationLogoUrl",label:"应用logo",columnView:"image"},{prop:"applicationIconUrl",label:"应用图标",columnView:"image"},{prop:"isDisabled",label:"是否禁用",formatter:(t,o,e,r)=>{let n=e?"禁用":"启用";return e&&t.disabledReason&&(n=n+`(${t.disabledReason})`),n}},{prop:"applicationTheme",label:"应用主题",showOverflowTooltip:!0},{prop:"applicationDefaultRoute",label:"默认路由",showOverflowTooltip:!0},{prop:"configJson",label:"配置json",showOverflowTooltip:!0},{prop:"seq",label:"排序"},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),s=b({buttonText:"查询",loading:!1,permission:"admin:web:funcApplication:pageQuery"}),d=()=>{c.value.refreshData()},w=({pageQuery:t})=>P({...l.form,...t}),g={permission:s.value.permission},A=({row:t,column:o,$index:e})=>{if(e<0)return[];let r={id:t.id};return[{txt:"分配功能",text:!0,permission:"admin:web:funcApplicationFuncRel:funcApplicationAssignFunc",route:{path:"/admin/funcApplicationAssignFunc",query:{funcApplicationId:t.id,funcApplicationName:t.name}}},{txt:"编辑",position:"more",text:!0,permission:"admin:web:funcApplication:update",route:{path:"/admin/FuncApplicationManageUpdate",query:r}},{txt:"删除",position:"more",text:!0,permission:"admin:web:funcApplication:delete",methodConfirmText:`确定要删除 ${t.name} 吗？`,method(){return T({id:t.id}).then(u=>(d(),Promise.resolve(u)))}}]};return(t,o)=>{const e=a("PtButton"),r=a("PtForm"),n=a("PtButtonGroup"),f=a("el-table-column"),u=a("PtTable"),_=a("PtRouteViewPopover");return B(),C(D,null,[i(r,{form:l.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:l.formComps},{buttons:p(()=>[i(e,{permission:"admin:web:funcApplication:create",route:"/admin/FuncApplicationManageAdd"},{default:p(()=>o[1]||(o[1]=[O("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),i(u,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:o[0]||(o[0]=m=>s.value.loading=m),dataMethodResultHandleConvertToTree:!0,paginationProps:g,columns:l.tableColumns},{defaultAppend:p(()=>[i(f,{label:"操作",width:"220"},{default:p(({row:m,column:v,$index:h})=>[i(n,{options:A({row:m,column:v,$index:h}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),i(_,{level:3})],64)}}});export{q as default};
