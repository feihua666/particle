import{p as v,r as w}from"./dynamicTableFieldAdminApi-lVbKTqUU.js";import{p as x}from"./dynamicTableFieldManage-rkKPoSEj.js";import{d as B,r as b,a as D,b as o,o as h,c as C,e as a,w as r,f as R,F as A}from"./index-BIT85eDf.js";import"./dataCompItem-B8u6Qt1U.js";import"./dynamicTableAdminApi-BJev9B-p.js";import"./dynamicDataCategoryAdminApi-DP_GaZhF.js";import"./dynamicDataIndicatorCategoryAdminApi-CUUVw3kq.js";const L=B({__name:"DynamicTableFieldManagePage",setup(M){const u=b(null),l=D({form:{},formComps:x,tableColumns:[{prop:"dynamicTableName",label:"动态数据表格名称"},{prop:"dynamicTableComment",label:"动态数据表格注释"},{prop:"name",label:"字段名称"},{prop:"comment",label:"字段注释"},{prop:"type",label:"字段类型"},{prop:"isRequired",label:"是否必填",formatter:(e,t,n,i)=>n?"必填":"选填"},{prop:"defaultValue",label:"默认值"}]}),m=b({buttonText:"查询",loading:!1,permission:"admin:web:dynamicTableField:pageQuery"}),d=()=>{u.value.refreshData()},f=({pageQuery:e})=>v({...l.form,...e}),_={permission:m.value.permission},P=({row:e,column:t,$index:n})=>n<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:dynamicTableField:update",route:{path:"/admin/DynamicTableFieldManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:dynamicTableField:delete",methodConfirmText:`确定要删除 ${e.name} 吗？删除后数据（包括导入的数据）无法恢复，请谨慎操作！`,method(){return w({id:e.id}).then(s=>(d(),Promise.resolve(s)))}}];return(e,t)=>{const n=o("PtButton"),i=o("PtForm"),c=o("PtButtonGroup"),s=o("el-table-column"),T=o("PtTable"),g=o("PtRouteViewPopover");return h(),C(A,null,[a(i,{form:l.form,method:d,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:l.formComps},{buttons:r(()=>[a(n,{permission:"admin:web:dynamicTableField:create",route:"/admin/DynamicTableFieldManageAdd"},{default:r(()=>t[1]||(t[1]=[R("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),a(T,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:t[0]||(t[0]=p=>m.value.loading=p),paginationProps:_,columns:l.tableColumns},{defaultAppend:r(()=>[a(s,{label:"操作",width:"180"},{default:r(({row:p,column:y,$index:F})=>[a(c,{options:P({row:p,column:y,$index:F})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),a(g,{level:3})],64)}}});export{L as default};
