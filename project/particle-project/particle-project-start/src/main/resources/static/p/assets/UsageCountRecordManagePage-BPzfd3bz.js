import{k as b,am as x,d as D,r as g,a as I,b as t,o as T,c as y,e as o,w as f,F as B}from"./index-COCB7OXO.js";import{u as N,i as k}from"./usageCountCompItem-DPfq8F5t.js";import{u as U}from"./userCompItem-BlfbL2SM.js";import"./userAdminApi-DAjLaGqp.js";let C="/admin/web/usage_count_record";const A=a=>b.delete(C+"/delete",{data:a}),F=a=>b.get(C+"/page",{params:a}),M=[{field:{name:"usageCountKey"},element:{comp:"el-input",formItemProps:{label:"使用次数key"},compProps:{clearable:!0}}},N({fieldName:"usageCountDefineId",label:"使用次数定义",disableGroup:!0}),k({}),U({props:{},fieldName:"usageUserId",label:"使用用户"}),x({props:{},fieldName:"usageTenantId",label:"使用租户"})],Q=D({__name:"UsageCountRecordManagePage",setup(a){const i=g(null),n=I({form:{},formComps:M,tableColumns:[{prop:"usageCountKey",label:"使用次数key",showOverflowTooltip:!0},{prop:"usageCountDefineName",label:"使用次数定义"},{prop:"usageCountConfigName",label:"使用次数配置"},{prop:"usageCount",label:"已使用次数"},{prop:"usageUserNickname",label:"使用用户昵称"},{prop:"usageTenantName",label:"使用租户名称"}]}),s=g({buttonText:"查询",loading:!1,permission:"admin:web:usageCountRecord:pageQuery"}),p=()=>{i.value.refreshData()},_=({pageQuery:e})=>F({...n.form,...e}),P={permission:s.value.permission},R=({row:e,column:r,$index:l})=>l<0?[]:[{txt:"查看明细",text:!0,permission:"admin:web:usageCountRecordDetail:pageQuery",route:{path:"/admin/usageCountRecordDetailPage",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:usageCountRecord:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return A({id:e.id}).then(u=>(p(),Promise.resolve(u)))}}];return(e,r)=>{const l=t("PtForm"),d=t("PtButtonGroup"),c=t("el-table-column"),u=t("PtTable"),h=t("PtRouteViewPopover");return T(),y(B,null,[o(l,{form:n.form,method:p,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",labelWidth:"100",comps:n.formComps},null,8,["form","submitAttrs","comps"]),o(u,{ref_key:"tableRef",ref:i,"default-expand-all":"",dataMethod:_,onDataMethodDataLoading:r[0]||(r[0]=m=>s.value.loading=m),paginationProps:P,columns:n.tableColumns},{defaultAppend:f(()=>[o(c,{label:"操作",width:"180"},{default:f(({row:m,column:v,$index:w})=>[o(d,{options:R({row:m,column:v,$index:w})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(h,{level:3})],64)}}});export{Q as default};
