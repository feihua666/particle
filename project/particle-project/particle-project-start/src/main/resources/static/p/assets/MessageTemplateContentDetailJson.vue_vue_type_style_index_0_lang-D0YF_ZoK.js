import{d as b,a as T,r as m,b as p,o as i,g as D,N as F,w as r,c as h,F as x,D as I,ao as P,e as y,f as k,G as w}from"./index-DY8PGGNe.js";const B=b({__name:"MessageTemplateContentDetailItem",props:{initForm:{type:Object,default:()=>({})},type:{type:String}},setup(c,{expose:u}){const a=c,n=T({form:{},formData:{}}),l=m([{field:{name:"contentTpl",value:a.initForm.contentTpl},element:{comp:"el-input",formItemProps:{label:"消息内容模板",displayBlock:!0,tips:"仅支持enjoy模板，覆盖通用的模板"},compProps:{clearable:!0,type:"textarea",rows:15}}},{field:{name:"isContentHtml",value:a.initForm.isContentHtml||!1},element:{comp:"el-switch",formItemProps:{label:"内容类型",tips:"当模板有值时，覆盖通用的相同字段"},compProps:{activeText:"html文本",inactiveText:"纯文本"}}},{field:{name:"thirdTemplateCode",value:a.initForm.thirdTemplateCode},element:{comp:"el-input",formItemProps:{label:"三方模板编码"},compProps:{clearable:!0}}}]);return u({form:n.form,type:a.type}),(f,d)=>{const _=p("PtForm");return i(),D(_,{form:n.form,formData:n.formData,labelWidth:"80",defaultButtonsShow:"",inline:"",layout:[1,2],comps:l.value},null,8,["form","formData","comps"])}}}),V=b({__name:"MessageTemplateContentDetailJson",props:{initContentDetailJsonData:{type:Object,default:()=>({contentDetails:{}})}},setup(c,{expose:u}){const a=m([]),n=m(""),l=m(null),f=c,d=e=>f.initContentDetailJsonData.contentDetails?f.initContentDetailJsonData.contentDetails[e]:{};F({groupCode:"message_notify_type"}).then(e=>{a.value=e.data.data,n.value=e.data.data[0].value});const _=()=>{let e={contentDetails:{}};for(let o=0;o<l.value.length;o++){let s=l.value[o];v(s.form)||(e.contentDetails[s.type]=s.form)}return e},v=e=>e?!e.thirdTemplateCode&&!e.contentTpl:!0;return u({getContentDetailJsonData:_}),(e,o)=>{const s=p("el-badge"),g=p("el-tab-pane"),C=p("el-tabs");return i(),D(C,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t)},{default:r(()=>[(i(!0),h(x,null,I(a.value,t=>(i(),D(g,{key:t.id,label:t.name,name:t.value},P({default:r(()=>[y(B,{ref_for:!0,ref_key:"messageTemplateContentDetailItemRef",ref:l,type:t.value,initForm:d(t.value)},null,8,["type","initForm"])]),_:2},[v(d(t.value))?void 0:{name:"label",fn:r(()=>[y(s,{type:"success","is-dot":"",class:"pt-message-template-content-detail-json-badge"},{default:r(()=>[k(w(t.name),1)]),_:2},1024)]),key:"0"}]),1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}});export{V as _};
