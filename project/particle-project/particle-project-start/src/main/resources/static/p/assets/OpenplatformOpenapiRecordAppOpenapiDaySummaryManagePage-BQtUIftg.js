import{k as l,d as x,r as y,a as D,b as o,o as I,c as T,e as t,w as p,f as _,F as B}from"./index-DMP92Tz2.js";import{u as N}from"./openplatformAppCompItem-BfaTYXnQ.js";import{u as F}from"./oauth2authorizationRegisteredClientCompItem-CA3bBJL7.js";import{u as k}from"./openplatformOpenapiCompItem-9Me94OOd.js";import{u as M}from"./crmCompItem-BIMAn9B5.js";import"./openplatformAppAdminApi-ZqGN8k6M.js";import"./oauth2RegisteredClientAdminApi-CNS7sq0L.js";import"./crmCustomerTagAdminApi-CwKcsNtQ.js";let s="/admin/web/openplatform_openapi_record_app_openapi_day_summary";const V=r=>l.delete(s+"/delete",{data:r}),G=r=>l.get(s+"/page",{params:r}),E=()=>l.post(s+"/yesterdayStatistic"),L=()=>l.post(s+"/todayStatistic"),Q=[N({}),F({fieldName:"appId",label:"appId"}),k({fieldName:"openplatformOpenapiId",label:"开放接口",disableGroup:!0}),{field:{name:"dayAt"},element:{comp:"PtDatePicker",formItemProps:{label:"日期"},compProps:{clearable:!0,type:"date"}}},M({fieldName:"customerId",label:"客户"})],X=x({__name:"OpenplatformOpenapiRecordAppOpenapiDaySummaryManagePage",setup(r){const c=y(null),n=D({form:{},formComps:Q,tableColumns:[{prop:"openplatformAppName",label:"应用名称",showOverflowTooltip:!0},{prop:"appId",label:"appId",showOverflowTooltip:!0},{prop:"openplatformOpenapiName",label:"开放平台接口名称",showOverflowTooltip:!0},{prop:"dayAt",label:"日期"},{prop:"customerName",label:"客户名称",showOverflowTooltip:!0},{prop:"totalCall",label:"调用总量"},{prop:"totalFeeCall",label:"调用计费总量"},{prop:"averageUnitPriceAmount",label:"平均单价金额（分）"},{prop:"totalFeeAmount",label:"总消费金额（分）"},{prop:"remark",label:"描述"}]}),O=()=>E(),P=()=>L(),i=y({buttonText:"查询",loading:!1,permission:"admin:web:openplatformOpenapiRecordAppOpenapiDaySummary:pageQuery"}),f=()=>{c.value.refreshData()},w=({pageQuery:a})=>G({...n.form,...a}),C={permission:i.value.permission},S=({row:a,column:e,$index:m})=>m<0?[]:(a.id,[{txt:"删除",text:!0,permission:"admin:web:openplatformOpenapiRecordAppOpenapiDaySummary:delete",methodConfirmText:"确定要删除吗？",method(){return V({id:a.id}).then(u=>(f(),Promise.resolve(u)))}}]);return(a,e)=>{const m=o("PtButton"),b=o("PtForm"),u=o("PtButtonGroup"),h=o("el-table-column"),A=o("PtTable"),v=o("PtRouteViewPopover");return I(),T(B,null,[t(b,{form:n.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",labelWidth:"80",comps:n.formComps},{buttons:p(()=>[t(m,{permission:"admin:web:openplatformOpenapiRecordAppOpenapiDaySummary:yesterdayStatistic",methodConfirmText:"确定要统计昨日的数据吗？如果已经存在昨日的数据将会被覆盖或删除",method:O},{default:p(()=>e[1]||(e[1]=[_("统计昨日数据")])),_:1}),t(m,{permission:"admin:web:openplatformOpenapiRecordAppOpenapiDaySummary:todayStatistic",methodConfirmText:"确定要统计今日的数据吗？如果已经存在今日的数据将会被覆盖或删除",method:P},{default:p(()=>e[2]||(e[2]=[_("统计今日数据")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),t(A,{ref_key:"tableRef",ref:c,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:e[0]||(e[0]=d=>i.value.loading=d),paginationProps:C,columns:n.tableColumns},{defaultAppend:p(()=>[t(h,{label:"操作",width:"180"},{default:p(({row:d,column:g,$index:R})=>[t(u,{options:S({row:d,column:g,$index:R})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),t(v,{level:3})],64)}}});export{X as default};
