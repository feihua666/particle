import{p as x,r as h}from"./lowcodeDataSourceAdminApi-CPkBrPkB.js";import{p as B}from"./lowcodeDataSourceManage-BR9d8WaV.js";import{d as C,r as b,a as T,b as t,o as R,c as A,e as o,w as r,f as M,F as S}from"./index-BIT85eDf.js";const L=C({__name:"LowcodeDataSourceManagePage",setup(F){const p=b(null),n=T({form:{},formComps:B,tableColumns:[{prop:"name",label:"名称"},{prop:"code",label:"编码"},{prop:"driverClassName",label:"驱动类名",showOverflowTooltip:!0},{prop:"url",label:"地址",showOverflowTooltip:!0},{prop:"username",label:"用户名"},{prop:"password",label:"密码",columnView:"PtSecretText"},{prop:"remark",label:"描述"}]}),s=b({buttonText:"查询",loading:!1,permission:"admin:web:lowcodeDatasource:pageQuery"}),i=()=>{p.value.refreshData()},f=({pageQuery:e})=>x({...n.form,...e}),w={permission:s.value.permission},_=({row:e,column:a,$index:l})=>l<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:lowcodeDatasource:update",route:{path:"/admin/lowcodeDataSourceManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:lowcodeDatasource:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return h({id:e.id}).then(m=>(i(),Promise.resolve(m)))}}];return(e,a)=>{const l=t("PtButton"),d=t("PtForm"),c=t("PtButtonGroup"),m=t("el-table-column"),P=t("PtTable"),g=t("PtRouteViewPopover");return R(),A(S,null,[o(d,{form:n.form,method:i,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:n.formComps},{buttons:r(()=>[o(l,{permission:"admin:web:lowcodeDatasource:create",route:"/admin/lowcodeDataSourceManageAdd"},{default:r(()=>a[1]||(a[1]=[M("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(P,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:a[0]||(a[0]=u=>s.value.loading=u),paginationProps:w,columns:n.tableColumns},{defaultAppend:r(()=>[o(m,{label:"操作",width:"180"},{default:r(({row:u,column:v,$index:D})=>[o(c,{options:_({row:u,column:v,$index:D})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(g,{level:3})],64)}}});export{L as default};
