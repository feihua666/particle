import{a as g}from"./lowcodeSegmentTemplateAdminApi-BUOG3N5m.js";import{d as R,a as C,r as l,b as r,o as w,c as h,e as s,w as F,F as T,Q as S,E as N}from"./index-COCB7OXO.js";const _=R({__name:"LowcodeSegmentTemplateManageRenderTestPage",props:{lowcodeSegmentTemplateId:{type:String}},setup(n){const p=(t,e="success")=>{N({showClose:!0,message:t,type:e,showIcon:!0,grouping:!0})},o=C({form:{rootSegmentTemplateId:n.lowcodeSegmentTemplateId},renderResultForm:{templateContentResult:"",templateNameContentResult:"",templateNameContentResultFile:""},formData:{}}),u=l([{field:{name:"global",value:JSON.stringify({test:"testGlobalValue"})},element:{comp:"PtAceEditor",formItemProps:{label:"全局渲染数据"},compProps:{clearable:!0,mode:"ace/mode/json",class:"pt-width-100-pc"}}},{field:{name:"ext",value:JSON.stringify({test:"testExtValue"})},element:{comp:"PtAceEditor",formItemProps:{label:"扩展渲染数据"},compProps:{clearable:!0,mode:"ace/mode/json",class:"pt-width-100-pc"}}},{field:{name:"outputFileParentAbsoluteDir"},element:{comp:"el-input",formItemProps:{label:"输出文件的父目录绝对路径",tips:"如：/user/yw/test 或 C:\\yw\\test"},compProps:{clearable:!0}}}]),c=l([{field:{name:"templateNameContentResult"},element:{comp:"PtAceEditor",formItemProps:{label:"名称渲染结果文本"},compProps:{clearable:!0,mode:"ace/mode/json",class:"pt-width-100-pc"}}},{field:{name:"templateContentResult"},element:{comp:"PtAceEditor",formItemProps:{label:"渲染结果文本"},compProps:{clearable:!0,mode:"ace/mode/json",class:"pt-width-100-pc"}}},{field:{name:"templateNameContentResultFile"},element:{comp:"el-input",formItemProps:{label:"名称渲染结果文件句柄"},compProps:{clearable:!0}}}]),d=l({buttonText:"开始渲染",permission:"admin:web:lowcodeSegmentTemplate:renderTest"}),i=t=>{let e=S(t);return e.global&&(e.global=JSON.parse(e.global)),e.ext&&(e.ext=JSON.parse(e.ext)),g(e)},a=l(!1),f=t=>{a.value=!0,o.renderResultForm.templateContentResult=t.data.data.templateContentResult,o.renderResultForm.templateNameContentResult=t.data.data.templateNameContentResult,o.renderResultForm.templateNameContentResultFile=t.data.data.templateNameContentResultFile,setTimeout(()=>{p("渲染成功")},300)};return(t,e)=>{const m=r("PtForm"),b=r("el-dialog");return w(),h(T,null,[s(m,{form:o.form,formData:o.formData,labelWidth:"100",method:i,methodSuccess:f,defaultButtonsShow:"submit,reset",submitAttrs:d.value,buttonsTeleportProps:t.$route.meta.formButtonsTeleportProps,"label-position":"top",layout:1,comps:u.value},null,8,["form","formData","submitAttrs","buttonsTeleportProps","comps"]),s(b,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=P=>a.value=P),width:"70%",title:"查看渲染结果数据","append-to-body":"","destroy-on-close":""},{default:F(()=>[s(m,{form:o.renderResultForm,labelWidth:"100",defaultButtonsShow:"","label-position":"top",layout:[2,1],comps:c.value},null,8,["form","comps"])]),_:1},8,["modelValue"])],64)}}});export{_ as default};
