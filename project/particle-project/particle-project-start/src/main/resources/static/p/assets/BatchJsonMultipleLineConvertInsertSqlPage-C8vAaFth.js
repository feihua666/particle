import{d as S,a as v,r as p,b as P,o as j,g as _}from"./index-DY8PGGNe.js";const x=S({__name:"BatchJsonMultipleLineConvertInsertSqlPage",setup(I){const s=v({form:{},formData:{}}),c=p([{field:{name:"jsonStrLines"},element:{comp:"el-input",formItemProps:{label:"json多行文本",required:!0,tips:"注意：每一行应该是一个完整的json字符串"},compProps:{clearable:!0,rows:10,type:"textarea"}}},{field:{name:"handleLogical",value:"convertInsertSql"},element:{comp:"PtRadioGroup",formItemProps:{label:"处理逻辑",required:!0},compProps:{options:[{id:"convertInsertSql",name:"转换为insert sql"}]}}},{field:{name:"tableName",value:"t_test"},element:{comp:"el-input",formItemProps:{label:"表名",required:!0,tips:"表名，请确保表名正确，否则可能插入失败"},compProps:{clearable:!0}}},{field:{name:"text"},element:{comp:"el-input",formItemProps:{label:"结果"},compProps:{clearable:!0,readonly:!0,rows:10,type:"textarea"}}}]),f=p({buttonText:"确认转换"}),d=o=>{b[o.handleLogical](o)},b={convertInsertSql:o=>{let r=o.jsonStrLines.split(`
`),e="";for(let l=0;l<r.length;l++){let n=[],a=[],m=r[l];if(!m)continue;let i=JSON.parse(m);for(let u in i){n.push(u);let t=i[u];typeof t=="string"&&(t=t.replaceAll("'","\\'"),t="'"+t+"'"),t==null&&(t="null"),a.push(t)}e+="INSERT INTO "+o.tableName,e+=" (",e+=n.join(", "),e+=") ",e+=" VALUES (",e+=a.join(", "),e+=");",e+=`
`}o.text=e}},h=()=>"提取成功";return(o,r)=>{const e=P("PtForm");return j(),_(e,{form:s.form,formData:s.formData,labelWidth:"80",method:d,methodSuccess:h,defaultButtonsShow:"submit,reset",submitAttrs:f.value,layout:1,"label-position":"top",comps:c.value},null,8,["form","formData","submitAttrs","comps"])}}});export{x as default};
