import{q as v,s as w}from"./crmCompItem-DDwuFJdh.js";import{p as x}from"./crmCustomerRelationDefineManage-8cS4TeDo.js";import{d as B,r as f,a as h,b as o,o as A,c as M,e as n,w as m,f as T,F}from"./index-DY8PGGNe.js";import"./crmCustomerTagAdminApi-CAeI7pTa.js";const G=B({__name:"CrmCustomerRelationDefineManagePage",setup(k){const d=f(null),r=h({form:{},formComps:x,tableColumns:[{prop:"name",label:"关系定义名称"},{prop:"code",label:"关系定义编码"},{prop:"isBidirectional",label:"关系类型",formatter:(e,t,a,i)=>a?"双向关系":"单向关系"},{prop:"bidirectionalName",label:"对应双向关系"},{prop:"remark",label:"备注"}]}),s=f({buttonText:"查询",loading:!1,permission:"admin:web:crmCustomerRelationDefine:pageQuery"}),c=()=>{d.value.refreshData()},b=({pageQuery:e})=>v({...r.form,...e}),_={permission:s.value.permission},C=({row:e,column:t,$index:a})=>a<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:crmCustomerRelationDefine:update",route:{path:"/admin/CrmCustomerRelationDefineManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:crmCustomerRelationDefine:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return w({id:e.id}).then(u=>(c(),Promise.resolve(u)))}}];return(e,t)=>{const a=o("PtButton"),i=o("PtForm"),l=o("PtButtonGroup"),u=o("el-table-column"),P=o("PtTable"),g=o("PtRouteViewPopover");return A(),M(F,null,[n(i,{form:r.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:r.formComps},{buttons:m(()=>[n(a,{permission:"admin:web:crmCustomerRelationDefine:create",route:"/admin/CrmCustomerRelationDefineManageAdd"},{default:m(()=>t[1]||(t[1]=[T("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(P,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:t[0]||(t[0]=p=>s.value.loading=p),paginationProps:_,columns:r.tableColumns},{defaultAppend:m(()=>[n(u,{label:"操作",width:"180"},{default:m(({row:p,column:R,$index:D})=>[n(l,{options:C({row:p,column:R,$index:D})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(g,{level:3})],64)}}});export{G as default};
