import{p as x,a as v,r as w,b as B}from"./openplatformAppOpenapiManage-CdUzR-iR.js";import{d as C,r as c,a as N,b as o,o as R,c as T,e as p,w as r,f as D,F}from"./index-DY8PGGNe.js";import"./openplatformAppCompItem-B9reiXo5.js";import"./openplatformAppAdminApi-DIkHXNla.js";import"./openplatformOpenapiCompItem-BEtzMt1k.js";import"./openplatformOpenapiFeeCompItem-h8iECW39.js";import"./openplatformOpenapiFeeAdminApi-BcyrvnAh.js";import"./openplatformOpenapiLimitRuleCompItem-Cb03qlLN.js";import"./openplatformOpenapiLimitRuleAdminApi-D6d1Z0j9.js";const I=C({__name:"OpenplatformAppOpenapiManagePage",setup(M){const l=c(null),n=N({form:{},formComps:x,tableColumns:[{prop:"openplatformAppName",label:"app名称"},{prop:"openplatformOpenapiName",label:"开放接口名称"},{prop:"openplatformOpenapiFeeName",label:"计费规则名称"},{prop:"openplatformOpenapiLimitRuleName",label:"限制规则名称"},{prop:"openplatformProviderName",label:"指定供应商名称"}]}),m=c({buttonText:"查询",loading:!1,permission:"admin:web:openplatformAppOpenapi:pageQuery"}),u=()=>{l.value.refreshData()},b=({pageQuery:e})=>v({...n.form,...e}),_={permission:m.value.permission},P=({row:e,column:a,$index:i})=>i<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:openplatformAppOpenapi:update",route:{path:"/admin/OpenplatformAppOpenapiManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,position:"more",permission:"admin:web:openplatformAppOpenapi:delete",methodConfirmText:`确定要删除 ${e.openplatformAppName} 和 ${e.openplatformOpenapiName} 吗？`,method(){return w({id:e.id}).then(t=>(u(),Promise.resolve(t)))}},{txt:"刷新缓存",text:!0,position:"more",permission:"admin:web:openplatformAppOpenapi:refreshCache",methodSuccess:t=>"刷新缓存成功,如果部署多个实例可能要多次执行。 "+t.data.data,method(){return B({id:e.id}).then(t=>Promise.resolve(t))}}];return(e,a)=>{const i=o("PtButton"),d=o("PtForm"),f=o("PtButtonGroup"),t=o("el-table-column"),O=o("PtTable"),g=o("PtRouteViewPopover");return R(),T(F,null,[p(d,{form:n.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:n.formComps},{buttons:r(()=>[p(i,{permission:"admin:web:openplatformAppOpenapi:create",route:"/admin/OpenplatformAppOpenapiManageAdd"},{default:r(()=>a[1]||(a[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),p(O,{ref_key:"tableRef",ref:l,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:a[0]||(a[0]=s=>m.value.loading=s),paginationProps:_,columns:n.tableColumns},{defaultAppend:r(()=>[p(t,{label:"操作",width:"180"},{default:r(({row:s,column:A,$index:h})=>[p(f,{options:P({row:s,column:A,$index:h}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),p(g,{level:3})],64)}}});export{I as default};
