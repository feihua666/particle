import{u as T,p as h,r as R}from"./tenantUserManage-DWf5XFRo.js";import{d as B,r as b,a as A,b as a,o as U,c as C,e as r,w as i,f as D,F as k}from"./index-DMP92Tz2.js";import"./userCompItem-yd9ORC2T.js";import"./userAdminApi-lU6WDZGD.js";const y=B({__name:"TenantUserManagePage",setup(F){const d=b(null),l=A({form:{},formComps:T({props:{}}),tableColumns:[{prop:"nickname",label:"昵称",showOverflowTooltip:!0},{prop:"name",label:"用户姓名",showOverflowTooltip:!0},{prop:"avatar",label:"头像",columnView:"image"},{prop:"joinAt",label:"加入时间",showOverflowTooltip:!0},{prop:"isExpired",label:"是否过期",formatter:(e,n,t,s)=>{let o=t?"已过期":"正常";return t&&e.expiredReason&&(o=o+`(${e.expiredReason})`),o}},{prop:"expireAt",label:"到期时间",showOverflowTooltip:!0},{prop:"isLeave",label:"是否离职/退出",formatter:(e,n,t,s)=>{let o=t?"离职/退出":"正常";return t&&e.leaveReason&&(o=o+`(${e.leaveReason})`),o}},{prop:"leaveAt",label:"离职/退出时间",showOverflowTooltip:!0},{prop:"isFormal",label:"是否正式",formatter:(e,n,t,s)=>t?"正式":"试用"},{prop:"tenantName",label:"租户名称",showOverflowTooltip:!0}]}),m=b({buttonText:"查询",loading:!1,permission:"admin:web:tenantUser:pageQuery"}),f=()=>{d.value.refreshData()},v=({pageQuery:e})=>h({...l.form,...e}),_={permission:m.value.permission},w=({row:e,column:n,$index:t})=>t<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:tenantUser:update",route:{path:"/admin/TenantUserManageUpdate",query:{...{id:e.id},userId:e.userId,userNickname:e.nickname}}},{txt:"删除",text:!0,permission:"admin:web:tenantUser:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return R({id:e.id}).then(p=>(f(),Promise.resolve(p)))}}];return(e,n)=>{const t=a("PtButton"),s=a("PtForm"),o=a("PtButtonGroup"),c=a("el-table-column"),p=a("PtTable"),P=a("PtRouteViewPopover");return U(),C(k,null,[r(s,{form:l.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:m.value,inline:"",comps:l.formComps},{buttons:i(()=>[r(t,{permission:"admin:web:tenantUser:create",route:"/admin/TenantUserManageAdd"},{default:i(()=>n[1]||(n[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(p,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:v,onDataMethodDataLoading:n[0]||(n[0]=u=>m.value.loading=u),paginationProps:_,columns:l.tableColumns},{defaultAppend:i(()=>[r(c,{label:"操作",width:"180"},{default:i(({row:u,column:x,$index:g})=>[r(o,{options:w({row:u,column:x,$index:g})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(P,{level:3})],64)}}});export{y as default};
