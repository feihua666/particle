import{b as d,f as i}from"./roleFuncRelAdminApi-CHRVQDNc.js";import{d as f,v as p,a as h,r as a,x as b,b as I,o as R,g as P,n as v}from"./index-COCB7OXO.js";import{c as M}from"./roleLoginApi-BzQsdlfg.js";const k=f({__name:"RoleFuncRelManageFuncAssignRolePage",props:{...p},setup(s){const n=s,t=h({form:{isLazyLoad:!0,uncheckedRoleIds:null},formData:{},dataMethodAllData:null}),u=a([b({props:n,required:!0}),{field:{name:"checkedRoleIds",value:[]},element:{comp:"PtTree",formItemProps:{label:"角色",required:!0},compProps:({form:o})=>({dataInitMethod:({param:e})=>{let r=e.funcId;return r?d({id:r}):{data:[]}},dataInitMethodParam:{funcId:o.funcId},dataMethod:()=>M().then(e=>(t.dataMethodAllData=e.data.data,Promise.resolve(e))),dataMethodResultHandleConvertToTree:!0,showCheckbox:!0})}}]),m=a({buttonText:"确认",permission:"admin:web:roleFuncRel:funcAssignRole"}),c=o=>(t.form.uncheckedRoleIds=v((t.dataMethodAllData||[]).map(e=>e.id),t.form.checkedRoleIds),i(o)),l=()=>"分配成功，请刷新数据查看";return(o,e)=>{const r=I("PtForm");return R(),P(r,{form:t.form,formData:t.formData,labelWidth:"80",method:c,methodSuccess:l,defaultButtonsShow:"submit,reset",submitAttrs:m.value,buttonsTeleportProps:o.$route.meta.formButtonsTeleportProps,inline:"",layout:1,comps:u.value},null,8,["form","formData","submitAttrs","buttonsTeleportProps","comps"])}}});export{k as default};
