import{p as x,a as h,r as y}from"./systemConfigManage-CFjoviaw.js";import{d as B,r as c,a as R,b as a,o as T,c as D,e as r,w as m,f as k,F as A}from"./index-DY8PGGNe.js";const O=B({__name:"SystemConfigManagePage",setup(M){const d=c(null),s=R({form:{},formComps:x,tableColumns:[{prop:"code",label:"配置编码"},{prop:"name",label:"配置名称"},{prop:"value",label:"配置值",showOverflowTooltip:!0},{prop:"isBuiltIn",label:"是否内置",formatter:(e,o,t,l)=>t?"是":"否"},{prop:"isDisabled",label:"是否禁用",formatter:(e,o,t,l)=>{let n=t?"是":"否";return!t&&e.blackReason&&(n=n+`(${e.blackReason})`),n}},{prop:"tag",label:"标签",showOverflowTooltip:!0},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),i=c({buttonText:"查询",loading:!1,permission:"admin:web:systemConfig:pageQuery"}),f=()=>{d.value.refreshData()},b=({pageQuery:e})=>h({...s.form,...e}),g={permission:i.value.permission},_=({row:e,column:o,$index:t})=>t<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:systemConfig:update",route:{path:"/admin/SystemConfigManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:systemConfig:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return y({id:e.id}).then(p=>(f(),Promise.resolve(p)))}}];return(e,o)=>{const t=a("PtButton"),l=a("PtForm"),n=a("PtButtonGroup"),p=a("el-table-column"),P=a("PtTable"),w=a("PtRouteViewPopover");return T(),D(A,null,[r(l,{form:s.form,method:f,defaultButtonsShow:"submit,reset",submitAttrs:i.value,inline:"",comps:s.formComps},{buttons:m(()=>[r(t,{permission:"admin:web:systemConfig:create",route:"/admin/SystemConfigManageAdd"},{default:m(()=>o[1]||(o[1]=[k("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(P,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:o[0]||(o[0]=u=>i.value.loading=u),paginationProps:g,columns:s.tableColumns},{defaultAppend:m(()=>[r(p,{label:"操作",width:"180"},{default:m(({row:u,column:v,$index:C})=>[r(n,{options:_({row:u,column:v,$index:C})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(w,{level:3})],64)}}});export{O as default};
