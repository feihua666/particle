import{p as v,e as R,r as D,a as T}from"./agiVectorStoreRawDocumentAdminApi-CZ0fml5V.js";import{p as V}from"./agiVectorStoreRawDocumentManage-C5Vt-Ozs.js";import{b as B}from"./FileTools-Cx4MUywI.js";import{d as C,r as c,a as S,b as n,o as A,c as F,e as r,w as s,f as E,F as M,aw as N}from"./index-DY8PGGNe.js";const U=C({__name:"AgiVectorStoreRawDocumentManagePage",setup(k){const p=c(null),m=S({form:{},formComps:V,tableColumns:[{prop:"name",label:"名称",showOverflowTooltip:!0},{prop:"fileName",label:"文件名称",showOverflowTooltip:!0},{prop:"typeDictName",label:"类型"},{prop:"url",label:"地址",showOverflowTooltip:!0},{prop:"isEmbedded",label:"是否嵌入",formatter:(e,o,a,d)=>a?"已嵌入":"未嵌入"},{prop:"remark",label:"描述"}]}),l=c({buttonText:"查询",loading:!1,permission:"admin:web:agiVectorStoreRawDocument:pageQuery"}),i=()=>{p.value.refreshData()},b=({pageQuery:e})=>v({...m.form,...e}),f={permission:l.value.permission},g=({row:e,column:o,$index:a})=>a<0?[]:(e.id,[{txt:"下载",text:!0,permission:"admin:web:agiVectorStoreRawDocument:download",method(){let t=e.url;t=N(t),B(t,e.fileName)}},{txt:"嵌入未嵌入的片段",text:!0,position:"more",disabled:e.isEmbedded,disabledReason:e.isEmbedded?"未嵌入的片段才可以嵌入":void 0,permission:"admin:web:agiVectorStoreRawDocument:embedding",methodConfirmText:`确定要嵌入 ${e.name} 吗？将嵌入未嵌入的片段，已经是嵌入状态的片段将不做处理`,method(){return R({id:e.id}).then(t=>(i(),Promise.resolve(t)))}},{txt:"重新嵌入所有片段",text:!0,position:"more",permission:"admin:web:agiVectorStoreRawDocument:reEmbedding",methodConfirmText:`确定要重新嵌入 ${e.name} 吗？将重新嵌入所有的片段，已经是嵌入状态的片段将会先删除再重新嵌入`,method(){return D({id:e.id}).then(t=>(i(),Promise.resolve(t)))}},{txt:"删除",text:!0,position:"more",permission:"admin:web:agiVectorStoreRawDocument:delete",methodConfirmText:`确定要删除 ${e.name} 吗？删除后被拆分的片段和已嵌入的向量将会被一并删除！`,method(){return T({id:e.id}).then(t=>(i(),Promise.resolve(t)))}}]);return(e,o)=>{const a=n("PtButton"),d=n("PtForm"),t=n("PtButtonGroup"),w=n("el-table-column"),_=n("PtTable"),x=n("PtRouteViewPopover");return A(),F(M,null,[r(d,{form:m.form,method:i,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:m.formComps},{buttons:s(()=>[r(a,{permission:"admin:web:agiVectorStoreRawDocument:create",route:"/admin/AgiVectorStoreRawDocumentManageAdd"},{default:s(()=>o[1]||(o[1]=[E("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(_,{ref_key:"tableRef",ref:p,"default-expand-all":"",dataMethod:b,onDataMethodDataLoading:o[0]||(o[0]=u=>l.value.loading=u),paginationProps:f,columns:m.tableColumns},{defaultAppend:s(()=>[r(w,{label:"操作",width:"180"},{default:s(({row:u,column:P,$index:h})=>[r(t,{options:g({row:u,column:P,$index:h}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(x,{level:3})],64)}}});export{U as default};
