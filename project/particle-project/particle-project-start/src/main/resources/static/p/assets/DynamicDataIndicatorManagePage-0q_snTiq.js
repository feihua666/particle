import{p as x,r as w}from"./dynamicDataIndicatorAdminApi-DQve1vQe.js";import{p as B}from"./dynamicDataIndicatorManage-BJreJgzY.js";import{d as C,r as b,a as I,b as n,o as h,c as R,e as r,w as m,f as A,F as M}from"./index-BIT85eDf.js";import"./dataCompItem-B8u6Qt1U.js";import"./dynamicTableAdminApi-BJev9B-p.js";import"./dynamicDataCategoryAdminApi-DP_GaZhF.js";import"./dynamicDataIndicatorCategoryAdminApi-CUUVw3kq.js";const E=C({__name:"DynamicDataIndicatorManagePage",setup(T){const u=b(null),i=I({form:{},formComps:B,tableColumns:[{prop:"dynamicDataCategoryName",label:"动态数据分类名称"},{prop:"dynamicDataIndicatorCategoryName",label:"动态数据指标分类名称"},{prop:"name",label:"指标名称"},{prop:"isDisabled",label:"是否禁用",formatter:(t,e,a,l)=>{let o=a?"禁用":"启用";return a&&t.disabledReason&&(o=o+`(${t.disabledReason})`),o}},{prop:"remark",label:"备注信息"}]}),s=b({buttonText:"查询",loading:!1,permission:"admin:web:dynamicDataIndicator:pageQuery"}),c=()=>{u.value.refreshData()},f=({pageQuery:t})=>x({...i.form,...t}),_={permission:s.value.permission},D=({row:t,column:e,$index:a})=>a<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:dynamicDataIndicator:update",route:{path:"/admin/DynamicDataIndicatorManageUpdate",query:{id:t.id}}},{txt:"删除",text:!0,permission:"admin:web:dynamicDataIndicator:delete",methodConfirmText:`确定要删除 ${t.name} 吗？删除后数据（包括导入的数据）无法恢复，请谨慎操作！`,method(){return w({id:t.id}).then(d=>(c(),Promise.resolve(d)))}}];return(t,e)=>{const a=n("PtButton"),l=n("PtForm"),o=n("PtButtonGroup"),d=n("el-table-column"),P=n("PtTable"),g=n("PtRouteViewPopover");return h(),R(M,null,[r(l,{form:i.form,method:c,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",comps:i.formComps},{buttons:m(()=>[r(a,{permission:"admin:web:dynamicDataIndicator:create",route:"/admin/DynamicDataIndicatorManageAdd"},{default:m(()=>e[1]||(e[1]=[A("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),r(P,{ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:e[0]||(e[0]=p=>s.value.loading=p),paginationProps:_,columns:i.tableColumns},{defaultAppend:m(()=>[r(d,{label:"操作",width:"180"},{default:m(({row:p,column:y,$index:v})=>[r(o,{options:D({row:p,column:y,$index:v})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),r(g,{level:3})],64)}}});export{E as default};
