import{a as P,b as w}from"./dynamicDataIndicatorCategoryAdminApi-CUUVw3kq.js";import{l as B}from"./dynamicDataIndicatorAdminApi-DQve1vQe.js";import{d as F,r as b,a as v,b as d,o as f,c as x,e as c,g as T,w as y,I as k,F as R}from"./index-BIT85eDf.js";const E=F({__name:"DynamicDataIndicatorCategoryManageDataPage",props:{dynamicDataIndicatorCategoryId:{type:String},batchId:{type:String}},setup(g){const u=b(null),n=g,t=v({form:{dynamicDataIndicatorCategoryId:n.dynamicDataIndicatorCategoryId,batchId:n.batchId},formComps:[{field:{name:"isPublic"},element:{comp:"PtSelect",formItemProps:{label:"是否发布"},compProps:{dataMethod:()=>({data:[{id:"true",name:"已发布"},{id:"false",name:"未发布"}]})}}}],tableColumns:[],tableFieldLoaded:!1});(a=>{B({dynamicDataIndicatorCategoryId:a}).then(o=>{o.data.data.forEach(e=>{t.tableColumns.push({prop:"c_"+e.id,label:e.name})}),t.tableColumns.push({prop:"is_public",label:"是否发布",formatter:(e,l,m,s)=>m?"已发布":"未发布"}),t.tableColumns.push({prop:"create_by_nickname",label:"创建人昵称"}),t.tableFieldLoaded=!0})})(n.dynamicDataIndicatorCategoryId);const i=b({buttonText:"查询",loading:!1,permission:"admin:web:dynamicDataIndicatorCategory:dataPageQuery"}),p=()=>{u.value.refreshData()},h=({pageQuery:a})=>P({...t.form,...a}),C={permission:i.value.permission},I=({row:a,column:o,$index:r})=>r<0?[]:(a.id,[{txt:"删除",text:!0,permission:"admin:web:dynamicDataIndicatorCategory:dataDelete",methodConfirmText:"确定要删除当前数据吗？",method(){return w({id:a.id,dynamicDataIndicatorCategoryId:n.dynamicDataIndicatorCategoryId}).then(l=>(p(),Promise.resolve(l)))}}]);return(a,o)=>{const r=d("PtForm"),e=d("PtButtonGroup"),l=d("el-table-column"),m=d("PtTable");return f(),x(R,null,[c(r,{form:t.form,method:p,defaultButtonsShow:"submit",submitAttrs:i.value,showButtonItem:!0,inline:"",comps:t.formComps},null,8,["form","submitAttrs","comps"]),t.tableFieldLoaded?(f(),T(m,{key:0,ref_key:"tableRef",ref:u,"default-expand-all":"",dataMethod:h,onDataMethodDataLoading:o[0]||(o[0]=s=>i.value.loading=s),paginationProps:C,columns:t.tableColumns},{defaultAppend:y(()=>[c(l,{label:"操作",width:"180"},{default:y(({row:s,column:_,$index:D})=>[c(e,{options:I({row:s,column:_,$index:D})},null,8,["options"])]),_:1})]),_:1},8,["columns"])):k("",!0)],64)}}});export{E as default};
