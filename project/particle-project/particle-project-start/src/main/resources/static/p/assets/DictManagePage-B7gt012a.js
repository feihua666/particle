import{p as P,r as M}from"./dictAdminApi-BTk83EQs.js";import{p as B}from"./dictManage-Dhq-_rTF.js";import{d as F,r as c,a as O,b as l,o as C,c as R,e as n,w as i,f,F as A}from"./index-BIT85eDf.js";import"./treeQueryComps-CWIG2rsy.js";const q=F({__name:"DictManagePage",setup(D){const d=c(null),p=O({form:{},formComps:B,tableColumns:[{prop:"name",label:"名称",width:150,showOverflowTooltip:!0},{prop:"code",label:"编码",showOverflowTooltip:!0},{prop:"value",label:"字典值",showOverflowTooltip:!0},{prop:"valueUnit",label:"字典值单位",width:100},{prop:"parentName",label:"父级",showOverflowTooltip:!0},{prop:"isSystem",label:"是否系统",width:80,formatter:(e,o,t,a)=>t?"系统":"自定义"},{prop:"isPublic",label:"是否公共",width:80,formatter:(e,o,t,a)=>t?"公共":"私有"},{prop:"isGroup",label:"是否字典组",width:100,formatter:(e,o,t,a)=>t?"字典组":"非字典组"},{prop:"isItem",label:"是否字典项",width:100,formatter:(e,o,t,a)=>t?"字典项":"非字典项"},{prop:"isDisabled",label:"是否禁用",width:80,formatter:(e,o,t,a)=>{let r=t?"禁用":"启用";return t&&e.disabledReason&&(r=r+`(${e.disabledReason})`),r}},{prop:"privateFlag",label:"私有标识",formatter:(e,o,t,a)=>{let r=t;return t&&e.privateFlagMemo&&(r=r+`(${e.privateFlagMemo})`),r},showOverflowTooltip:!0},{prop:"groupFlag",label:"分组标识",formatter:(e,o,t,a)=>{let r=t;return t&&e.groupFlagMemo&&(r=r+`(${e.groupFlagMemo})`),r},showOverflowTooltip:!0},{prop:"tags",label:"标签",showOverflowTooltip:!0},{prop:"seq",label:"排序",width:60},{prop:"relatedGroupCode",label:"关联字典组编码",showOverflowTooltip:!0},{prop:"mappingArrayJson",label:"映射配置",showOverflowTooltip:!0},{prop:"remark",label:"描述",showOverflowTooltip:!0}]}),s=c({buttonText:"查询",loading:!1,permission:"admin:web:dict:pageQuery"}),b=()=>{d.value.refreshData()},w=({pageQuery:e})=>P({...p.form,...e}),g={permission:s.value.permission},h=({row:e,column:o,$index:t})=>{if(t<0)return[];let a={id:e.id};return[{txt:"添加子级",text:!0,permission:"admin:web:dict:create",route:{path:"/admin/dictManageAdd",query:a}},{txt:"编辑",position:"more",text:!0,permission:"admin:web:dict:update",route:{path:"/admin/dictManageUpdate",query:a}},{txt:"删除",position:"more",text:!0,permission:"admin:web:dict:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return M({id:e.id}).then(m=>(b(),Promise.resolve(m)))}}]};return(e,o)=>{const t=l("PtButton"),a=l("PtForm"),r=l("PtButtonGroup"),m=l("el-table-column"),v=l("PtTable"),x=l("PtRouteViewPopover");return C(),R(A,null,[n(a,{form:p.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:s.value,inline:"",layout:[[8,8],3],comps:p.formComps},{buttons:i(()=>[n(t,{permission:"admin:web:dict:create",route:"/admin/dictManageBatchAdd"},{default:i(()=>o[1]||(o[1]=[f("批量添加")])),_:1}),n(t,{permission:"admin:web:dict:create",route:"/admin/dictManageAdd"},{default:i(()=>o[2]||(o[2]=[f("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),n(v,{ref_key:"tableRef",ref:d,"default-expand-all":"",dataMethod:w,onDataMethodDataLoading:o[0]||(o[0]=u=>s.value.loading=u),dataMethodResultHandleConvertToTree:!0,paginationProps:g,columns:p.tableColumns},{defaultAppend:i(()=>[n(m,{label:"操作",width:"210"},{default:i(({row:u,column:_,$index:T})=>[n(r,{options:h({row:u,column:_,$index:T}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),n(x,{level:3})],64)}}});export{q as default};
