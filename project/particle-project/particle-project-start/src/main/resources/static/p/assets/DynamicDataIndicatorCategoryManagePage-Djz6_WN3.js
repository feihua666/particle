import{p as P,r as I,e as h}from"./dynamicDataIndicatorCategoryAdminApi-CUUVw3kq.js";import{p as v}from"./dynamicDataIndicatorCategoryManage-BSbIB0fq.js";import{e as w,a as T,d as B}from"./FileTools-Cx4MUywI.js";import{d as R,r as g,a as M,b as m,o as N,c as F,e as s,w as p,f as A,F as k}from"./index-BIT85eDf.js";import"./dataCompItem-B8u6Qt1U.js";import"./dynamicTableAdminApi-BJev9B-p.js";import"./dynamicDataCategoryAdminApi-DP_GaZhF.js";const O=R({__name:"DynamicDataIndicatorCategoryManagePage",setup(q){const y=g(null),d=M({form:{},formComps:v,tableColumns:[{prop:"dynamicDataCategoryName",label:"动态数据分类名称"},{prop:"name",label:"动态数据指标分类名称"},{prop:"isDisabled",label:"是否禁用",formatter:(t,o,n,r)=>{let i=n?"禁用":"启用";return n&&t.disabledReason&&(i=i+`(${t.disabledReason})`),i}},{prop:"typeDictName",label:"动态数据指标分类类型"},{prop:"dynamicDataIndicatorNum",label:"指标数量"},{prop:"dynamicDataIndicatorCategoryDataNum",label:"数据数量"},{prop:"remark",label:"备注信息"}]}),l=g({buttonText:"查询",loading:!1,permission:"admin:web:dynamicDataIndicatorCategory:pageQuery"}),b=()=>{y.value.refreshData()},f=({pageQuery:t})=>P({...d.form,...t}),D={permission:l.value.permission},C=({row:t,column:o,$index:n})=>{if(n<0)return[];let r={id:t.id};return[{txt:"数据管理",text:!0,permission:"admin:web:dynamicDataIndicatorCategory:dataPageQuery",route:{path:"/admin/dynamicDataIndicatorCategoryManageData",query:r}},{txt:"编辑",text:!0,position:"more",permission:"admin:web:dynamicDataIndicatorCategory:update",route:{path:"/admin/DynamicDataIndicatorCategoryManageUpdate",query:r}},{txt:"删除",text:!0,position:"more",permission:"admin:web:dynamicDataIndicatorCategory:delete",methodConfirmText:`确定要删除 ${t.name} 吗？将级联删除关联的指标信息，删除后数据（包括导入的数据）无法恢复，请谨慎操作！`,method(){return I({id:t.id}).then(e=>(b(),Promise.resolve(e)))}},{txt:"导出指标分类模板",text:!0,position:"more",permission:"admin:web:dynamicDataIndicatorCategory:exportTemplate",methodConfirmText:`确定要导出动态数据模板 ${t.name} 吗？`,method(){return h({id:t.id}).then(e=>{let u=e.data,c=w(e),a=T(e);return a=decodeURIComponent(a),B(u,c,a),Promise.resolve(e)})}},{txt:"导入数据",text:!0,position:"more",permission:"admin:web:dynamicDataIndicatorCategory:uploadImportData",route:{path:"/admin/dynamicDataIndicatorCategoryManageImportData",query:r}}]};return(t,o)=>{const n=m("PtButton"),r=m("PtForm"),i=m("PtButtonGroup"),e=m("el-table-column"),u=m("PtTable"),c=m("PtRouteViewPopover");return N(),F(k,null,[s(r,{form:d.form,method:b,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:d.formComps},{buttons:p(()=>[s(n,{permission:"admin:web:dynamicDataIndicatorCategory:create",route:"/admin/DynamicDataIndicatorCategoryManageAdd"},{default:p(()=>o[1]||(o[1]=[A("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),s(u,{ref_key:"tableRef",ref:y,"default-expand-all":"",dataMethod:f,onDataMethodDataLoading:o[0]||(o[0]=a=>l.value.loading=a),paginationProps:D,columns:d.tableColumns},{defaultAppend:p(()=>[s(e,{label:"操作",width:"180"},{default:p(({row:a,column:x,$index:_})=>[s(i,{options:C({row:a,column:x,$index:_}),dropdownTriggerButtonOptions:{text:!0,buttonText:"更多"}},null,8,["options"])]),_:1})]),_:1},8,["columns"]),s(c,{level:3})],64)}}});export{O as default};
