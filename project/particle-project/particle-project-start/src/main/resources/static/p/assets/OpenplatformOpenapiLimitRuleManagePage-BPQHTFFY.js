import{p as O,r as h}from"./openplatformOpenapiLimitRuleAdminApi-D6d1Z0j9.js";import{p as x}from"./openplatformOpenapiLimitRuleManage-BVvR8gzw.js";import{d as B,r as b,a as C,b as t,o as L,c as T,e as o,w as p,f as D,F as A}from"./index-DY8PGGNe.js";const N=B({__name:"OpenplatformOpenapiLimitRuleManagePage",setup(F){const s=b(null),n=C({form:{},formComps:x,tableColumns:[{prop:"name",label:"限制名称"},{prop:"limitTypeDictName",label:"限制方式"},{prop:"limitCount",label:"限制条数"},{prop:"limitFee",label:"限制金额费用"},{prop:"limitPeriodDictName",label:"限制周期"},{prop:"limitRate",label:"限制速率"},{prop:"whiteIps",label:"ip白名单",showOverflowTooltip:!0},{prop:"blackIps",label:"ip黑名单",showOverflowTooltip:!0},{prop:"remark",label:"描述"}]}),l=b({buttonText:"查询",loading:!1,permission:"admin:web:openplatformOpenapiLimitRule:pageQuery"}),u=()=>{s.value.refreshData()},c=({pageQuery:e})=>O({...n.form,...e}),_={permission:l.value.permission},P=({row:e,column:a,$index:i})=>i<0?[]:[{txt:"编辑",text:!0,permission:"admin:web:openplatformOpenapiLimitRule:update",route:{path:"/admin/OpenplatformOpenapiLimitRuleManageUpdate",query:{id:e.id}}},{txt:"删除",text:!0,permission:"admin:web:openplatformOpenapiLimitRule:delete",methodConfirmText:`确定要删除 ${e.name} 吗？`,method(){return h({id:e.id}).then(r=>(u(),Promise.resolve(r)))}}];return(e,a)=>{const i=t("PtButton"),d=t("PtForm"),f=t("PtButtonGroup"),r=t("el-table-column"),w=t("PtTable"),R=t("PtRouteViewPopover");return L(),T(A,null,[o(d,{form:n.form,method:u,defaultButtonsShow:"submit,reset",submitAttrs:l.value,inline:"",comps:n.formComps},{buttons:p(()=>[o(i,{permission:"admin:web:openplatformOpenapiLimitRule:create",route:"/admin/OpenplatformOpenapiLimitRuleManageAdd"},{default:p(()=>a[1]||(a[1]=[D("添加")])),_:1})]),_:1},8,["form","submitAttrs","comps"]),o(w,{ref_key:"tableRef",ref:s,"default-expand-all":"",dataMethod:c,onDataMethodDataLoading:a[0]||(a[0]=m=>l.value.loading=m),paginationProps:_,columns:n.tableColumns},{defaultAppend:p(()=>[o(r,{label:"操作",width:"180"},{default:p(({row:m,column:g,$index:v})=>[o(f,{options:P({row:m,column:g,$index:v})},null,8,["options"])]),_:1})]),_:1},8,["columns"]),o(R,{level:3})],64)}}});export{N as default};
