# Particle 开发平台功能说明

## 1. 平台概述

Particle 是一个基于 Spring Boot 3.x 和 Vue.js 的前后端分离开发平台。该平台采用 DDD（领域驱动设计）理念，结合 COLA 架构思想，实现了高内聚、低耦合的模块化设计。平台旨在快速开发新业务模块，提供了一系列常用业务功能组件，简化开发流程，提高开发效率。

### 1.1 核心理念

- **粒子概念**：每个模块像粒子一样内聚，模块之间保持松耦合
- **DDD 驱动设计**：基于领域驱动设计理念，每个功能模块、聚合根、方法都经过精心考量和打磨
- **四层架构**：采用经典的四层架构（适配层、应用层、领域层、基础设施层）
- **组件化开发**：将业务功能拆分成可重用的组件，便于快速组装和部署

### 1.2 技术栈

#### 后端技术
- Spring Boot 3.x
- MyBatis Plus
- Spring Security
- Swagger/OpenAPI
- Lombok
- MapStruct
- Maven

#### 前端技术
- Vue.js
- Element UI

## 2. 架构设计

### 2.1 整体架构

Particle 平台的整体架构分为两个主要部分：

1. **组件**：平台的核心构建单元，是最小的功能组合单位
2. **模块**：服务运行的最小单位，可以独立发布或与其他模块组合发布

### 2.2 四层架构模式

平台采用四层架构模式，参考了 COLA 架构思想：

1. **适配层（Adapter Layer）**
   - 负责处理用户请求和外部系统的交互
   - 包含 Web 控制器、RPC 接口等

2. **应用层（Application Layer）**
   - 实现业务流程编排
   - 处理用例和业务规则，不含具体业务逻辑

3. **领域层（Domain Layer）**
   - 核心业务逻辑层
   - 包含实体、值对象、领域服务和仓储接口等

4. **基础设施层（Infrastructure Layer）**
   - 提供技术实现细节
   - 如数据库访问、消息队列、缓存等

### 2.3 依赖原则

各层之间遵循依赖倒置原则，高层不直接依赖低层的具体实现，而是通过接口进行交互，保证了良好的可维护性和可扩展性。

## 3. 核心模块介绍

### 3.1 全局模块（Global）

全局模块包含一系列根据技术要点建立的全局子模块，提供系统级的规范和功能：

- **监控管理**：global-actuator-boot-starter 提供系统监控和管理端点
- **安全框架**：global-security-boot-starter 提供安全认证和授权功能
- **数据访问**：global-mybatis-plus-boot-starter、global-datasource-boot-starter 等提供数据访问支持
- **缓存支持**：global-redis-boot-starter、global-cache-boot-starter 提供多种缓存方案
- **文档支持**：global-swagger-boot-starter 提供 API 文档生成功能
- **消息处理**：global-messaging-boot-starter 提供异步消息处理机制
- **任务调度**：global-scheduler-boot-starter 提供定时任务调度功能
- **日志处理**：global-logging-boot-starter、global-catchlog-boot-starter 提供全面的日志管理
- **异常处理**：global-exception-handle-boot-starter 提供统一异常处理机制

### 3.2 公共模块（Common）

公共模块基于四层架构，包含分层基础通用模块：

- **common-adapter**：适配层基础模块
- **common-app**：应用层基础模块
- **common-domain**：领域层基础模块
- **common-infrastructure**：基础设施层基础模块
- **common-client**：客户端接口和服务契约定义
- **common-constant**：全局常量定义

### 3.3 业务组件模块（Component）

业务组件是实现具体业务功能的模块集合，每个组件都是相对独立的业务单元：

#### 核心业务组件
- **用户管理（user）**：提供用户注册、登录、权限管理等功能
- **角色管理（role）**：实现角色分配、权限控制等RBAC核心功能
- **部门管理（dept）**：组织架构管理功能
- **字典管理（dict）**：系统数据字典维护
- **区域管理（area）**：地理区域信息管理
- **功能菜单（func）**：系统菜单及权限配置
- **操作日志（op-log）**：用户行为日志记录和分析

#### 扩展业务组件
- **内容管理（cms）**：文章、资讯等内容管理系统
- **客户关系（crm）**：客户信息和跟进管理
- **任务调度（scheduler）**：分布式任务调度系统
- **数据管理（data）**：数据维护和管理功能
- **配置管理（config）**：系统参数配置管理
- **租户管理（tenant）**：多租户支持功能
- **开放平台（open-platform）**：对外提供开放接口支持
- **消息管理（message）**：站内信、通知等消息系统

#### 特色功能组件
- **低代码平台（low-code）**：可视化代码生成工具，支持前后端代码同步生成
- **组件管理（component-admin）**：组件注册、发现和状态监控
- **AI集成（agi）**：人工智能生成功能
- **数据查询（data-query）**：灵活的数据查询构建器
- **数据权限（data-constraint）**：细粒度数据访问控制

## 4. 平台特色功能

### 4.1 组件化架构

Particle 平台最大的特点是其组件化架构设计：

1. **模块独立性**：每个业务组件都可以独立开发、测试和部署
2. **插件化集成**：通过组件管理模式，可以按需启用或禁用特定功能
3. **依赖管理**：组件管理器可以清晰地展示组件之间的依赖关系

### 4.2 低代码开发

平台内置低代码开发组件，具有以下特点：

1. **可视化配置**：通过图形化界面进行代码生成配置
2. **前后端同步**：一次性生成前后端完整代码
3. **模板碎片化**：代码模板被拆分成小颗粒度，便于理解和修改
4. **易于定制**：提供友好的模板自定义机制

### 4.3 统一开发规范

平台建立了完整的开发规范体系：

1. **代码风格统一**：通过 Lombok、MapStruct 等工具统一代码风格
2. **接口文档自动生成**：集成 Swagger，实现接口文档自动化
3. **参数校验标准化**：通过 global-validation-boot-starter 统一参数校验
4. **异常处理机制**：全局异常处理器，统一异常响应格式

### 4.4 安全防护体系

平台提供了多层次的安全防护：

1. **身份认证**：基于 Spring Security 的认证机制
2. **权限控制**：RBAC 权限模型，支持细粒度权限控制
3. **数据权限**：支持行级数据权限控制
4. **会话管理**：分布式 Session 管理支持
5. **限流保护**：接口限流防止恶意请求

### 4.5 开放平台

开放平台组件提供了一套完整的API开放和第三方应用管理系统，主要功能包括：

1. **应用管理**
    - 应用开通
    - 应用密钥和签名算法管理
    - 应用权限和访问控制
    - 应用额度和计费管理

2. **接口管理**
    - 开放接口定义和分类
    - 接口文档自动生成和维护
    - 接口调用频率限制和防护

3. **供应商管理**
    - 供应商接入和配置管理
    - 多供应商负载均衡和故障切换

4. **调用记录与统计**
    - 接口调用详细记录
    - 调用统计
    - 实时监控和告警机制

5. **计费与限额**
    - 灵活的计费策略配置
    - 调用次数消耗计量
    - 额度限制
    - 账单生成和结算管理

6. **安全保障**
    - 多种认证方式支持（API Key、OAuth2等）
    - 请求签名验证和防篡改
    - IP白名单和访问控制
    
7. **灵活动态管理接口**
    - 结合数据查询模块，实现动态数据查询

### 4.6 报告管理

报告组件提供了一套完整的数据报表生成和管理系统，主要功能包括：

1. **报告模板管理**
   - 报告模板创建和编辑
   - 模板权限控制和分类管理
   - 模板复用和继承机制

2. **数据源动态脚本**
   - 数据获取支持动态脚本处理

3. **报告生成**
   - 支持多种输出格式（HTML、PDF等）
   - 模板渲染和变量替换
   - 报告片段组合和嵌套
   - 自定义脚本处理（Groovy等）
   - 内置支持为开放平台生成接口文档

4. **报告接口**
   - 内置支持将报告接口输出到开放平台，对外提供服务

## 5. 开发流程

### 5.1 新功能开发步骤

1. **需求分析**：明确业务需求和技术要求
2. **组件选择**：评估是否可以复用现有组件
3. **模块创建**：如需新建组件，按照四层架构创建相应模块
4. **编码实现**：遵循平台开发规范进行编码
5. **单元测试**：编写单元测试保证代码质量
6. **集成测试**：进行模块集成和系统测试
7. **部署上线**：通过组件管理模式部署到生产环境

### 5.2 组件开发规范

1. **目录结构**：严格按照 adapter、app、domain、infrastructure 四层划分
2. **依赖控制**：上层模块不能直接依赖下层具体实现
3. **接口设计**：通过接口定义模块间交互契约
4. **配置管理**：使用 Spring Boot 配置机制管理组件配置
5. **文档编写**：为每个组件编写详细的 README 文档

## 6. 部署与运维

### 6.1 部署方式

平台支持多种部署方式：

1. **单体部署**：所有组件打包成一个应用部署
2. **微服务部署**：将不同业务组件拆分成独立微服务
3. **混合部署**：核心组件单体部署，扩展组件微服务部署

### 6.2 监控与运维

1. **健康检查**：通过 Actuator 提供应用健康状态监控
2. **性能监控**：集成性能监控工具，实时监控系统性能

## 7. 总结

Particle 开发平台是一个现代化的企业级应用开发解决方案，它结合了 DDD 设计理念和组件化架构思想，为开发者提供了高效、规范、可扩展的开发平台。通过丰富的功能组件和完善的开发工具链，大大提升了开发效率，降低了系统维护成本。
